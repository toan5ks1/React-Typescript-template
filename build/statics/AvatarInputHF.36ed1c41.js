var C=Object.defineProperty;var v=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var b=(t,e,a)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,x=(t,e)=>{for(var a in e||(e={}))R.call(e,a)&&b(t,a,e[a]);if(v)for(var a of v(e))_.call(e,a)&&b(t,a,e[a]);return t};import{by as H,bp as S,r as g,R as o,aj as i,fD as F,ch as O,hZ as V}from"./index.7daee9ef.js";import{I as k}from"./IconButtonBase.a835a6a3.js";var B=H(S.exports.jsx("path",{d:"M21 6h-3.17L16 4h-6v2h5.12l1.83 2H21v12H5v-9H3v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM8 14c0 2.76 2.24 5 5 5s5-2.24 5-5-2.24-5-5-5-5 2.24-5 5zm5-3c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3zM5 6h3V4H5V1H3v3H0v2h3v3h2z"}),"AddAPhotoOutlined");const u={root:t=>({height:112,width:112,backgroundColor:t.palette.grey[200]}),labelFor:{position:"absolute",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)"},delete:t=>({position:"absolute",top:0,right:0,padding:t.spacing(1),backgroundColor:t.palette.grey[200],zIndex:10}),icon:t=>({color:t.palette.text.secondary})},y=t=>{const{src:e,name:a,readOnly:n,onChange:c,shouldDelete:r,onRemove:p}=t,d=!n&&r&&e,s=g.exports.useRef(null);return g.exports.useEffect(()=>{!Boolean(e)&&s.current&&(s.current.value="")},[e]),o.createElement(i,{position:"relative",borderRadius:"50%",sx:u.root,style:{backgroundImage:e?`url(${e})`:"none",backgroundSize:"cover"},"data-testid":"AvatarInput__root"},d&&o.createElement(k,{size:"large",onClick:p,"data-testid":"AvatarInput__delete",sx:u.delete},o.createElement(F,{fontSize:"small"})),o.createElement("label",{htmlFor:n?"":a,"data-testid":"AvatarInput__labelHtmlFor",style:{position:"absolute",width:"100%",height:"100%",cursor:"pointer"}},e?null:o.createElement(i,{component:"span",sx:u.labelFor},o.createElement(B,{sx:u.icon,fontSize:"large"}))),o.createElement(i,{display:"none"},o.createElement("input",{id:a,onChange:c,accept:"image/*",type:"file","data-testid":"AvatarInput__input",ref:s})))};y.defaultProps={readOnly:!1};const D=t=>{const{name:e,readOnly:a,onChange:n,mode:c,initialSource:r,shouldDelete:p,onRemove:d}=t,{register:s,getValues:E,setValue:m}=O(),[A,h]=g.exports.useState(()=>E(r)),I=async l=>{if(l.target.files&&l.target.files[0]){const f=await V(l.target.files[0]);h(f),n&&n(l.target.files,f),c&&m(e,c==="files"?l.target.files:f)}},z=()=>{h(void 0),m(e,void 0),m(r,void 0),d&&d()};return o.createElement(i,null,o.createElement(y,{name:e,shouldDelete:p,readOnly:a,onChange:I,onRemove:z,src:A}),o.createElement(i,{display:"none"},o.createElement("input",x({},s(r)))))};D.defaultProps={readOnly:!1};export{D as A,y as a};
