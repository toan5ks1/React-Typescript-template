import{aS as a,h_ as T,r as n,R as e,d2 as C,d0 as w,d3 as x,aj as K,gA as P,g2 as v,d5 as F,d9 as I,bb as D}from"./index.7daee9ef.js";import{r as A,u,v as N,x as R}from"./useShowSnackbar.da46e481.js";import{a as $}from"./infer-query.264ca744.js";import{u as M,B as j}from"./useBookMutation.1b588b31.js";import{u as G}from"./useBasicContent.160dc809.js";import{u as Q}from"./useDialog.8ab3e0e0.js";const U=()=>{const o=A(),i=u(a.BOOKS),p=T(a.BOOKS),[k,B]=n.exports.useState(""),{open:b,onOpen:S,onClose:s}=Q(),{school_id:l}=G(),{isLoadingCreate:h,onCreate:c}=M(),O=N(),{result:{isLoading:_,isFetching:y,refetch:d},data:r,pagination:m,resetPaginationOffset:g}=$({entity:"book",action:"BOOK_GET_LIST"})({name:k},{enabled:!0,onError:t=>{R.warn("[BOOK_GET_LIST]",t),O("ra.message.unableToLoadData","error")}}),E=n.exports.useCallback(({name:t})=>{c({name:t,chapterIdsList:[],schoolId:l},{onSuccess:()=>{d(),s()}})},[s,c,d,l]),L=n.exports.useMemo(()=>[{key:"colName",title:i("bookName"),render:t=>e.createElement(C,{"data-testid":"BookList__bookNameLink",to:`/${w.SYLLABUS}/${a.BOOKS}/${t.book_id}/show`,title:t.name},e.createElement(x,{variant:"body2",display:"inline","data-testid":"BookList__bookName",maxLength:60},t.name))}],[i]),f=n.exports.useCallback(t=>{B(t),g()},[g]);return e.createElement(e.Fragment,null,e.createElement(K,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},e.createElement(P,{onEnterSearchBar:f}),e.createElement(v,{onClick:S,"data-testid":"AddBook__addButton"},o("ra.common.action.add"))),e.createElement(F,{body:{rowKey:p,loading:_||y,pagination:m},data:(r==null?void 0:r.data)||[],columns:L,tableProps:{"data-testid":"BookList__table"},footer:{pagination:m,labelRowsPerPage:o("ra.navigation.page_rows_per_page")},withIndex:{width:"5%"}}),e.createElement(j,{open:b,loading:h,title:o(`resources.${a.BOOKS}.dialog.addTitle`),onClose:s,onSave:E}))},V=()=>{const o=u(a.BOOKS);return e.createElement(I,null,e.createElement(D,{title:o("name")}),e.createElement(U,null))};export{V as default};
