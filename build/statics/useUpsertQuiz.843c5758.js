var Xa=Object.defineProperty,Ka=Object.defineProperties;var Za=Object.getOwnPropertyDescriptors;var Br=Object.getOwnPropertySymbols;var Wn=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable;var Bn=(i,n,e)=>n in i?Xa(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e,rt=(i,n)=>{for(var e in n||(n={}))Wn.call(n,e)&&Bn(i,e,n[e]);if(Br)for(var e of Br(n))zn.call(n,e)&&Bn(i,e,n[e]);return i},ct=(i,n)=>Ka(i,Za(n));var yt=(i,n)=>{var e={};for(var t in i)Wn.call(i,t)&&n.indexOf(t)<0&&(e[t]=i[t]);if(i!=null&&Br)for(var t of Br(i))n.indexOf(t)<0&&zn.call(i,t)&&(e[t]=i[t]);return e};import{bc as generateUtilityClass,bd as generateUtilityClasses,a8 as styled,bf as capitalize,bh as _extends,r as react,bk as useThemeProps,bl as _objectWithoutPropertiesLoose,bo as composeClasses,bp as jsxRuntime,a1 as clsx,iN as _setPrototypeOf,$ as _assertThisInitialized,by as createSvgIcon,iO as on,iP as off,iQ as isBrowser$1,iR as noop,cj as pick1stElement,R as React,c8 as Paper,i1 as MAX_FILE_SIZE_PDF,dq as createSvgIcon$1,dr as interopRequireDefault,aS as Entities,aj as Box,iE as TextField,hq as LabelTypes,ak as ButtonBase,cU as Draft,iS as default_1$5,ef as FormControl,fy as FormControlLabel$1,iT as typographyClasses,du as Radio,hj as CheckboxBase,hp as quiz_pb,ij as SpacingGroup,g2 as ButtonCreate,gO as InputLabel,iU as MuiSelect,a9 as $enum,cb as MenuItem,iV as formControlClasses,iW as checkboxClasses,hM as FormGroup,iX as Checkbox,dc as DividerDashed,aK as TypographyBase,N as useSelector,aJ as Grid,ia as AutocompleteBase,cZ as toArr,iY as FormDialog,c4 as Button,hV as KeyLOTypes,cK as TypographyHeader,im as useTextCapitalize,ck as Can,u as useDispatch,cq as ButtonPrimaryContained,iZ as LanguageEnums,f as commonjsGlobal,i_ as commonjsRequire,i$ as require$$4,W as PropTypes,j0 as invariant,Y as _defineProperty,P as _extends$1,c6 as Popper,cL as IconButton,j1 as isNumericValue,a2 as reactDom,fm as genId,hE as useTranslationContext,iG as CloseIcon,ey as parseQuery,d0 as MicroFrontendTypes,ez as stringifyQuery,hL as SearchEngine,iy as removeAllLoadingImage}from"./index.7daee9ef.js";import{Q as QuizActions,B as BaseBox,b as default_1$4,o as onlyInlineToolbar,g as allToolbar,h as QuizEditor,i as useFormProps,j as currentQuizQuestionSelector,c as currentLOSelector,k as useQuizInstructionText,e as currentQuizSelector,l as useTextEntity,R as RectTypes,m as default_1$6,n as answersSelector,p as quizTypeSelector,a as QuizReview}from"./Delete.9e106999.js";import{u as useResourceTranslate,H as isFlashCardQuiz,J as isQuizFIB,O as isQuizMCQ,P as isQuizMAQ,r as useTranslate,Q as DifficultyLevels,R as hasAnswerSetting,T as FieldTypes,U as QuizSelectors,M as shouldVisibleExplanation,v as useShowSnackbar,w as inferMutation}from"./useShowSnackbar.da46e481.js";import{U as UploadInput,a as useFormProps$1}from"./UploadInput.4c4e4115.js";import{i as inferQuery}from"./infer-query.264ca744.js";import{u as useDialog}from"./useDialog.8ab3e0e0.js";import{_ as _typeof,b as _createClass,e as _classCallCheck,d as _slicedToArray,c as _toConsumableArray,a as _objectWithoutProperties}from"./classCallCheck.4ad2061f.js";import{u as useNavigation}from"./useNavigation.f38e637f.js";import{u as useNotifyForm}from"./useNotifyForm.ee77e08e.js";var isProduction=!0;function warning(i,n){if(!isProduction){if(i)return;var e="Warning: "+n;typeof console!="undefined"&&console.warn(e);try{throw Error(e)}catch{}}}function getContainerUtilityClass(i){return generateUtilityClass("MuiContainer",i)}generateUtilityClasses("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]);const _excluded$1=["className","component","disableGutters","fixed","maxWidth"],useUtilityClasses=i=>{const{classes:n,fixed:e,disableGutters:t,maxWidth:a}=i,o={root:["root",a&&`maxWidth${capitalize(String(a))}`,e&&"fixed",t&&"disableGutters"]};return composeClasses(o,getContainerUtilityClass,n)},ContainerRoot=styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(i,n)=>{const{ownerState:e}=i;return[n.root,n[`maxWidth${capitalize(String(e.maxWidth))}`],e.fixed&&n.fixed,e.disableGutters&&n.disableGutters]}})(({theme:i,ownerState:n})=>_extends({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:i.spacing(2),paddingRight:i.spacing(2),[i.breakpoints.up("sm")]:{paddingLeft:i.spacing(3),paddingRight:i.spacing(3)}}),({theme:i,ownerState:n})=>n.fixed&&Object.keys(i.breakpoints.values).reduce((e,t)=>{const a=i.breakpoints.values[t];return a!==0&&(e[i.breakpoints.up(t)]={maxWidth:`${a}${i.breakpoints.unit}`}),e},{}),({theme:i,ownerState:n})=>_extends({},n.maxWidth==="xs"&&{[i.breakpoints.up("xs")]:{maxWidth:Math.max(i.breakpoints.values.xs,444)}},n.maxWidth&&n.maxWidth!=="xs"&&{[i.breakpoints.up(n.maxWidth)]:{maxWidth:`${i.breakpoints.values[n.maxWidth]}${i.breakpoints.unit}`}})),Container=react.exports.forwardRef(function(n,e){const t=useThemeProps({props:n,name:"MuiContainer"}),{className:a,component:o="div",disableGutters:u=!1,fixed:l=!1,maxWidth:h="lg"}=t,S=_objectWithoutPropertiesLoose(t,_excluded$1),w=_extends({},t,{component:o,disableGutters:u,fixed:l,maxWidth:h}),x=useUtilityClasses(w);return jsxRuntime.exports.jsx(ContainerRoot,_extends({as:o,ownerState:w,className:clsx(x.root,a),ref:e},S))});var Container$1=Container;function _inherits(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&_setPrototypeOf(i,n)}function _possibleConstructorReturn(i,n){if(n&&(_typeof(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}function _getPrototypeOf(i){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(i)}var ArrowBackIos=createSvgIcon(jsxRuntime.exports.jsx("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),ArrowForwardIos=createSvgIcon(jsxRuntime.exports.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),defaultTarget=isBrowser$1?window:null,isListenerType1=function(i){return!!i.addEventListener},isListenerType2=function(i){return!!i.on},useEvent=function(i,n,e,t){e===void 0&&(e=defaultTarget),react.exports.useEffect(function(){if(!!n&&!!e)return isListenerType1(e)?on(e,i,n,t):isListenerType2(e)&&e.on(i,n,t),function(){isListenerType1(e)?off(e,i,n,t):isListenerType2(e)&&e.off(i,n,t)}},[i,n,e,JSON.stringify(t)])},useEvent$1=useEvent,createKeyPredicate=function(i){return typeof i=="function"?i:typeof i=="string"?function(n){return n.key===i}:i?function(){return!0}:function(){return!1}},useKey=function(i,n,e,t){n===void 0&&(n=noop),e===void 0&&(e={}),t===void 0&&(t=[i]);var a=e.event,o=a===void 0?"keydown":a,u=e.target,l=e.options,h=react.exports.useMemo(function(){var S=createKeyPredicate(i),w=function(x){if(S(x))return n(x)};return w},t);useEvent$1(o,h,u,l)},useKey$1=useKey;const MaterialUpload=i=>{const{className:n,dispatch:e}=i,t=react.exports.useCallback((a,o)=>{e(QuizActions.setPdfUrl({url:pick1stElement(o)||""}))},[e]);return React.createElement(BaseBox,null,React.createElement(Paper,{className:n,elevation:0},React.createElement(UploadInput,{accept:"application/pdf",multiple:!1,maxSize:MAX_FILE_SIZE_PDF,onChange:t,autoUpload:!0})))};var MaterialUpload$1=react.exports.memo(MaterialUpload),ImageSearch={},_interopRequireDefault$3=interopRequireDefault.exports;Object.defineProperty(ImageSearch,"__esModule",{value:!0});var default_1$3=ImageSearch.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(createSvgIcon$1),_jsxRuntime$3=jsxRuntime.exports,_default$3=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M18 13v7H4V6h5.02c.05-.71.22-1.38.48-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-5l-2-2zm-1.5 5h-11l2.75-3.53 1.96 2.36 2.75-3.54zm2.8-9.11c.44-.7.7-1.51.7-2.39C20 4.01 17.99 2 15.5 2S11 4.01 11 6.5s2.01 4.5 4.49 4.5c.88 0 1.7-.26 2.39-.7L21 13.42 22.42 12 19.3 8.89zM15.5 9C14.12 9 13 7.88 13 6.5S14.12 4 15.5 4 18 5.12 18 6.5 16.88 9 15.5 9z"}),"ImageSearch");default_1$3=ImageSearch.default=_default$3;const Asterisk=()=>React.createElement("span",null,"*");var AddCircle={},_interopRequireDefault$2=interopRequireDefault.exports;Object.defineProperty(AddCircle,"__esModule",{value:!0});var default_1$2=AddCircle.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(createSvgIcon$1),_jsxRuntime$2=jsxRuntime.exports,_default$2=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");default_1$2=AddCircle.default=_default$2;const ListLabel=i=>{const n=useResourceTranslate(Entities.QUIZZES),{label:e,readOnly:t=!1,onChange:a,type:o,sx:u}=i;return React.createElement(Box,{mr:1,maxWidth:"110px",sx:u},React.createElement(TextField,{value:e,disabled:o===LabelTypes.CUSTOM?t:!0,onChange:a,label:n("prefix"),"data-testid":"ListLabel__prefix"}))};var ListLabel$1=react.exports.memo(ListLabel);const DeleteAnswerButton=i=>{const n=useResourceTranslate(Entities.QUIZZES);return React.createElement(ButtonBase,ct(rt({},i),{sx:{color:"#F44336"},startIcon:React.createElement(default_1$4,null),"data-testid":"DeleteAnswerButton__root"}),n("deleteTheAnswer"))},sx$a={root:i=>({"& > *:not(:last-of-type)":{marginLeft:i.spacing(1)}}),headerTitle:i=>({fontSize:"0.875rem",color:i.palette.text.primary,fontWeight:500}),answerField:i=>({"&:not(:first-of-type)":{marginTop:i.spacing(1.5)}}),answerLabel:i=>({marginRight:i.spacing(1),maxWidth:"110px"}),addAlterBtn:i=>({"&:hover":{backgroundColor:"unset"},color:"#2196F3",paddingTop:i.spacing(2),fontWeight:500}),removeAlter:i=>({color:"#F44336",cursor:"pointer",marginLeft:i.spacing(2.5),position:"relative",minWidth:"110px","& > span":{"& > svg":{fontSize:"1.25rem",marginRight:i.spacing(.5)},fontWeight:500,fontSize:"0.875rem",position:"absolute",transform:"translateY(-50%)",top:"50%",right:i.spacing(2),display:"flex",alignItems:"center"}})};function isMainAnswer(i){return i===0}const AnswerFillInBlank=i=>{const n=useResourceTranslate(Entities.QUIZZES),{index:e,labelType:t,list:a,readOnly:o,onChange:u,onDelete:l,onChangeLabel:h,onAddNewAnswer:S,onDeleteGroup:w}=i,x=(P,A)=>{h(A,P.target.value)},N=react.exports.useCallback((P,A)=>{u(A,Draft.EditorState.createWithContent(Draft.ContentState.createFromText(P.target.value)))},[u]),T=()=>{const P=pick1stElement(a);P&&P.groupKey&&S({groupKey:P.groupKey})},R=()=>{const P=pick1stElement(a);P&&P.groupKey&&w(P.groupKey)};return a.length===0?null:React.createElement(Box,{sx:sx$a.root,"data-testid":"AnswerFillInBlank__form"},React.createElement("div",null,React.createElement(Box,{display:"flex",justifyContent:"space-between",justifyItems:"center",marginBottom:1.5},React.createElement(Box,{display:"flex"},React.createElement(Box,{component:"span",sx:sx$a.headerTitle},n("answer")," ",e,"\xA0",React.createElement(Asterisk,null))),React.createElement(DeleteAnswerButton,{onClick:R}))),React.createElement(Box,{display:"flex",flex:"1 1",flexShrink:"0"},React.createElement("span",null,t?React.createElement(ListLabel$1,{sx:sx$a.answerLabel,type:t,label:pick1stElement(a).label,readOnly:o,onChange:P=>{var A;return x(P,(A=pick1stElement(a))==null?void 0:A.id)}}):null),React.createElement(Box,{flex:"1"},React.createElement("div",null,a.map((P,A)=>React.createElement(Box,{key:A,sx:sx$a.answerField,display:"flex",justifyContent:"center"},React.createElement(TextField,{variant:"outlined",value:P.content.getCurrentContent().getPlainText(),"data-js":isMainAnswer(A)?"FillInBlank__input":"FillInBlank__inputAlter",label:isMainAnswer(A)?`${n("answer")} ${e}`:`${n("alternative")} ${A}`,placeholder:isMainAnswer(A)?`${n("answer")} ${e}`:n("enterAlternativeVal"),InputProps:{readOnly:o},onChange:D=>N(D,P.id)}),React.createElement(Box,{sx:sx$a.removeAlter,onClick:()=>l(P.id),style:{visibility:isMainAnswer(A)?"hidden":"visible"}},React.createElement("span",null,React.createElement(default_1$5,null),n("removeTheAnswer")))))),React.createElement(ButtonBase,{sx:sx$a.addAlterBtn,variant:"text","data-testid":"AnswerFillInBlank__addAlter",disableRipple:!0,onClick:T,startIcon:React.createElement(default_1$2,null)},n("addAlternative")))))};var AnswerFillInBlank$1=react.exports.memo(AnswerFillInBlank);const sx$9={root:i=>({paddingLeft:i.spacing(1),marginBottom:i.spacing(.25)}),label:i=>({"& span:first-of-type":{marginRight:i.spacing(.25)},[`& .${typographyClasses.root}`]:{color:i.palette.text.primary,fontWeight:400}})},FormControlLabel=i=>{const u=i,{label:n,labelPlacement:e,control:t,onChange:a}=u,o=yt(u,["label","labelPlacement","control","onChange"]);return React.createElement(FormControl,{component:"fieldset",sx:sx$9.root},React.createElement(FormControlLabel$1,rt({sx:sx$9.label,control:t,label:n,labelPlacement:e,onChange:a},o)))};FormControlLabel.defaultProps={labelPlacement:"end"};const AnswerMultipleChoice=i=>{const{content:n,correct:e,onDelete:t,readOnly:a,onChange:o,onChangeCorrect:u,quizType:l}=i,h=useResourceTranslate(Entities.QUIZZES),S=isFlashCardQuiz(l)?onlyInlineToolbar:allToolbar;return React.createElement(Box,{display:"flex",flexDirection:"column","data-testid":"AnswerMultipleChoice__form"},React.createElement(FormControlLabel,{onChange:u,label:h("correctAnswer"),control:React.createElement(Radio,{checked:e,color:"primary"})}),React.createElement(QuizEditor,{editorState:n,readOnly:a,toolbar:a?void 0:S,actions:React.createElement(DeleteAnswerButton,{onClick:t}),onChange:o}))};var AnswerMultipleChoice$1=react.exports.memo(AnswerMultipleChoice);const AnswerManualInput=i=>{const n=useResourceTranslate(Entities.QUIZZES),{content:e}=i;return React.createElement(QuizEditor,{toolbar:allToolbar,placeholder:n("explanation"),editorState:e,onChange:i.onChange})};var AnswerManualInput$1=react.exports.memo(AnswerManualInput);const AnswerMultipleAnswer=i=>{const{content:n,correct:e,onDelete:t,readOnly:a,onChange:o,onChangeCorrect:u,quizType:l}=i,h=useResourceTranslate(Entities.QUIZZES),S=isFlashCardQuiz(l)?onlyInlineToolbar:allToolbar,w=react.exports.useCallback((x,N)=>{u&&u(N)},[u]);return React.createElement(Box,{display:"flex",flexDirection:"column","data-testid":"AnswerMultipleAnswer__form"},React.createElement(FormControlLabel,{onChange:w,label:h("correctAnswer"),control:React.createElement(CheckboxBase,{checked:e,color:"primary"})}),React.createElement(QuizEditor,{editorState:n,readOnly:a,toolbar:a?void 0:S,actions:React.createElement(DeleteAnswerButton,{onClick:t}),onChange:o}))};var AnswerMultipleAnswer$1=react.exports.memo(AnswerMultipleAnswer);const AnswerTermAndDefinition=i=>{const{content:n,quizType:e}=i,t=isFlashCardQuiz(e)?onlyInlineToolbar:allToolbar;return React.createElement(QuizEditor,{toolbar:t,editorState:n,onChange:i.onChange})};var AnswerTermAndDefinition$1=react.exports.memo(AnswerTermAndDefinition);const Answer=i=>{const{answer:n,readOnly:e,quizType:t,onChange:a,onDelete:o,onChangeCorrect:u}=i,l=react.exports.useCallback(w=>{typeof a=="function"&&a(n.id,w)},[a,n]),h=react.exports.useCallback(w=>{typeof u=="function"&&u(n.id,Boolean(w))},[u,n]),S=react.exports.useCallback(()=>{typeof o=="function"&&o(n.id)},[o,n]);switch(t){case quiz_pb.QuizType.QUIZ_TYPE_MAQ:return React.createElement(AnswerMultipleAnswer$1,{key:n.id,content:n.content,correct:n.correct,readOnly:e,quizType:t,onDelete:S,onChange:l,onChangeCorrect:h});case quiz_pb.QuizType.QUIZ_TYPE_MCQ:return React.createElement(AnswerMultipleChoice$1,{key:n.id,content:n.content,correct:n.correct,readOnly:e,quizType:t,onDelete:S,onChange:l,onChangeCorrect:h});case quiz_pb.QuizType.QUIZ_TYPE_MIQ:return React.createElement(AnswerManualInput$1,{key:n.id,content:n.content,correct:n.correct,quizType:t,onDelete:S,onChange:l});case quiz_pb.QuizType.QUIZ_TYPE_TAD:case quiz_pb.QuizType.QUIZ_TYPE_POW:return React.createElement(AnswerTermAndDefinition$1,{key:n.id,content:n.content,correct:n.correct,quizType:t,onDelete:S,onChange:l});default:return null}};var Answer$1=react.exports.memo(Answer);const AnswerFillInBlankList=i=>{const{answers:n,onChange:e,labelType:t,onChangeLabel:a,onAddNewAnswer:o,onDeleteAnswer:u,onDeleteGroupAnswer:l}=i,h=react.exports.useMemo(()=>{const w=n.length,x=new Map;for(let N=0;N<w;N++){const T=n[N],{groupKey:R}=T;if(R){const P=x.get(R);if(P){x.set(R,[...P,T]);continue}x.set(R,[T])}}return Array.from(x.values())},[n]),S=react.exports.useCallback((w,x)=>{typeof e=="function"&&e(w,x)},[e]);return React.createElement(React.Fragment,null,h.map((w,x)=>React.createElement(AnswerFillInBlank$1,{labelType:t,key:x,index:x+1,list:w,onChangeLabel:a,onChange:S,onAddNewAnswer:o,onDelete:u,onDeleteGroup:l})))},useAddQuestionBtnConfig=i=>{const{readOnly:n,quizType:e,totalAnswer:t}=i,a=react.exports.useMemo(()=>isQuizFIB(e)?!0:e==quiz_pb.QuizType.QUIZ_TYPE_MIQ?!1:!n&&!isFlashCardQuiz(e),[e,n]);return{disabled:react.exports.useMemo(()=>isQuizMCQ(e)||isQuizMAQ(e)?t>=20:!1,[e,t]),shouldVisible:a}},AnswerList=i=>{const{quizType:n,answers:e,readOnly:t,labelType:a,labelAddNew:o,onDeleteAnswer:u,onChangeAnswer:l,onAddNewAnswer:h,onChangeLabel:S,onChangeCorrect:w,onDeleteGroupAnswer:x}=i,{shouldVisible:N,disabled:T}=useAddQuestionBtnConfig({readOnly:t,quizType:n,totalAnswer:e.length});return React.createElement("div",null,React.createElement(SpacingGroup,{spacing:"1.25rem","data-js":"Quiz__answer"},isQuizFIB(n)?React.createElement(AnswerFillInBlankList,{answers:e,onChange:l,labelType:a,onChangeLabel:S,onAddNewAnswer:h,onDeleteAnswer:u,onDeleteGroupAnswer:x}):e.map(R=>React.createElement(Answer$1,{key:R.id,answer:R,readOnly:t,quizType:n,labelType:a,onChange:l,onDelete:u,onChangeLabel:S,onChangeCorrect:w}))),N&&React.createElement(ButtonCreate,{fullWidth:!0,size:"large",color:"primary",variant:"contained",disabled:T,"data-testid":"AnswerList__addNewAnswer",style:{marginTop:"1rem"},onClick:()=>h({})},o))},BaseSelect=l=>{var h=l,{className:i,children:n,label:e,name:t,required:a,size:o}=h,u=yt(h,["className","children","label","name","required","size"]);const{readOnly:S}=useFormProps();return React.createElement(FormControl,{className:clsx(i),sx:{borderRadius:"4px"},variant:"outlined",size:o},React.createElement(InputLabel,{required:a,htmlFor:"base-select"},e),React.createElement(MuiSelect,ct(rt({labelId:"base-select","data-testid":"BaseSelect"},u),{label:e,readOnly:S}),n))},defaultSelectOptions={createTranslatorKey:i=>`${i}`};function createSelectFromEnum(i,n=defaultSelectOptions){const{createTranslatorKey:e,label:t}=n;let a=$enum(i).getValues();function o(u){const l=useTranslate(),x=u,{renderMenus:h}=x,S=yt(x,["renderMenus"]),w=react.exports.useMemo(()=>typeof h=="function"?h(a,e):a.map(N=>React.createElement(MenuItem,{key:N,value:N},l(e(N)))),[l,h]);return React.createElement(BaseSelect,ct(rt({},S),{label:l(t)}),w)}return o}const ListLabelSelect=createSelectFromEnum(LabelTypes,ct(rt({},defaultSelectOptions),{createTranslatorKey:i=>`resources.choices.listTypes.${i}`,label:`resources.${Entities.QUIZZES}.listType`})),sx$8={root:i=>({marginBottom:i.spacing(3),[`& .${formControlClasses.fullWidth}`]:{width:"120px"}}),makeIntoList:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:"1.5rem",maxWidth:"80%","& > :first-of-type":i=>({marginLeft:i.spacing(1.5)})},applyOption:{[`&.${checkboxClasses.checked}`]:i=>{var n;return{color:(n=i.palette.blue)==null?void 0:n[500]}}}},AnswerOptions=i=>{const n=useResourceTranslate(Entities.QUIZZES),{labelType:e,onChangeLabelType:t}=i;return React.createElement(Box,{sx:sx$8.root},React.createElement(Box,{sx:sx$8.makeIntoList},React.createElement(FormGroup,{row:!0},React.createElement(FormControlLabel$1,{"data-testid":"AnswerOptions__highlightRadio",label:n("makeIntoList"),checked:!!e,control:React.createElement(Checkbox,{sx:sx$8.applyOption,onChange:()=>t(e?null:LabelTypes.NUMBER)})})),React.createElement(ListLabelSelect,{size:"small",disabled:!e,readOnly:!e,value:e!=null?e:"",onChange:a=>t(a.target.value),"data-testid":"AnswerOption__selectedList"})))},QuizAnswer=i=>{const{answer:n,readOnly:e,quizType:t,onChangeCorrect:a,onDeleteAnswer:o,onAddNewAnswer:u,onChangeAnswer:l,onChangeLabel:h,onChangeLabelType:S,onDeleteGroupAnswer:w}=i,x=useResourceTranslate(Entities.QUIZZES),N=react.exports.useMemo(()=>{const T=Array.from(n.list.values());return t===quiz_pb.QuizType.QUIZ_TYPE_MIQ?[]:T},[n,t]);return React.createElement(SpacingGroup,{spacing:"32px"},t===quiz_pb.QuizType.QUIZ_TYPE_FIB?React.createElement(AnswerOptions,{labelType:n.labelType,configs:n.configs,onChangeLabelType:S}):null,React.createElement(AnswerList,{readOnly:e,answers:N,labelType:n.labelType,quizType:t,labelAddNew:x("addAnswer"),onDeleteAnswer:o,onChangeAnswer:l,onChangeCorrect:a,onChangeLabel:h,onDeleteGroupAnswer:w,onAddNewAnswer:u}))};var QuizAnswer$1=react.exports.memo(QuizAnswer);const QuizItemLayout=i=>{const{primaryTitle:n,secondaryTitle:e,visibleDivider:t,children:a}=i;return React.createElement("div",null,t&&React.createElement(DividerDashed,null),React.createElement("div",null,React.createElement(TypographyBase,{variant:"h6"},n),React.createElement(Box,{mt:2,mb:1},React.createElement(TypographyBase,{variant:"subtitle2"},e)),a))},QuizQuestion=i=>{const n=useSelector(currentQuizQuestionSelector),e=useResourceTranslate(Entities.QUIZZES),t=isFlashCardQuiz(i.kind);return React.createElement("div",null,React.createElement(QuizEditor,{toolbar:t?onlyInlineToolbar:allToolbar,editorState:n.content,onChange:i.onChange,placeholder:e("questionDescription")}))};var QuizQuestion$1=react.exports.memo(QuizQuestion);const pathKeyTranslate="resources.choices.answerConfigs",QuizAnswerSetting=i=>{const n=useTranslate(),{settings:e,settingValues:t,onChangeAnswerConfigs:a}=i,o=react.exports.useCallback(l=>{a(l)},[a]),u=l=>{switch(l){case quiz_pb.QuizOptionConfig.QUIZ_OPTION_CONFIG_CASE_SENSITIVE:return!t.includes(l);default:return t.includes(l)}};return React.createElement(Box,{marginTop:3},React.createElement(Grid,{container:!0},React.createElement(Grid,{item:!0,xs:12},React.createElement(Box,{mb:2},React.createElement(TypographyBase,{variant:"subtitle2"},n("resources.quizzes.answerConfigs")))),React.createElement(Grid,{item:!0,xs:12},e.map(l=>{const h=n(`${pathKeyTranslate}.${l}`);return React.createElement(FormControlLabel,{key:l,checked:u(l),control:React.createElement(Checkbox,{color:"primary",name:"checkbox",sx:S=>{var w;return{background:S.palette.common.white,[`&.${checkboxClasses.checked}`]:{color:(w=S.palette.blue)==null?void 0:w[500]}}},onChange:()=>o(l)}),label:h,"data-testid":"QuizAnswerSetting__formLabel"})}))))},BaseInput=t=>{var a=t,{InputProps:i,InputLabelProps:n}=a,e=yt(a,["InputProps","InputLabelProps"]);const{readOnly:o=!1}=useFormProps$1(),u=react.exports.useMemo(()=>ct(rt({},i),{readOnly:o}),[i,o]),l=react.exports.useMemo(()=>ct(rt({},n),{shrink:o||(n==null?void 0:n.shrink)}),[n,o]);return React.createElement(TextField,ct(rt({},e),{InputProps:u,InputLabelProps:l}))},FormAutocomplete=i=>{const[n,e]=react.exports.useState(!1),t=useResourceTranslate(Entities.QUIZZES),{onChange:a}=i,{data:o=[],isLoading:u}=inferQuery({entity:"learningObjective",action:"LO_GET_MANY_BY_IDS"})({lo_id:i.value},{enabled:!n,onSuccess:()=>{e(!0)}});return u?React.createElement(AutocompleteBase,{size:"medium",options:[],getOptionSelectedField:"id",optionLabelKey:"id",loading:!0,disabled:!0,label:t("taggedLO"),"data-testid":"LOsAutocomplete__loading"}):React.createElement(LOsAutocomplete,{LOs:o,onChange:a})},LOsAutocomplete=({LOs:i,onChange:n})=>{const[e,t]=react.exports.useState(""),a=useResourceTranslate(Entities.QUIZZES),{data:o=[],isFetching:u}=inferQuery({entity:"learningObjective",action:"LO_GET_LIST"})({name:e,limit:10},{enabled:!0,selector:h=>h.data}),l=react.exports.useCallback(h=>{const w=toArr(h).map(x=>x.lo_id);n(w)},[n]);return React.createElement(AutocompleteBase,{multiple:!0,filterSelectedOptions:!0,size:"medium",label:a("taggedLO"),optionLabelKey:"name",getOptionSelectedField:"lo_id",defaultValue:i,options:[...i,...o],onInputChange:(h,S)=>t(S),loading:u,onChange:(h,S)=>{l(S)}})};var LOsAutocomplete$1=react.exports.memo(FormAutocomplete);const DifficultySelect=createSelectFromEnum(DifficultyLevels,ct(rt({},defaultSelectOptions),{label:`resources.${Entities.QUIZZES}.difficultyLevel`})),sx$7={root:i=>{var n;return{minWidth:570,background:(n=i.palette.common)==null?void 0:n.white,borderRadius:"8px"}},content:i=>{var n;return{textAlign:"center",background:(n=i.palette.common)==null?void 0:n.white}},btn:i=>({padding:i.spacing(1,2),textTransform:"capitalize"}),btnConfirm:i=>{var n,e,t,a;return{background:(n=i.palette.error)==null?void 0:n.main,color:(e=i.palette.common)==null?void 0:e.white,"&:hover":{opacity:.85,background:(t=i.palette.error)==null?void 0:t.main,color:(a=i.palette.common)==null?void 0:a.white}}},btnCancel:{background:"transparent"}},Confirm=i=>{const A=i,{children:n,open:e,renderer:t,loading:a,OKText:o,cancelText:u,onConfirm:l,onCancel:h,onClick:S}=A,w=yt(A,["children","open","renderer","loading","OKText","cancelText","onConfirm","onCancel","onClick"]),{open:x,onOpen:N,onClose:T}=useDialog(e),R=react.exports.useCallback(D=>(D.preventDefault&&D.preventDefault(),D.stopPropagation&&D.stopPropagation(),T(D),h&&h()),[T,h]),P=react.exports.useCallback(D=>{D.preventDefault&&D.preventDefault(),D.stopPropagation&&D.stopPropagation(),N()},[N]);return React.createElement(React.Fragment,null,react.exports.isValidElement(n)?react.exports.cloneElement(n,ct(rt({},w),{onClick:P})):null,React.createElement(FormDialog,{"data-testid":"Dialog__background",PaperProps:{sx:sx$7.root},sxContent:sx$7.content,title:t.title,handleClose:R,onClick:S,open:x,action:React.createElement(React.Fragment,null,React.createElement(Button,{"data-testid":"Confirm__cancel",variant:"outlined",sx:[sx$7.btn,sx$7.btnCancel],onClick:R,"aria-label":u},u),React.createElement(Button,{variant:"contained","data-testid":"Confirm__ok",sx:[sx$7.btn,sx$7.btnConfirm],onClick:D=>{l(D),T(D)}},o))},t.content))};Confirm.defaultProps={renderer:{title:"",content:""}};const QuizTypeSelectFull=createSelectFromEnum(quiz_pb.QuizType,ct(rt({},defaultSelectOptions),{label:`resources.${Entities.QUIZZES}.questionType`,createTranslatorKey:i=>`resources.choices.quizTypes.${i}`})),filterTypesByOnLOType=(i,n)=>i===KeyLOTypes.LEARNING_OBJECTIVE_TYPE_LEARNING?n.filter(e=>e===quiz_pb.QuizType.QUIZ_TYPE_MCQ||e===quiz_pb.QuizType.QUIZ_TYPE_FIB||e===quiz_pb.QuizType.QUIZ_TYPE_MIQ||e===quiz_pb.QuizType.QUIZ_TYPE_MAQ):i===KeyLOTypes.LEARNING_OBJECTIVE_TYPE_EXAM_LO?n.filter(e=>e===quiz_pb.QuizType.QUIZ_TYPE_MCQ||e===quiz_pb.QuizType.QUIZ_TYPE_FIB||e===quiz_pb.QuizType.QUIZ_TYPE_MAQ):n.filter(e=>e===quiz_pb.QuizType.QUIZ_TYPE_POW||e===quiz_pb.QuizType.QUIZ_TYPE_TAD),QuizTypeSelect=i=>{const N=i,{onChange:n}=N,e=yt(N,["onChange"]),t=useSelector(currentLOSelector),[a,o]=react.exports.useState(!1),u=react.exports.useRef(null),l=useTranslate(),h=react.exports.useCallback(T=>{u.current=T.target.value,o(!0)},[]),S=react.exports.useMemo(()=>({title:l(`resources.${Entities.QUIZZES}.changeQuizType`),content:l(`resources.${Entities.QUIZZES}.alertChangeQuizType`)}),[l]),w=react.exports.useCallback(()=>{const T={target:{value:u.current}};n&&n(T),u.current=null,o(!1)},[n]),x=react.exports.useCallback(()=>{u.current=null,o(!1)},[]);return React.createElement(React.Fragment,null,React.createElement(QuizTypeSelectFull,ct(rt({},e),{renderMenus:(T,R)=>filterTypesByOnLOType(t.type,T).map(P=>React.createElement(MenuItem,{key:P,value:P},l(R(P)))),onChange:h})),React.createElement(Confirm,{open:a,renderer:S,OKText:l("ra.common.action.OK"),cancelText:l("ra.common.action.cancel"),onConfirm:w,onCancel:x}))},QuizOptions=i=>{const{difficultyLevel:n,externalId:e,questionType:t,taggedLOs:a,onChange:o,onChangeQuizType:u,externalIdProps:{editExternalIdDisabled:l,externalIdError:h,checkExternalId:S}}=i,w=useResourceTranslate(Entities.QUIZZES),x=T=>{typeof o=="function"&&o(T)},N=react.exports.useCallback(async({target:{value:T}})=>S&&S(T),[S]);return React.createElement("div",{"data-testid":"QuizOptions__root"},React.createElement(TypographyHeader,{sx:useTextCapitalize},React.createElement(Box,{sx:{mt:1,mb:2}},w("description"))),React.createElement(Grid,{container:!0,spacing:3},React.createElement(Grid,{item:!0,xs:7,"data-testid":"QuizOptions__questionType"},React.createElement(QuizTypeSelect,{required:!0,value:t,onChange:T=>u&&u(T.target.value)})),React.createElement(Can,{I:"show.external_id",a:"quizzes"},React.createElement(Grid,{item:!0,xs:5},React.createElement(BaseInput,{error:!!h,helperText:h,required:!0,disabled:l,value:e,label:w("mappedID"),"data-testid":"QuizOptions__externalId",onChange:T=>x({externalId:T.target.value}),onBlur:N}))),React.createElement(Can,{I:"show.tag_lo",a:"quizzes"},React.createElement(Grid,{item:!0,xs:7,"data-testid":"QuizOptions__lo"},React.createElement(LOsAutocomplete$1,{value:a,onChange:T=>{x({taggedLOs:T})}}))),React.createElement(Can,{I:"show.difficulty",a:"quizzes"},React.createElement(Grid,{item:!0,xs:5,"data-testid":"QuizOptions__difficulty"},React.createElement(DifficultySelect,{value:n,onChange:T=>x({difficultyLevel:T.target.value})})))))};var QuizOptions$1=react.exports.memo(QuizOptions);const useQuizAnswerSetting=({kind:i})=>{const n=react.exports.useMemo(()=>hasAnswerSetting(i),[i]),e=react.exports.useMemo(()=>n?isQuizFIB(i)?[quiz_pb.QuizOptionConfig.QUIZ_OPTION_CONFIG_CASE_SENSITIVE,quiz_pb.QuizOptionConfig.QUIZ_OPTION_CONFIG_PARTIAL_CREDIT]:[quiz_pb.QuizOptionConfig.QUIZ_OPTION_CONFIG_PARTIAL_CREDIT]:[],[n,i]);return{hasSetting:n,settings:e}};function useQuizUpdate(){const i=useDispatch(),n=react.exports.useCallback(f=>{i(QuizActions.sendOrcRequest(f))},[i]),e=react.exports.useCallback(()=>{i(QuizActions.setPdfUrl({url:null}))},[i]),t=react.exports.useCallback(f=>{i(QuizActions.changeEditorState(f))},[i]),a=react.exports.useCallback(f=>{t({optionType:FieldTypes.QUESTION,newEditorState:f})},[t]),o=react.exports.useCallback(f=>{t({optionType:FieldTypes.EXPLANATION,newEditorState:f})},[t]),u=react.exports.useCallback((f,d)=>{t({answerId:f,newEditorState:d,optionType:FieldTypes.ANSWER})},[t]),l=react.exports.useCallback((f,d=!0)=>{i(QuizActions.changeCorrectAnswer(f,d))},[i]),h=react.exports.useCallback(f=>{i(QuizActions.deleteAnswer(f))},[i]),S=react.exports.useCallback(f=>{i(QuizActions.deleteGroupAnswer(f))},[i]),w=react.exports.useCallback((f={})=>{i(QuizActions.requestAddNewAnswer(f))},[i]),x=react.exports.useCallback(f=>{i(QuizActions.changeQuestionOption(f))},[i]),N=react.exports.useCallback(f=>{i(QuizActions.changeLabelType(f))},[i]),T=react.exports.useCallback(f=>{i(QuizActions.changeAnswerConfigs(f))},[i]),R=react.exports.useCallback(()=>{i(QuizActions.setQuizOnReview(null))},[i]),P=react.exports.useCallback(f=>{i(QuizActions.addNewQuiz(f))},[i]),A=react.exports.useCallback(()=>{i(QuizActions.clearCurrentQuiz())},[i]),D=react.exports.useCallback(f=>{i(QuizActions.changeQuiz(f))},[i]),k=react.exports.useCallback(()=>{i(QuizActions.clearState())},[i]),z=react.exports.useCallback((f,d)=>{i(QuizActions.changeAnswerLabel(f,d))},[i]),v=react.exports.useCallback(f=>{i(QuizActions.changeQuizType(f))},[i]);return{onRequestOCR:n,onRemoveMaterial:e,onAddNewAnswer:w,onAddNewQuiz:P,onChangeAnswer:u,onChangeAnswerConfigs:T,onChangeCorrectAnswer:l,onChangeExplanation:o,onChangeLabelType:N,onChangeQuestionOptions:x,onDeleteAnswer:h,onDeleteGroupAnswer:S,onChangeQuestion:a,onCloseReview:R,onClearAllQuiz:A,onChangeQuiz:D,onClearState:k,onChangeAnswerLabel:z,onChangeQuizType:v}}const QuizBuilder=({currentQuiz:i,externalIdProps:n})=>{const e=useResourceTranslate(Entities.QUIZZES),{questionInstruction:t,answerInstruction:a,explanationInstruction:o}=useQuizInstructionText({kind:i==null?void 0:i.kind}),{hasSetting:u,settings:l}=useQuizAnswerSetting({kind:(i==null?void 0:i.kind)||quiz_pb.QuizType.QUIZ_TYPE_MCQ}),{onAddNewAnswer:h,onDeleteAnswer:S,onDeleteGroupAnswer:w,onChangeAnswer:x,onChangeQuestion:N,onChangeQuizType:T,onChangeLabelType:R,onChangeAnswerLabel:P,onChangeExplanation:A,onChangeCorrectAnswer:D,onChangeAnswerConfigs:k,onChangeQuestionOptions:z}=useQuizUpdate();return i?React.createElement(SpacingGroup,{spacing:"0rem",direction:"vertical"},React.createElement("div",null,React.createElement(QuizOptions$1,{questionType:i.kind,taggedLOs:i.taggedLOs,externalId:i.externalId,difficultyLevel:i.difficultyLevel,externalIdProps:n,onChangeQuizType:T,onChange:z})),React.createElement("div",{"data-js":QuizSelectors.question},React.createElement(QuizItemLayout,{visibleDivider:!1,primaryTitle:i.kind!==quiz_pb.QuizType.QUIZ_TYPE_FIB&&React.createElement(React.Fragment,null,t.primary&&e(t.primary)),secondaryTitle:React.createElement(React.Fragment,null,t.secondary&&e(t.secondary),"\xA0",t.subRequired&&React.createElement(Asterisk,null))},React.createElement(QuizQuestion$1,{kind:i.kind,onChange:N}))),i.kind!==quiz_pb.QuizType.QUIZ_TYPE_MIQ?React.createElement(QuizItemLayout,{visibleDivider:!0,primaryTitle:React.createElement(React.Fragment,null,a.primary&&React.createElement(React.Fragment,null,e(a.primary),"\xA0",a.required&&React.createElement(Asterisk,null))),secondaryTitle:React.createElement(React.Fragment,null,a.secondary&&React.createElement(React.Fragment,null,e(a.secondary),"\xA0",a.subRequired&&React.createElement(Asterisk,null)))},React.createElement("div",{"data-js":QuizSelectors.answers},React.createElement(QuizAnswer$1,{answer:i.answer,quizType:i.kind,onAddNewAnswer:h,onDeleteAnswer:S,onChangeAnswer:x,onChangeLabel:P,onChangeLabelType:R,onChangeCorrect:D,onDeleteGroupAnswer:w}))):null,u&&React.createElement("div",{"data-js":QuizSelectors.settings},React.createElement(QuizAnswerSetting,{settings:l,settingValues:i.answer.configs,onChangeAnswerConfigs:k})),shouldVisibleExplanation(i.kind)&&React.createElement(QuizItemLayout,{visibleDivider:!0,primaryTitle:React.createElement(React.Fragment,null,o.primary&&React.createElement(React.Fragment,null,e(o.primary),"\xA0",o.required&&React.createElement(Asterisk,null))),secondaryTitle:React.createElement(React.Fragment,null,o.secondary&&React.createElement(React.Fragment,null,e(o.secondary),"\xA0",o.subRequired&&React.createElement(Asterisk,null)))},React.createElement("div",{"data-js":QuizSelectors.explanation},React.createElement(QuizEditor,{toolbar:allToolbar,editorState:i.explanation.content,onChange:A,"data-js":"Quiz__explanation",placeholder:e("explanation")})))):null},sx$6={actionWrapper:{width:"100%",display:"flex",justifyContent:"flex-end"},previewBtn:i=>{var n,e,t;return{backgroundColor:(n=i.palette.blue)==null?void 0:n[500],"&:hover":{backgroundColor:(e=i.palette.blue)==null?void 0:e[500]},"&:focus":{backgroundColor:(t=i.palette.blue)==null?void 0:t[500]}}}},QuizMain=i=>{const{dispatch:n,className:e,externalIdProps:t}=i,a=useResourceTranslate(Entities.QUIZZES),{actionPanel:o}=useTextEntity,u=useSelector(currentQuizSelector);return React.createElement(BaseBox,null,React.createElement(Paper,{className:e,elevation:0},React.createElement(Box,{sx:o,mb:3},React.createElement(SpacingGroup,{direction:"horizontal",sx:sx$6.actionWrapper},React.createElement(ButtonPrimaryContained,{"data-testid":"QuizTable__previewButton",startIcon:React.createElement(default_1$3,null),sx:sx$6.previewBtn,onClick:()=>{n(QuizActions.setQuizOnReview(u))}},a("preview")))),React.createElement(QuizBuilder,{currentQuiz:u,externalIdProps:t})))},LanguageSelect=createSelectFromEnum(LanguageEnums,ct(rt({},defaultSelectOptions),{createTranslatorKey:i=>`resources.choices.languages.${i}`,label:"ra.common.language"}));var pdf={exports:{}};(function(module,exports){(function(n,e){module.exports=e()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(i,n,e)=>{function t(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(c){return typeof c}:t=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},t(M)}Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.LinkTarget=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=void 0,n.addLinkAttributes=Y,n.deprecated=be,n.getFilenameFromUrl=E,n.getPdfFilenameFromUrl=L,n.getXfaPageViewport=G,n.isDataScheme=F,n.isPdfFile=m,n.isValidFetchUrl=re,n.loadScript=q;var a=l(e(2)),o=e(4),u=e(135);function l(M){return M&&M.__esModule?M:{default:M}}function h(M,g){var c=typeof Symbol!="undefined"&&M[Symbol.iterator]||M["@@iterator"];if(!c){if(Array.isArray(M)||(c=S(M))||g&&M&&typeof M.length=="number"){c&&(M=c);var _=0,B=function(){};return{s:B,n:function(){return _>=M.length?{done:!0}:{done:!1,value:M[_++]}},e:function(ge){throw ge},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var U=!0,ee=!1,ue;return{s:function(){c=c.call(M)},n:function(){var ge=c.next();return U=ge.done,ge},e:function(ge){ee=!0,ue=ge},f:function(){try{!U&&c.return!=null&&c.return()}finally{if(ee)throw ue}}}}function S(M,g){if(!!M){if(typeof M=="string")return w(M,g);var c=Object.prototype.toString.call(M).slice(8,-1);if(c==="Object"&&M.constructor&&(c=M.constructor.name),c==="Map"||c==="Set")return Array.from(M);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return w(M,g)}}function w(M,g){(g==null||g>M.length)&&(g=M.length);for(var c=0,_=new Array(g);c<g;c++)_[c]=M[c];return _}function x(M,g,c,_,B,U,ee){try{var ue=M[U](ee),pe=ue.value}catch(ge){c(ge);return}ue.done?g(pe):Promise.resolve(pe).then(_,B)}function N(M){return function(){var g=this,c=arguments;return new Promise(function(_,B){var U=M.apply(g,c);function ee(pe){x(U,_,B,ee,ue,"next",pe)}function ue(pe){x(U,_,B,ee,ue,"throw",pe)}ee(void 0)})}}function T(M,g){if(!(M instanceof g))throw new TypeError("Cannot call a class as a function")}function R(M,g){for(var c=0;c<g.length;c++){var _=g[c];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}function P(M,g,c){return g&&R(M.prototype,g),c&&R(M,c),M}function A(M,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(g&&g.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),g&&D(M,g)}function D(M,g){return D=Object.setPrototypeOf||function(_,B){return _.__proto__=B,_},D(M,g)}function k(M){var g=f();return function(){var _=d(M),B;if(g){var U=d(this).constructor;B=Reflect.construct(_,arguments,U)}else B=_.apply(this,arguments);return z(this,B)}}function z(M,g){if(g&&(t(g)==="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(M)}function v(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function f(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(M){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},d(M)}var b="noopener noreferrer nofollow",y="http://www.w3.org/2000/svg",p={CSS:96,PDF:72,get PDF_TO_CSS_UNITS(){return(0,o.shadow)(this,"PDF_TO_CSS_UNITS",this.CSS/this.PDF)}};n.PixelsPerInch=p;var C=function(M){A(c,M);var g=k(c);function c(){var _,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=B.ownerDocument,ee=U===void 0?globalThis.document:U;return T(this,c),_=g.call(this),_._document=ee,_}return P(c,[{key:"_createCanvas",value:function(B,U){var ee=this._document.createElement("canvas");return ee.width=B,ee.height=U,ee}}]),c}(u.BaseCanvasFactory);n.DOMCanvasFactory=C;function I(M){return j.apply(this,arguments)}function j(){return j=N(a.default.mark(function M(g){var c,_,B=arguments;return a.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(c=B.length>1&&B[1]!==void 0?B[1]:!1,!re(g,document.baseURI)){ee.next=21;break}return ee.next=4,fetch(g);case 4:if(_=ee.sent,_.ok){ee.next=7;break}throw new Error(_.statusText);case 7:if(!c){ee.next=15;break}return ee.t1=Uint8Array,ee.next=11,_.arrayBuffer();case 11:ee.t2=ee.sent,ee.t0=new ee.t1(ee.t2),ee.next=20;break;case 15:return ee.t3=o.stringToBytes,ee.next=18,_.text();case 18:ee.t4=ee.sent,ee.t0=(0,ee.t3)(ee.t4);case 20:return ee.abrupt("return",ee.t0);case 21:return ee.abrupt("return",new Promise(function(ue,pe){var ge=new XMLHttpRequest;ge.open("GET",g,!0),c&&(ge.responseType="arraybuffer"),ge.onreadystatechange=function(){if(ge.readyState===XMLHttpRequest.DONE){if(ge.status===200||ge.status===0){var ve;if(c&&ge.response?ve=new Uint8Array(ge.response):!c&&ge.responseText&&(ve=(0,o.stringToBytes)(ge.responseText)),ve){ue(ve);return}}pe(new Error(ge.statusText))}},ge.send(null)}));case 22:case"end":return ee.stop()}},M)})),j.apply(this,arguments)}var W=function(M){A(c,M);var g=k(c);function c(){return T(this,c),g.apply(this,arguments)}return P(c,[{key:"_fetchData",value:function(B,U){return I(B,this.isCompressed).then(function(ee){return{cMapData:ee,compressionType:U}})}}]),c}(u.BaseCMapReaderFactory);n.DOMCMapReaderFactory=W;var H=function(M){A(c,M);var g=k(c);function c(){return T(this,c),g.apply(this,arguments)}return P(c,[{key:"_fetchData",value:function(B){return I(B,!0)}}]),c}(u.BaseStandardFontDataFactory);n.DOMStandardFontDataFactory=H;var Q=function(M){A(c,M);var g=k(c);function c(){return T(this,c),g.apply(this,arguments)}return P(c,[{key:"_createSVG",value:function(B){return document.createElementNS(y,B)}}]),c}(u.BaseSVGFactory);n.DOMSVGFactory=Q;var K=function(){function M(g){var c=g.viewBox,_=g.scale,B=g.rotation,U=g.offsetX,ee=U===void 0?0:U,ue=g.offsetY,pe=ue===void 0?0:ue,ge=g.dontFlip,ve=ge===void 0?!1:ge;T(this,M),this.viewBox=c,this.scale=_,this.rotation=B,this.offsetX=ee,this.offsetY=pe;var _e=(c[2]+c[0])/2,Re=(c[3]+c[1])/2,we,Ie,Fe,We;switch(B%=360,B<0&&(B+=360),B){case 180:we=-1,Ie=0,Fe=0,We=1;break;case 90:we=0,Ie=1,Fe=1,We=0;break;case 270:we=0,Ie=-1,Fe=-1,We=0;break;case 0:we=1,Ie=0,Fe=0,We=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ve&&(Fe=-Fe,We=-We);var Ue,fe,de,$;we===0?(Ue=Math.abs(Re-c[1])*_+ee,fe=Math.abs(_e-c[0])*_+pe,de=Math.abs(c[3]-c[1])*_,$=Math.abs(c[2]-c[0])*_):(Ue=Math.abs(_e-c[0])*_+ee,fe=Math.abs(Re-c[1])*_+pe,de=Math.abs(c[2]-c[0])*_,$=Math.abs(c[3]-c[1])*_),this.transform=[we*_,Ie*_,Fe*_,We*_,Ue-we*_*_e-Fe*_*Re,fe-Ie*_*_e-We*_*Re],this.width=de,this.height=$}return P(M,[{key:"clone",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=c.scale,B=_===void 0?this.scale:_,U=c.rotation,ee=U===void 0?this.rotation:U,ue=c.offsetX,pe=ue===void 0?this.offsetX:ue,ge=c.offsetY,ve=ge===void 0?this.offsetY:ge,_e=c.dontFlip,Re=_e===void 0?!1:_e;return new M({viewBox:this.viewBox.slice(),scale:B,rotation:ee,offsetX:pe,offsetY:ve,dontFlip:Re})}},{key:"convertToViewportPoint",value:function(c,_){return o.Util.applyTransform([c,_],this.transform)}},{key:"convertToViewportRectangle",value:function(c){var _=o.Util.applyTransform([c[0],c[1]],this.transform),B=o.Util.applyTransform([c[2],c[3]],this.transform);return[_[0],_[1],B[0],B[1]]}},{key:"convertToPdfPoint",value:function(c,_){return o.Util.applyInverseTransform([c,_],this.transform)}}]),M}();n.PageViewport=K;var ie=function(M){A(c,M);var g=k(c);function c(_,B){var U;return T(this,c),U=g.call(this,_,"RenderingCancelledException"),U.type=B,U}return c}(o.BaseException);n.RenderingCancelledException=ie;var V={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};n.LinkTarget=V;function Y(M){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=g.url,_=g.target,B=g.rel,U=g.enabled,ee=U===void 0?!0:U;(0,o.assert)(c&&typeof c=="string",'addLinkAttributes: A valid "url" parameter must provided.');var ue=(0,o.removeNullCharacters)(c);ee?M.href=M.title=ue:(M.href="",M.title="Disabled: ".concat(ue),M.onclick=function(){return!1});var pe="";switch(_){case V.NONE:break;case V.SELF:pe="_self";break;case V.BLANK:pe="_blank";break;case V.PARENT:pe="_parent";break;case V.TOP:pe="_top";break}M.target=pe,M.rel=typeof B=="string"?B:b}function F(M){for(var g=M.length,c=0;c<g&&M[c].trim()==="";)c++;return M.substring(c,c+5).toLowerCase()==="data:"}function m(M){return typeof M=="string"&&/\.pdf$/i.test(M)}function E(M){var g=M.indexOf("#"),c=M.indexOf("?"),_=Math.min(g>0?g:M.length,c>0?c:M.length);return M.substring(M.lastIndexOf("/",_)+1,_)}function L(M){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof M!="string")return g;if(F(M))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;var c=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,_=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,B=c.exec(M),U=_.exec(B[1])||_.exec(B[2])||_.exec(B[3]);if(U&&(U=U[0],U.includes("%")))try{U=_.exec(decodeURIComponent(U))[0]}catch{}return U||g}var X=function(){function M(){T(this,M),this.started=Object.create(null),this.times=[]}return P(M,[{key:"time",value:function(c){c in this.started&&(0,o.warn)("Timer is already running for ".concat(c)),this.started[c]=Date.now()}},{key:"timeEnd",value:function(c){c in this.started||(0,o.warn)("Timer has not been started for ".concat(c)),this.times.push({name:c,start:this.started[c],end:Date.now()}),delete this.started[c]}},{key:"toString",value:function(){var c=[],_=0,B=h(this.times),U;try{for(B.s();!(U=B.n()).done;){var ee=U.value,ue=ee.name;ue.length>_&&(_=ue.length)}}catch(Re){B.e(Re)}finally{B.f()}var pe=h(this.times),ge;try{for(pe.s();!(ge=pe.n()).done;){var ve=ge.value,_e=ve.end-ve.start;c.push("".concat(ve.name.padEnd(_)," ").concat(_e,`ms
`))}}catch(Re){pe.e(Re)}finally{pe.f()}return c.join("")}}]),M}();n.StatTimer=X;function re(M,g){try{var c=g?new URL(M,g):new URL(M),_=c.protocol;return _==="http:"||_==="https:"}catch{return!1}}function q(M){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise(function(c,_){var B=document.createElement("script");B.src=M,B.onload=function(U){g&&B.remove(),c(U)},B.onerror=function(){_(new Error("Cannot load script at: ".concat(B.src)))},(document.head||document.documentElement).appendChild(B)})}function be(M){console.log("Deprecated API usage: "+M)}var Ce,Ee=function(){function M(){T(this,M)}return P(M,null,[{key:"toDateObject",value:function(c){if(!c||!(0,o.isString)(c))return null;Ce||(Ce=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var _=Ce.exec(c);if(!_)return null;var B=parseInt(_[1],10),U=parseInt(_[2],10);U=U>=1&&U<=12?U-1:0;var ee=parseInt(_[3],10);ee=ee>=1&&ee<=31?ee:1;var ue=parseInt(_[4],10);ue=ue>=0&&ue<=23?ue:0;var pe=parseInt(_[5],10);pe=pe>=0&&pe<=59?pe:0;var ge=parseInt(_[6],10);ge=ge>=0&&ge<=59?ge:0;var ve=_[7]||"Z",_e=parseInt(_[8],10);_e=_e>=0&&_e<=23?_e:0;var Re=parseInt(_[9],10)||0;return Re=Re>=0&&Re<=59?Re:0,ve==="-"?(ue+=_e,pe+=Re):ve==="+"&&(ue-=_e,pe-=Re),new Date(Date.UTC(B,U,ee,ue,pe,ge))}}]),M}();n.PDFDateString=Ee;function G(M,g){var c=g.scale,_=c===void 0?1:c,B=g.rotation,U=B===void 0?0:B,ee=M.attributes.style,ue=ee.width,pe=ee.height,ge=[0,0,parseInt(ue),parseInt(pe)];return new K({viewBox:ge,scale:_,rotation:U})}},(i,n,e)=>{i.exports=e(3)},(i,n,e)=>{i=e.nmd(i);function t(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(l){return typeof l}:t=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(o)}var a=function(o){var u=Object.prototype,l=u.hasOwnProperty,h,S=typeof Symbol=="function"?Symbol:{},w=S.iterator||"@@iterator",x=S.asyncIterator||"@@asyncIterator",N=S.toStringTag||"@@toStringTag";function T(m,E,L){return Object.defineProperty(m,E,{value:L,enumerable:!0,configurable:!0,writable:!0}),m[E]}try{T({},"")}catch{T=function(L,X,re){return L[X]=re}}function R(m,E,L,X){var re=E&&E.prototype instanceof f?E:f,q=Object.create(re.prototype),be=new V(X||[]);return q._invoke=H(m,L,be),q}o.wrap=R;function P(m,E,L){try{return{type:"normal",arg:m.call(E,L)}}catch(X){return{type:"throw",arg:X}}}var A="suspendedStart",D="suspendedYield",k="executing",z="completed",v={};function f(){}function d(){}function b(){}var y={};T(y,w,function(){return this});var p=Object.getPrototypeOf,C=p&&p(p(Y([])));C&&C!==u&&l.call(C,w)&&(y=C);var I=b.prototype=f.prototype=Object.create(y);d.prototype=b,T(I,"constructor",b),T(b,"constructor",d),d.displayName=T(b,N,"GeneratorFunction");function j(m){["next","throw","return"].forEach(function(E){T(m,E,function(L){return this._invoke(E,L)})})}o.isGeneratorFunction=function(m){var E=typeof m=="function"&&m.constructor;return E?E===d||(E.displayName||E.name)==="GeneratorFunction":!1},o.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,b):(m.__proto__=b,T(m,N,"GeneratorFunction")),m.prototype=Object.create(I),m},o.awrap=function(m){return{__await:m}};function W(m,E){function L(q,be,Ce,Ee){var G=P(m[q],m,be);if(G.type==="throw")Ee(G.arg);else{var M=G.arg,g=M.value;return g&&t(g)==="object"&&l.call(g,"__await")?E.resolve(g.__await).then(function(c){L("next",c,Ce,Ee)},function(c){L("throw",c,Ce,Ee)}):E.resolve(g).then(function(c){M.value=c,Ce(M)},function(c){return L("throw",c,Ce,Ee)})}}var X;function re(q,be){function Ce(){return new E(function(Ee,G){L(q,be,Ee,G)})}return X=X?X.then(Ce,Ce):Ce()}this._invoke=re}j(W.prototype),T(W.prototype,x,function(){return this}),o.AsyncIterator=W,o.async=function(m,E,L,X,re){re===void 0&&(re=Promise);var q=new W(R(m,E,L,X),re);return o.isGeneratorFunction(E)?q:q.next().then(function(be){return be.done?be.value:q.next()})};function H(m,E,L){var X=A;return function(q,be){if(X===k)throw new Error("Generator is already running");if(X===z){if(q==="throw")throw be;return F()}for(L.method=q,L.arg=be;;){var Ce=L.delegate;if(Ce){var Ee=Q(Ce,L);if(Ee){if(Ee===v)continue;return Ee}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(X===A)throw X=z,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);X=k;var G=P(m,E,L);if(G.type==="normal"){if(X=L.done?z:D,G.arg===v)continue;return{value:G.arg,done:L.done}}else G.type==="throw"&&(X=z,L.method="throw",L.arg=G.arg)}}}function Q(m,E){var L=m.iterator[E.method];if(L===h){if(E.delegate=null,E.method==="throw"){if(m.iterator.return&&(E.method="return",E.arg=h,Q(m,E),E.method==="throw"))return v;E.method="throw",E.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var X=P(L,m.iterator,E.arg);if(X.type==="throw")return E.method="throw",E.arg=X.arg,E.delegate=null,v;var re=X.arg;if(!re)return E.method="throw",E.arg=new TypeError("iterator result is not an object"),E.delegate=null,v;if(re.done)E[m.resultName]=re.value,E.next=m.nextLoc,E.method!=="return"&&(E.method="next",E.arg=h);else return re;return E.delegate=null,v}j(I),T(I,N,"Generator"),T(I,w,function(){return this}),T(I,"toString",function(){return"[object Generator]"});function K(m){var E={tryLoc:m[0]};1 in m&&(E.catchLoc=m[1]),2 in m&&(E.finallyLoc=m[2],E.afterLoc=m[3]),this.tryEntries.push(E)}function ie(m){var E=m.completion||{};E.type="normal",delete E.arg,m.completion=E}function V(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(K,this),this.reset(!0)}o.keys=function(m){var E=[];for(var L in m)E.push(L);return E.reverse(),function X(){for(;E.length;){var re=E.pop();if(re in m)return X.value=re,X.done=!1,X}return X.done=!0,X}};function Y(m){if(m){var E=m[w];if(E)return E.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var L=-1,X=function re(){for(;++L<m.length;)if(l.call(m,L))return re.value=m[L],re.done=!1,re;return re.value=h,re.done=!0,re};return X.next=X}}return{next:F}}o.values=Y;function F(){return{value:h,done:!0}}return V.prototype={constructor:V,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(ie),!E)for(var L in this)L.charAt(0)==="t"&&l.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=h)},stop:function(){this.done=!0;var E=this.tryEntries[0],L=E.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var L=this;function X(G,M){return be.type="throw",be.arg=E,L.next=G,M&&(L.method="next",L.arg=h),!!M}for(var re=this.tryEntries.length-1;re>=0;--re){var q=this.tryEntries[re],be=q.completion;if(q.tryLoc==="root")return X("end");if(q.tryLoc<=this.prev){var Ce=l.call(q,"catchLoc"),Ee=l.call(q,"finallyLoc");if(Ce&&Ee){if(this.prev<q.catchLoc)return X(q.catchLoc,!0);if(this.prev<q.finallyLoc)return X(q.finallyLoc)}else if(Ce){if(this.prev<q.catchLoc)return X(q.catchLoc,!0)}else if(Ee){if(this.prev<q.finallyLoc)return X(q.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(E,L){for(var X=this.tryEntries.length-1;X>=0;--X){var re=this.tryEntries[X];if(re.tryLoc<=this.prev&&l.call(re,"finallyLoc")&&this.prev<re.finallyLoc){var q=re;break}}q&&(E==="break"||E==="continue")&&q.tryLoc<=L&&L<=q.finallyLoc&&(q=null);var be=q?q.completion:{};return be.type=E,be.arg=L,q?(this.method="next",this.next=q.finallyLoc,v):this.complete(be)},complete:function(E,L){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&L&&(this.next=L),v},finish:function(E){for(var L=this.tryEntries.length-1;L>=0;--L){var X=this.tryEntries[L];if(X.finallyLoc===E)return this.complete(X.completion,X.afterLoc),ie(X),v}},catch:function(E){for(var L=this.tryEntries.length-1;L>=0;--L){var X=this.tryEntries[L];if(X.tryLoc===E){var re=X.completion;if(re.type==="throw"){var q=re.arg;ie(X)}return q}}throw new Error("illegal catch attempt")},delegateYield:function(E,L,X){return this.delegate={iterator:Y(E),resultName:L,nextLoc:X},this.method==="next"&&(this.arg=h),v}},o}(t(i)==="object"?i.exports:{});try{regeneratorRuntime=a}catch{(typeof globalThis=="undefined"?"undefined":t(globalThis))==="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.UNSUPPORTED_FEATURES=n.TextRenderingMode=n.StreamType=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.IsLittleEndianCached=n.IsEvalSupportedCached=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FontType=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.arrayByteLength=ce,n.arraysToBytes=Se,n.assert=ge,n.bytesToString=J,n.createObjectURL=Ot,n.createPromiseCapability=Rt,n.createValidAbsoluteUrl=Re,n.escapeString=Ze,n.getModificationDate=Kt,n.getVerbosityLevel=U,n.info=ee,n.isArrayBuffer=Mt,n.isArrayEqual=Lt,n.isAscii=nt,n.isBool=xt,n.isNum=Xt,n.isSameOrigin=ve,n.isString=Ft,n.objectFromMap=De,n.objectSize=Le,n.removeNullCharacters=ne,n.setVerbosityLevel=B,n.shadow=we,n.string32=ke,n.stringToBytes=he,n.stringToPDFString=qe,n.stringToUTF16BEString=ot,n.stringToUTF8String=bt,n.unreachable=pe,n.utf8StringToString=vt,n.warn=ue,e(5);function t(le,Te){for(var se=0;se<Te.length;se++){var me=Te[se];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(le,me.key,me)}}function a(le,Te,se){return Te&&t(le.prototype,Te),se&&t(le,se),le}function o(le){return h(le)||l(le)||R(le)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(le){if(typeof Symbol!="undefined"&&le[Symbol.iterator]!=null||le["@@iterator"]!=null)return Array.from(le)}function h(le){if(Array.isArray(le))return P(le)}function S(le,Te){return N(le)||x(le,Te)||R(le,Te)||w()}function w(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(le,Te){var se=le==null?null:typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(se!=null){var me=[],ze=!0,je=!1,He,Ye;try{for(se=se.call(le);!(ze=(He=se.next()).done)&&(me.push(He.value),!(Te&&me.length===Te));ze=!0);}catch(at){je=!0,Ye=at}finally{try{!ze&&se.return!=null&&se.return()}finally{if(je)throw Ye}}return me}}function N(le){if(Array.isArray(le))return le}function T(le,Te){var se=typeof Symbol!="undefined"&&le[Symbol.iterator]||le["@@iterator"];if(!se){if(Array.isArray(le)||(se=R(le))||Te&&le&&typeof le.length=="number"){se&&(le=se);var me=0,ze=function(){};return{s:ze,n:function(){return me>=le.length?{done:!0}:{done:!1,value:le[me++]}},e:function(st){throw st},f:ze}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var je=!0,He=!1,Ye;return{s:function(){se=se.call(le)},n:function(){var st=se.next();return je=st.done,st},e:function(st){He=!0,Ye=st},f:function(){try{!je&&se.return!=null&&se.return()}finally{if(He)throw Ye}}}}function R(le,Te){if(!!le){if(typeof le=="string")return P(le,Te);var se=Object.prototype.toString.call(le).slice(8,-1);if(se==="Object"&&le.constructor&&(se=le.constructor.name),se==="Map"||se==="Set")return Array.from(le);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return P(le,Te)}}function P(le,Te){(Te==null||Te>le.length)&&(Te=le.length);for(var se=0,me=new Array(Te);se<Te;se++)me[se]=le[se];return me}function A(le){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(se){return typeof se}:A=function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},A(le)}function D(le,Te){if(!(le instanceof Te))throw new TypeError("Cannot call a class as a function")}function k(le,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(Te&&Te.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),Te&&z(le,Te)}function z(le,Te){return z=Object.setPrototypeOf||function(me,ze){return me.__proto__=ze,me},z(le,Te)}function v(le){var Te=b();return function(){var me=y(le),ze;if(Te){var je=y(this).constructor;ze=Reflect.construct(me,arguments,je)}else ze=me.apply(this,arguments);return f(this,ze)}}function f(le,Te){if(Te&&(A(Te)==="object"||typeof Te=="function"))return Te;if(Te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(le)}function d(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(le){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(se){return se.__proto__||Object.getPrototypeOf(se)},y(le)}var p=[1,0,0,1,0,0];n.IDENTITY_MATRIX=p;var C=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=C;var I={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=I;var j={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=j;var W={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=W;var H={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=H;var Q={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=Q;var K={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=K;var ie={MARKED:"Marked",REVIEW:"Review"};n.AnnotationStateModelType=ie;var V={MARKED:"Marked",UNMARKED:"Unmarked"};n.AnnotationMarkedState=V;var Y={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};n.AnnotationReviewState=Y;var F={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=F;var m={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=m;var E={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=E;var L={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=L;var X={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=X;var re={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=re;var q={O:"PageOpen",C:"PageClose"};n.PageActionEventType=q;var be={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};n.StreamType=be;var Ce={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};n.FontType=Ce;var Ee={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=Ee;var G={NONE:0,BINARY:1,STREAM:2};n.CMapCompressionType=G;var M={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=M;var g={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};n.UNSUPPORTED_FEATURES=g;var c={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=c;var _=Ee.WARNINGS;function B(le){Number.isInteger(le)&&(_=le)}function U(){return _}function ee(le){_>=Ee.INFOS&&console.log("Info: ".concat(le))}function ue(le){_>=Ee.WARNINGS&&console.log("Warning: ".concat(le))}function pe(le){throw new Error(le)}function ge(le,Te){le||pe(Te)}function ve(le,Te){var se;try{if(se=new URL(le),!se.origin||se.origin==="null")return!1}catch{return!1}var me=new URL(Te,se);return se.origin===me.origin}function _e(le){if(!le)return!1;switch(le.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Re(le){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!le)return null;try{if(se&&typeof le=="string"){if(se.addDefaultProtocol&&le.startsWith("www.")){var me=le.match(/\./g);me&&me.length>=2&&(le="http://".concat(le))}if(se.tryConvertEncoding)try{le=bt(le)}catch{}}var ze=Te?new URL(le,Te):new URL(le);if(_e(ze))return ze}catch{}return null}function we(le,Te,se){return Object.defineProperty(le,Te,{value:se,enumerable:!0,configurable:!0,writable:!1}),se}var Ie=function(){function Te(se,me){this.constructor===Te&&pe("Cannot initialize BaseException."),this.message=se,this.name=me}return Te.prototype=new Error,Te.constructor=Te,Te}();n.BaseException=Ie;var Fe=function(le){k(se,le);var Te=v(se);function se(me,ze){var je;return D(this,se),je=Te.call(this,me,"PasswordException"),je.code=ze,je}return se}(Ie);n.PasswordException=Fe;var We=function(le){k(se,le);var Te=v(se);function se(me,ze){var je;return D(this,se),je=Te.call(this,me,"UnknownErrorException"),je.details=ze,je}return se}(Ie);n.UnknownErrorException=We;var Ue=function(le){k(se,le);var Te=v(se);function se(me){return D(this,se),Te.call(this,me,"InvalidPDFException")}return se}(Ie);n.InvalidPDFException=Ue;var fe=function(le){k(se,le);var Te=v(se);function se(me){return D(this,se),Te.call(this,me,"MissingPDFException")}return se}(Ie);n.MissingPDFException=fe;var de=function(le){k(se,le);var Te=v(se);function se(me,ze){var je;return D(this,se),je=Te.call(this,me,"UnexpectedResponseException"),je.status=ze,je}return se}(Ie);n.UnexpectedResponseException=de;var $=function(le){k(se,le);var Te=v(se);function se(me){return D(this,se),Te.call(this,me,"FormatError")}return se}(Ie);n.FormatError=$;var te=function(le){k(se,le);var Te=v(se);function se(me){return D(this,se),Te.call(this,me,"AbortException")}return se}(Ie);n.AbortException=te;var Z=/\x00+/g,oe=/[\x01-\x1F]/g;function ne(le){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof le!="string"?(ue("The argument for removeNullCharacters must be a string."),le):(Te&&(le=le.replace(oe," ")),le.replace(Z,""))}function J(le){ge(le!==null&&A(le)==="object"&&le.length!==void 0,"Invalid argument for bytesToString");var Te=le.length,se=8192;if(Te<se)return String.fromCharCode.apply(null,le);for(var me=[],ze=0;ze<Te;ze+=se){var je=Math.min(ze+se,Te),He=le.subarray(ze,je);me.push(String.fromCharCode.apply(null,He))}return me.join("")}function he(le){ge(typeof le=="string","Invalid argument for stringToBytes");for(var Te=le.length,se=new Uint8Array(Te),me=0;me<Te;++me)se[me]=le.charCodeAt(me)&255;return se}function ce(le){return le.length!==void 0?le.length:(ge(le.byteLength!==void 0,"arrayByteLength - invalid argument."),le.byteLength)}function Se(le){var Te=le.length;if(Te===1&&le[0]instanceof Uint8Array)return le[0];for(var se=0,me=0;me<Te;me++)se+=ce(le[me]);for(var ze=0,je=new Uint8Array(se),He=0;He<Te;He++){var Ye=le[He];Ye instanceof Uint8Array||(typeof Ye=="string"?Ye=he(Ye):Ye=new Uint8Array(Ye));var at=Ye.byteLength;je.set(Ye,ze),ze+=at}return je}function ke(le){return String.fromCharCode(le>>24&255,le>>16&255,le>>8&255,le&255)}function Le(le){return Object.keys(le).length}function De(le){var Te=Object.create(null),se=T(le),me;try{for(se.s();!(me=se.n()).done;){var ze=S(me.value,2),je=ze[0],He=ze[1];Te[je]=He}}catch(Ye){se.e(Ye)}finally{se.f()}return Te}function Ae(){var le=new Uint8Array(4);le[0]=1;var Te=new Uint32Array(le.buffer,0,1);return Te[0]===1}var $e={get value(){return we(this,"value",Ae())}};n.IsLittleEndianCached=$e;function xe(){try{return new Function(""),!0}catch{return!1}}var Oe={get value(){return we(this,"value",xe())}};n.IsEvalSupportedCached=Oe;var Be=o(Array(256).keys()).map(function(le){return le.toString(16).padStart(2,"0")}),Ne=function(){function le(){D(this,le)}return a(le,null,[{key:"makeHexColor",value:function(se,me,ze){return"#".concat(Be[se]).concat(Be[me]).concat(Be[ze])}},{key:"transform",value:function(se,me){return[se[0]*me[0]+se[2]*me[1],se[1]*me[0]+se[3]*me[1],se[0]*me[2]+se[2]*me[3],se[1]*me[2]+se[3]*me[3],se[0]*me[4]+se[2]*me[5]+se[4],se[1]*me[4]+se[3]*me[5]+se[5]]}},{key:"applyTransform",value:function(se,me){var ze=se[0]*me[0]+se[1]*me[2]+me[4],je=se[0]*me[1]+se[1]*me[3]+me[5];return[ze,je]}},{key:"applyInverseTransform",value:function(se,me){var ze=me[0]*me[3]-me[1]*me[2],je=(se[0]*me[3]-se[1]*me[2]+me[2]*me[5]-me[4]*me[3])/ze,He=(-se[0]*me[1]+se[1]*me[0]+me[4]*me[1]-me[5]*me[0])/ze;return[je,He]}},{key:"getAxialAlignedBoundingBox",value:function(se,me){var ze=le.applyTransform(se,me),je=le.applyTransform(se.slice(2,4),me),He=le.applyTransform([se[0],se[3]],me),Ye=le.applyTransform([se[2],se[1]],me);return[Math.min(ze[0],je[0],He[0],Ye[0]),Math.min(ze[1],je[1],He[1],Ye[1]),Math.max(ze[0],je[0],He[0],Ye[0]),Math.max(ze[1],je[1],He[1],Ye[1])]}},{key:"inverseTransform",value:function(se){var me=se[0]*se[3]-se[1]*se[2];return[se[3]/me,-se[1]/me,-se[2]/me,se[0]/me,(se[2]*se[5]-se[4]*se[3])/me,(se[4]*se[1]-se[5]*se[0])/me]}},{key:"apply3dTransform",value:function(se,me){return[se[0]*me[0]+se[1]*me[1]+se[2]*me[2],se[3]*me[0]+se[4]*me[1]+se[5]*me[2],se[6]*me[0]+se[7]*me[1]+se[8]*me[2]]}},{key:"singularValueDecompose2dScale",value:function(se){var me=[se[0],se[2],se[1],se[3]],ze=se[0]*me[0]+se[1]*me[2],je=se[0]*me[1]+se[1]*me[3],He=se[2]*me[0]+se[3]*me[2],Ye=se[2]*me[1]+se[3]*me[3],at=(ze+Ye)/2,st=Math.sqrt(Math.pow(ze+Ye,2)-4*(ze*Ye-He*je))/2,gt=at+st||1,ht=at-st||1;return[Math.sqrt(gt),Math.sqrt(ht)]}},{key:"normalizeRect",value:function(se){var me=se.slice(0);return se[0]>se[2]&&(me[0]=se[2],me[2]=se[0]),se[1]>se[3]&&(me[1]=se[3],me[3]=se[1]),me}},{key:"intersect",value:function(se,me){function ze(at,st){return at-st}var je=[se[0],se[2],me[0],me[2]].sort(ze),He=[se[1],se[3],me[1],me[3]].sort(ze),Ye=[];if(se=le.normalizeRect(se),me=le.normalizeRect(me),je[0]===se[0]&&je[1]===me[0]||je[0]===me[0]&&je[1]===se[0])Ye[0]=je[1],Ye[2]=je[2];else return null;if(He[0]===se[1]&&He[1]===me[1]||He[0]===me[1]&&He[1]===se[1])Ye[1]=He[1],Ye[3]=He[2];else return null;return Ye}},{key:"bezierBoundingBox",value:function(se,me,ze,je,He,Ye,at,st){for(var gt=[],ht=[[],[]],Tt,St,Dt,it,Gt,Vt,or,Zt,Ht=0;Ht<2;++Ht){if(Ht===0?(St=6*se-12*ze+6*He,Tt=-3*se+9*ze-9*He+3*at,Dt=3*ze-3*se):(St=6*me-12*je+6*Ye,Tt=-3*me+9*je-9*Ye+3*st,Dt=3*je-3*me),Math.abs(Tt)<1e-12){if(Math.abs(St)<1e-12)continue;it=-Dt/St,0<it&&it<1&&gt.push(it);continue}or=St*St-4*Dt*Tt,Zt=Math.sqrt(or),!(or<0)&&(Gt=(-St+Zt)/(2*Tt),0<Gt&&Gt<1&&gt.push(Gt),Vt=(-St-Zt)/(2*Tt),0<Vt&&Vt<1&&gt.push(Vt))}for(var _t=gt.length,ft,Nt=_t;_t--;)it=gt[_t],ft=1-it,ht[0][_t]=ft*ft*ft*se+3*ft*ft*it*ze+3*ft*it*it*He+it*it*it*at,ht[1][_t]=ft*ft*ft*me+3*ft*ft*it*je+3*ft*it*it*Ye+it*it*it*st;return ht[0][Nt]=se,ht[1][Nt]=me,ht[0][Nt+1]=at,ht[1][Nt+1]=st,ht[0].length=ht[1].length=Nt+2,[Math.min.apply(Math,o(ht[0])),Math.min.apply(Math,o(ht[1])),Math.max.apply(Math,o(ht[0])),Math.max.apply(Math,o(ht[1]))]}}]),le}();n.Util=Ne;var Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function qe(le){var Te=le.length,se=[];if(le[0]==="\xFE"&&le[1]==="\xFF")for(var me=2;me<Te;me+=2)se.push(String.fromCharCode(le.charCodeAt(me)<<8|le.charCodeAt(me+1)));else if(le[0]==="\xFF"&&le[1]==="\xFE")for(var ze=2;ze<Te;ze+=2)se.push(String.fromCharCode(le.charCodeAt(ze+1)<<8|le.charCodeAt(ze)));else for(var je=0;je<Te;++je){var He=Ve[le.charCodeAt(je)];se.push(He?String.fromCharCode(He):le.charAt(je))}return se.join("")}function Ze(le){return le.replace(/([()\\\n\r])/g,function(Te){return Te===`
`?"\\n":Te==="\r"?"\\r":"\\".concat(Te)})}function nt(le){return/^[\x00-\x7F]*$/.test(le)}function ot(le){for(var Te=["\xFE\xFF"],se=0,me=le.length;se<me;se++){var ze=le.charCodeAt(se);Te.push(String.fromCharCode(ze>>8&255),String.fromCharCode(ze&255))}return Te.join("")}function bt(le){return decodeURIComponent(escape(le))}function vt(le){return unescape(encodeURIComponent(le))}function xt(le){return typeof le=="boolean"}function Xt(le){return typeof le=="number"}function Ft(le){return typeof le=="string"}function Mt(le){return A(le)==="object"&&le!==null&&le.byteLength!==void 0}function Lt(le,Te){if(le.length!==Te.length)return!1;for(var se=0,me=le.length;se<me;se++)if(le[se]!==Te[se])return!1;return!0}function Kt(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,Te=[le.getUTCFullYear().toString(),(le.getUTCMonth()+1).toString().padStart(2,"0"),le.getUTCDate().toString().padStart(2,"0"),le.getUTCHours().toString().padStart(2,"0"),le.getUTCMinutes().toString().padStart(2,"0"),le.getUTCSeconds().toString().padStart(2,"0")];return Te.join("")}function Rt(){var le=Object.create(null),Te=!1;return Object.defineProperty(le,"settled",{get:function(){return Te}}),le.promise=new Promise(function(se,me){le.resolve=function(ze){Te=!0,se(ze)},le.reject=function(ze){Te=!0,me(ze)}}),le}function Ot(le){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob!="undefined"&&!se)return URL.createObjectURL(new Blob([le],{type:Te}));for(var me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ze="data:".concat(Te,";base64,"),je=0,He=le.length;je<He;je+=3){var Ye=le[je]&255,at=le[je+1]&255,st=le[je+2]&255,gt=Ye>>2,ht=(Ye&3)<<4|at>>4,Tt=je+1<He?(at&15)<<2|st>>6:64,St=je+2<He?st&63:64;ze+=me[gt]+me[ht]+me[Tt]+me[St]}return ze}},(i,n,e)=>{var t=e(6);(typeof globalThis=="undefined"||!globalThis._pdfjsCompatibilityChecked)&&((typeof globalThis=="undefined"||globalThis.Math!==Math)&&(globalThis=e(7)),globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!t.isNodeJS||(globalThis.btoa=function(o){return Buffer.from(o,"binary").toString("base64")})}(),function(){globalThis.atob||!t.isNodeJS||(globalThis.atob=function(o){return Buffer.from(o,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!t.isNodeJS||(globalThis.DOMMatrix=e(69))}(),function(){Object.fromEntries||e(70)}(),function(){globalThis.Promise.allSettled||(globalThis.Promise=e(97))}(),function(){globalThis.ReadableStream||!t.isNodeJS||(globalThis.ReadableStream=e(134).ReadableStream)}())},(i,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;function e(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(u){return typeof u}:e=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},e(a)}var t=(typeof process=="undefined"?"undefined":e(process))==="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=t},(i,n,e)=>{e(8),i.exports=e(10)},(i,n,e)=>{var t=e(9),a=e(10);t({global:!0},{globalThis:a})},(i,n,e)=>{var t=e(10),a=e(11).f,o=e(47),u=e(50),l=e(41),h=e(57),S=e(68);i.exports=function(w,x){var N=w.target,T=w.global,R=w.stat,P,A,D,k,z,v;if(T?A=t:R?A=t[N]||l(N,{}):A=(t[N]||{}).prototype,A)for(D in x){if(z=x[D],w.noTargetGet?(v=a(A,D),k=v&&v.value):k=A[D],P=S(T?D:N+(R?".":"#")+D,w.forced),!P&&k!==void 0){if(typeof z==typeof k)continue;h(z,k)}(w.sham||k&&k.sham)&&o(z,"sham",!0),u(A,D,z,w)}}},i=>{var n=function(e){return e&&e.Math==Math&&e};i.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(i,n,e)=>{var t=e(12),a=e(14),o=e(15),u=e(16),l=e(17),h=e(22),S=e(42),w=e(45),x=Object.getOwnPropertyDescriptor;n.f=t?x:function(T,R){if(T=l(T),R=h(R),w)try{return x(T,R)}catch{}if(S(T,R))return u(!a(o.f,T,R),T[R])}},(i,n,e)=>{var t=e(13);i.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},i=>{i.exports=function(n){try{return!!n()}catch{return!0}}},i=>{var n=Function.prototype.call;i.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},(i,n)=>{var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,a=t&&!e.call({1:2},1);n.f=a?function(u){var l=t(this,u);return!!l&&l.enumerable}:e},i=>{i.exports=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}}},(i,n,e)=>{var t=e(18),a=e(21);i.exports=function(o){return t(a(o))}},(i,n,e)=>{var t=e(10),a=e(19),o=e(13),u=e(20),l=t.Object,h=a("".split);i.exports=o(function(){return!l("z").propertyIsEnumerable(0)})?function(S){return u(S)=="String"?h(S,""):l(S)}:l},i=>{var n=Function.prototype,e=n.bind,t=n.call,a=e&&e.bind(t);i.exports=e?function(o){return o&&a(t,o)}:function(o){return o&&function(){return t.apply(o,arguments)}}},(i,n,e)=>{var t=e(19),a=t({}.toString),o=t("".slice);i.exports=function(u){return o(a(u),8,-1)}},(i,n,e)=>{var t=e(10),a=t.TypeError;i.exports=function(o){if(o==null)throw a("Can't call method on "+o);return o}},(i,n,e)=>{var t=e(23),a=e(26);i.exports=function(o){var u=t(o,"string");return a(u)?u:u+""}},(i,n,e)=>{var t=e(10),a=e(14),o=e(24),u=e(26),l=e(33),h=e(36),S=e(37),w=t.TypeError,x=S("toPrimitive");i.exports=function(N,T){if(!o(N)||u(N))return N;var R=l(N,x),P;if(R){if(T===void 0&&(T="default"),P=a(R,N,T),!o(P)||u(P))return P;throw w("Can't convert object to primitive value")}return T===void 0&&(T="number"),h(N,T)}},(i,n,e)=>{var t=e(25);i.exports=function(a){return typeof a=="object"?a!==null:t(a)}},i=>{i.exports=function(n){return typeof n=="function"}},(i,n,e)=>{var t=e(10),a=e(27),o=e(25),u=e(28),l=e(29),h=t.Object;i.exports=l?function(S){return typeof S=="symbol"}:function(S){var w=a("Symbol");return o(w)&&u(w.prototype,h(S))}},(i,n,e)=>{var t=e(10),a=e(25),o=function(u){return a(u)?u:void 0};i.exports=function(u,l){return arguments.length<2?o(t[u]):t[u]&&t[u][l]}},(i,n,e)=>{var t=e(19);i.exports=t({}.isPrototypeOf)},(i,n,e)=>{var t=e(30);i.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(i,n,e)=>{var t=e(31),a=e(13);i.exports=!!Object.getOwnPropertySymbols&&!a(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&t&&t<41})},(i,n,e)=>{var t=e(10),a=e(32),o=t.process,u=t.Deno,l=o&&o.versions||u&&u.version,h=l&&l.v8,S,w;h&&(S=h.split("."),w=S[0]>0&&S[0]<4?1:+(S[0]+S[1])),!w&&a&&(S=a.match(/Edge\/(\d+)/),(!S||S[1]>=74)&&(S=a.match(/Chrome\/(\d+)/),S&&(w=+S[1]))),i.exports=w},(i,n,e)=>{var t=e(27);i.exports=t("navigator","userAgent")||""},(i,n,e)=>{var t=e(34);i.exports=function(a,o){var u=a[o];return u==null?void 0:t(u)}},(i,n,e)=>{var t=e(10),a=e(25),o=e(35),u=t.TypeError;i.exports=function(l){if(a(l))return l;throw u(o(l)+" is not a function")}},(i,n,e)=>{var t=e(10),a=t.String;i.exports=function(o){try{return a(o)}catch{return"Object"}}},(i,n,e)=>{var t=e(10),a=e(14),o=e(25),u=e(24),l=t.TypeError;i.exports=function(h,S){var w,x;if(S==="string"&&o(w=h.toString)&&!u(x=a(w,h))||o(w=h.valueOf)&&!u(x=a(w,h))||S!=="string"&&o(w=h.toString)&&!u(x=a(w,h)))return x;throw l("Can't convert object to primitive value")}},(i,n,e)=>{var t=e(10),a=e(38),o=e(42),u=e(44),l=e(30),h=e(29),S=a("wks"),w=t.Symbol,x=w&&w.for,N=h?w:w&&w.withoutSetter||u;i.exports=function(T){if(!o(S,T)||!(l||typeof S[T]=="string")){var R="Symbol."+T;l&&o(w,T)?S[T]=w[T]:h&&x?S[T]=x(R):S[T]=N(R)}return S[T]}},(i,n,e)=>{var t=e(39),a=e(40);(i.exports=function(o,u){return a[o]||(a[o]=u!==void 0?u:{})})("versions",[]).push({version:"3.19.3",mode:t?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},i=>{i.exports=!1},(i,n,e)=>{var t=e(10),a=e(41),o="__core-js_shared__",u=t[o]||a(o,{});i.exports=u},(i,n,e)=>{var t=e(10),a=Object.defineProperty;i.exports=function(o,u){try{a(t,o,{value:u,configurable:!0,writable:!0})}catch{t[o]=u}return u}},(i,n,e)=>{var t=e(19),a=e(43),o=t({}.hasOwnProperty);i.exports=Object.hasOwn||function(l,h){return o(a(l),h)}},(i,n,e)=>{var t=e(10),a=e(21),o=t.Object;i.exports=function(u){return o(a(u))}},(i,n,e)=>{var t=e(19),a=0,o=Math.random(),u=t(1 .toString);i.exports=function(l){return"Symbol("+(l===void 0?"":l)+")_"+u(++a+o,36)}},(i,n,e)=>{var t=e(12),a=e(13),o=e(46);i.exports=!t&&!a(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},(i,n,e)=>{var t=e(10),a=e(24),o=t.document,u=a(o)&&a(o.createElement);i.exports=function(l){return u?o.createElement(l):{}}},(i,n,e)=>{var t=e(12),a=e(48),o=e(16);i.exports=t?function(u,l,h){return a.f(u,l,o(1,h))}:function(u,l,h){return u[l]=h,u}},(i,n,e)=>{var t=e(10),a=e(12),o=e(45),u=e(49),l=e(22),h=t.TypeError,S=Object.defineProperty;n.f=a?S:function(x,N,T){if(u(x),N=l(N),u(T),o)try{return S(x,N,T)}catch{}if("get"in T||"set"in T)throw h("Accessors not supported");return"value"in T&&(x[N]=T.value),x}},(i,n,e)=>{var t=e(10),a=e(24),o=t.String,u=t.TypeError;i.exports=function(l){if(a(l))return l;throw u(o(l)+" is not an object")}},(i,n,e)=>{var t=e(10),a=e(25),o=e(42),u=e(47),l=e(41),h=e(51),S=e(52),w=e(56).CONFIGURABLE,x=S.get,N=S.enforce,T=String(String).split("String");(i.exports=function(R,P,A,D){var k=D?!!D.unsafe:!1,z=D?!!D.enumerable:!1,v=D?!!D.noTargetGet:!1,f=D&&D.name!==void 0?D.name:P,d;if(a(A)&&(String(f).slice(0,7)==="Symbol("&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(A,"name")||w&&A.name!==f)&&u(A,"name",f),d=N(A),d.source||(d.source=T.join(typeof f=="string"?f:""))),R===t){z?R[P]=A:l(P,A);return}else k?!v&&R[P]&&(z=!0):delete R[P];z?R[P]=A:u(R,P,A)})(Function.prototype,"toString",function(){return a(this)&&x(this).source||h(this)})},(i,n,e)=>{var t=e(19),a=e(25),o=e(40),u=t(Function.toString);a(o.inspectSource)||(o.inspectSource=function(l){return u(l)}),i.exports=o.inspectSource},(i,n,e)=>{var t=e(53),a=e(10),o=e(19),u=e(24),l=e(47),h=e(42),S=e(40),w=e(54),x=e(55),N="Object already initialized",T=a.TypeError,R=a.WeakMap,P,A,D,k=function(p){return D(p)?A(p):P(p,{})},z=function(p){return function(C){var I;if(!u(C)||(I=A(C)).type!==p)throw T("Incompatible receiver, "+p+" required");return I}};if(t||S.state){var v=S.state||(S.state=new R),f=o(v.get),d=o(v.has),b=o(v.set);P=function(p,C){if(d(v,p))throw new T(N);return C.facade=p,b(v,p,C),C},A=function(p){return f(v,p)||{}},D=function(p){return d(v,p)}}else{var y=w("state");x[y]=!0,P=function(p,C){if(h(p,y))throw new T(N);return C.facade=p,l(p,y,C),C},A=function(p){return h(p,y)?p[y]:{}},D=function(p){return h(p,y)}}i.exports={set:P,get:A,has:D,enforce:k,getterFor:z}},(i,n,e)=>{var t=e(10),a=e(25),o=e(51),u=t.WeakMap;i.exports=a(u)&&/native code/.test(o(u))},(i,n,e)=>{var t=e(38),a=e(44),o=t("keys");i.exports=function(u){return o[u]||(o[u]=a(u))}},i=>{i.exports={}},(i,n,e)=>{var t=e(12),a=e(42),o=Function.prototype,u=t&&Object.getOwnPropertyDescriptor,l=a(o,"name"),h=l&&function(){}.name==="something",S=l&&(!t||t&&u(o,"name").configurable);i.exports={EXISTS:l,PROPER:h,CONFIGURABLE:S}},(i,n,e)=>{var t=e(42),a=e(58),o=e(11),u=e(48);i.exports=function(l,h){for(var S=a(h),w=u.f,x=o.f,N=0;N<S.length;N++){var T=S[N];t(l,T)||w(l,T,x(h,T))}}},(i,n,e)=>{var t=e(27),a=e(19),o=e(59),u=e(67),l=e(49),h=a([].concat);i.exports=t("Reflect","ownKeys")||function(w){var x=o.f(l(w)),N=u.f;return N?h(x,N(w)):x}},(i,n,e)=>{var t=e(60),a=e(66),o=a.concat("length","prototype");n.f=Object.getOwnPropertyNames||function(l){return t(l,o)}},(i,n,e)=>{var t=e(19),a=e(42),o=e(17),u=e(61).indexOf,l=e(55),h=t([].push);i.exports=function(S,w){var x=o(S),N=0,T=[],R;for(R in x)!a(l,R)&&a(x,R)&&h(T,R);for(;w.length>N;)a(x,R=w[N++])&&(~u(T,R)||h(T,R));return T}},(i,n,e)=>{var t=e(17),a=e(62),o=e(64),u=function(l){return function(h,S,w){var x=t(h),N=o(x),T=a(w,N),R;if(l&&S!=S){for(;N>T;)if(R=x[T++],R!=R)return!0}else for(;N>T;T++)if((l||T in x)&&x[T]===S)return l||T||0;return!l&&-1}};i.exports={includes:u(!0),indexOf:u(!1)}},(i,n,e)=>{var t=e(63),a=Math.max,o=Math.min;i.exports=function(u,l){var h=t(u);return h<0?a(h+l,0):o(h,l)}},i=>{var n=Math.ceil,e=Math.floor;i.exports=function(t){var a=+t;return a!==a||a===0?0:(a>0?e:n)(a)}},(i,n,e)=>{var t=e(65);i.exports=function(a){return t(a.length)}},(i,n,e)=>{var t=e(63),a=Math.min;i.exports=function(o){return o>0?a(t(o),9007199254740991):0}},i=>{i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(i,n)=>{n.f=Object.getOwnPropertySymbols},(i,n,e)=>{var t=e(13),a=e(25),o=/#|\.prototype\./,u=function(x,N){var T=h[l(x)];return T==w?!0:T==S?!1:a(N)?t(N):!!N},l=u.normalize=function(x){return String(x).replace(o,".").toLowerCase()},h=u.data={},S=u.NATIVE="N",w=u.POLYFILL="P";i.exports=u},(i,n,e)=>{var t,a;function o(u){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(h){return typeof h}:o=function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},o(u)}(function(u,l){o(n)==="object"?i.exports=l():(t=l,a=typeof t=="function"?t.call(n,e,n,i):t,a!==void 0&&(i.exports=a))})(void 0,function(){function u(v){var f=new A,d=Array.from(v);if(!d.every(function(Ee){return!Number.isNaN(Ee)}))throw TypeError('CSSMatrix: "'+v+'" must only have numbers.');if(d.length===16){var b=d[0],y=d[1],p=d[2],C=d[3],I=d[4],j=d[5],W=d[6],H=d[7],Q=d[8],K=d[9],ie=d[10],V=d[11],Y=d[12],F=d[13],m=d[14],E=d[15];f.m11=b,f.a=b,f.m21=I,f.c=I,f.m31=Q,f.m41=Y,f.e=Y,f.m12=y,f.b=y,f.m22=j,f.d=j,f.m32=K,f.m42=F,f.f=F,f.m13=p,f.m23=W,f.m33=ie,f.m43=m,f.m14=C,f.m24=H,f.m34=V,f.m44=E}else if(d.length===6){var L=d[0],X=d[1],re=d[2],q=d[3],be=d[4],Ce=d[5];f.m11=L,f.a=L,f.m12=X,f.b=X,f.m21=re,f.c=re,f.m22=q,f.d=q,f.m41=be,f.e=be,f.m42=Ce,f.f=Ce}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return f}function l(v){var f=Object.keys(new A);if(o(v)==="object"&&f.every(function(d){return d in v}))return u([v.m11,v.m12,v.m13,v.m14,v.m21,v.m22,v.m23,v.m24,v.m31,v.m32,v.m33,v.m34,v.m41,v.m42,v.m43,v.m44]);throw TypeError('CSSMatrix: "'+v+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function h(v){if(typeof v!="string")throw TypeError('CSSMatrix: "'+v+'" is not a string.');var f=String(v).replace(/\s/g,""),d=new A,b='CSSMatrix: invalid transform string "'+v+'"';return f.split(")").filter(function(y){return y}).forEach(function(y){var p=y.split("("),C=p[0],I=p[1];if(!I)throw TypeError(b);var j=I.split(",").map(function(q){return q.includes("rad")?parseFloat(q)*(180/Math.PI):parseFloat(q)}),W=j[0],H=j[1],Q=j[2],K=j[3],ie=[W,H,Q],V=[W,H,Q,K];if(C==="perspective"&&W&&[H,Q].every(function(q){return q===void 0}))d.m34=-1/W;else if(C.includes("matrix")&&[6,16].includes(j.length)&&j.every(function(q){return!Number.isNaN(+q)})){var Y=j.map(function(q){return Math.abs(q)<1e-6?0:q});d=d.multiply(u(Y))}else if(C==="translate3d"&&ie.every(function(q){return!Number.isNaN(+q)}))d=d.translate(W,H,Q);else if(C==="translate"&&W&&Q===void 0)d=d.translate(W,H||0,0);else if(C==="rotate3d"&&V.every(function(q){return!Number.isNaN(+q)})&&K)d=d.rotateAxisAngle(W,H,Q,K);else if(C==="rotate"&&W&&[H,Q].every(function(q){return q===void 0}))d=d.rotate(0,0,W);else if(C==="scale3d"&&ie.every(function(q){return!Number.isNaN(+q)})&&ie.some(function(q){return q!==1}))d=d.scale(W,H,Q);else if(C==="scale"&&!Number.isNaN(W)&&W!==1&&Q===void 0){var F=Number.isNaN(+H),m=F?W:H;d=d.scale(W,m,1)}else if(C==="skew"&&W&&Q===void 0)d=d.skewX(W),d=H?d.skewY(H):d;else if(/[XYZ]/.test(C)&&W&&[H,Q].every(function(q){return q===void 0})&&["translate","rotate","scale","skew"].some(function(q){return C.includes(q)}))if(["skewX","skewY"].includes(C))d=d[C](W);else{var E=C.replace(/[XYZ]/,""),L=C.replace(E,""),X=["X","Y","Z"].indexOf(L),re=[X===0?W:0,X===1?W:0,X===2?W:0];d=d[E].apply(d,re)}else throw TypeError(b)}),d}function S(v,f,d){var b=new A;return b.m41=v,b.e=v,b.m42=f,b.f=f,b.m43=d,b}function w(v,f,d){var b=new A,y=Math.PI/180,p=v*y,C=f*y,I=d*y,j=Math.cos(p),W=-Math.sin(p),H=Math.cos(C),Q=-Math.sin(C),K=Math.cos(I),ie=-Math.sin(I),V=H*K,Y=-H*ie;b.m11=V,b.a=V,b.m12=Y,b.b=Y,b.m13=Q;var F=W*Q*K+j*ie;b.m21=F,b.c=F;var m=j*K-W*Q*ie;return b.m22=m,b.d=m,b.m23=-W*H,b.m31=W*ie-j*Q*K,b.m32=W*K+j*Q*ie,b.m33=j*H,b}function x(v,f,d,b){var y=new A,p=b*(Math.PI/360),C=Math.sin(p),I=Math.cos(p),j=C*C,W=Math.sqrt(v*v+f*f+d*d),H=v,Q=f,K=d;W===0?(H=0,Q=0,K=1):(H/=W,Q/=W,K/=W);var ie=H*H,V=Q*Q,Y=K*K,F=1-2*(V+Y)*j;y.m11=F,y.a=F;var m=2*(H*Q*j+K*C*I);y.m12=m,y.b=m,y.m13=2*(H*K*j-Q*C*I);var E=2*(Q*H*j-K*C*I);y.m21=E,y.c=E;var L=1-2*(Y+ie)*j;return y.m22=L,y.d=L,y.m23=2*(Q*K*j+H*C*I),y.m31=2*(K*H*j+Q*C*I),y.m32=2*(K*Q*j-H*C*I),y.m33=1-2*(ie+V)*j,y}function N(v,f,d){var b=new A;return b.m11=v,b.a=v,b.m22=f,b.d=f,b.m33=d,b}function T(v){var f=new A,d=v*Math.PI/180,b=Math.tan(d);return f.m21=b,f.c=b,f}function R(v){var f=new A,d=v*Math.PI/180,b=Math.tan(d);return f.m12=b,f.b=b,f}function P(v,f){var d=f.m11*v.m11+f.m12*v.m21+f.m13*v.m31+f.m14*v.m41,b=f.m11*v.m12+f.m12*v.m22+f.m13*v.m32+f.m14*v.m42,y=f.m11*v.m13+f.m12*v.m23+f.m13*v.m33+f.m14*v.m43,p=f.m11*v.m14+f.m12*v.m24+f.m13*v.m34+f.m14*v.m44,C=f.m21*v.m11+f.m22*v.m21+f.m23*v.m31+f.m24*v.m41,I=f.m21*v.m12+f.m22*v.m22+f.m23*v.m32+f.m24*v.m42,j=f.m21*v.m13+f.m22*v.m23+f.m23*v.m33+f.m24*v.m43,W=f.m21*v.m14+f.m22*v.m24+f.m23*v.m34+f.m24*v.m44,H=f.m31*v.m11+f.m32*v.m21+f.m33*v.m31+f.m34*v.m41,Q=f.m31*v.m12+f.m32*v.m22+f.m33*v.m32+f.m34*v.m42,K=f.m31*v.m13+f.m32*v.m23+f.m33*v.m33+f.m34*v.m43,ie=f.m31*v.m14+f.m32*v.m24+f.m33*v.m34+f.m34*v.m44,V=f.m41*v.m11+f.m42*v.m21+f.m43*v.m31+f.m44*v.m41,Y=f.m41*v.m12+f.m42*v.m22+f.m43*v.m32+f.m44*v.m42,F=f.m41*v.m13+f.m42*v.m23+f.m43*v.m33+f.m44*v.m43,m=f.m41*v.m14+f.m42*v.m24+f.m43*v.m34+f.m44*v.m44;return u([d,b,y,p,C,I,j,W,H,Q,K,ie,V,Y,F,m])}var A=function(){for(var f=[],d=arguments.length;d--;)f[d]=arguments[d];var b=this;if(b.a=1,b.b=0,b.c=0,b.d=1,b.e=0,b.f=0,b.m11=1,b.m12=0,b.m13=0,b.m14=0,b.m21=0,b.m22=1,b.m23=0,b.m24=0,b.m31=0,b.m32=0,b.m33=1,b.m34=0,b.m41=0,b.m42=0,b.m43=0,b.m44=1,f&&f.length){var y=[16,6].some(function(p){return p===f.length})?f:f[0];return b.setMatrixValue(y)}return b},D={isIdentity:{configurable:!0},is2D:{configurable:!0}};D.isIdentity.set=function(v){this.isIdentity=v},D.isIdentity.get=function(){var v=this;return v.m11===1&&v.m12===0&&v.m13===0&&v.m14===0&&v.m21===0&&v.m22===1&&v.m23===0&&v.m24===0&&v.m31===0&&v.m32===0&&v.m33===1&&v.m34===0&&v.m41===0&&v.m42===0&&v.m43===0&&v.m44===1},D.is2D.get=function(){var v=this;return v.m31===0&&v.m32===0&&v.m33===1&&v.m34===0&&v.m43===0&&v.m44===1},D.is2D.set=function(v){this.is2D=v},A.prototype.setMatrixValue=function(f){var d=this;return[Array,Float64Array,Float32Array].some(function(b){return f instanceof b})?u(f):typeof f=="string"&&f.length&&f!=="none"?h(f):o(f)==="object"?l(f):d},A.prototype.toArray=function(){var f=this,d=Math.pow(10,6),b;return f.is2D?b=[f.a,f.b,f.c,f.d,f.e,f.f]:b=[f.m11,f.m12,f.m13,f.m14,f.m21,f.m22,f.m23,f.m24,f.m31,f.m32,f.m33,f.m34,f.m41,f.m42,f.m43,f.m44],b.map(function(y){return Math.abs(y)<1e-6?0:(y*d>>0)/d})},A.prototype.toString=function(){var f=this,d=f.toArray(),b=f.is2D?"matrix":"matrix3d";return b+"("+d+")"},A.prototype.toJSON=function(){var f=this,d=f.is2D,b=f.isIdentity;return Object.assign({},f,{is2D:d,isIdentity:b})},A.prototype.multiply=function(f){return P(this,f)},A.prototype.translate=function(f,d,b){var y=f,p=d,C=b;return C===void 0&&(C=0),p===void 0&&(p=0),P(this,S(y,p,C))},A.prototype.scale=function(f,d,b){var y=f,p=d,C=b;return p===void 0&&(p=f),C===void 0&&(C=1),P(this,N(y,p,C))},A.prototype.rotate=function(f,d,b){var y=f,p=d,C=b;return p===void 0&&(p=0),C===void 0&&(C=y,y=0),P(this,w(y,p,C))},A.prototype.rotateAxisAngle=function(f,d,b,y){if([f,d,b,y].some(function(p){return Number.isNaN(p)}))throw new TypeError("CSSMatrix: expecting 4 values");return P(this,x(f,d,b,y))},A.prototype.skewX=function(f){return P(this,T(f))},A.prototype.skewY=function(f){return P(this,R(f))},A.prototype.transformPoint=function(f){var d=this,b=S(f.x,f.y,f.z);return b.m44=f.w||1,b=d.multiply(b),{x:b.m41,y:b.m42,z:b.m43,w:b.m44}},A.prototype.transform=function(f){var d=this,b=d.m11*f.x+d.m12*f.y+d.m13*f.z+d.m14*f.w,y=d.m21*f.x+d.m22*f.y+d.m23*f.z+d.m24*f.w,p=d.m31*f.x+d.m32*f.y+d.m33*f.z+d.m34*f.w,C=d.m41*f.x+d.m42*f.y+d.m43*f.z+d.m44*f.w;return{x:b/C,y:y/C,z:p/C,w:C}},Object.defineProperties(A.prototype,D),Object.assign(A,{Translate:S,Rotate:w,RotateAxisAngle:x,Scale:N,SkewX:T,SkewY:R,Multiply:P,fromArray:u,fromMatrix:l,fromString:h});var k="0.0.24",z=k;return Object.assign(A,{Version:z}),A})},(i,n,e)=>{e(71),e(86);var t=e(96);i.exports=t.Object.fromEntries},(i,n,e)=>{var t=e(17),a=e(72),o=e(77),u=e(52),l=e(78),h="Array Iterator",S=u.set,w=u.getterFor(h);i.exports=l(Array,"Array",function(x,N){S(this,{type:h,target:t(x),index:0,kind:N})},function(){var x=w(this),N=x.target,T=x.kind,R=x.index++;return!N||R>=N.length?(x.target=void 0,{value:void 0,done:!0}):T=="keys"?{value:R,done:!1}:T=="values"?{value:N[R],done:!1}:{value:[R,N[R]],done:!1}},"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},(i,n,e)=>{var t=e(37),a=e(73),o=e(48),u=t("unscopables"),l=Array.prototype;l[u]==null&&o.f(l,u,{configurable:!0,value:a(null)}),i.exports=function(h){l[u][h]=!0}},(i,n,e)=>{var t=e(49),a=e(74),o=e(66),u=e(55),l=e(76),h=e(46),S=e(54),w=">",x="<",N="prototype",T="script",R=S("IE_PROTO"),P=function(){},A=function(f){return x+T+w+f+x+"/"+T+w},D=function(f){f.write(A("")),f.close();var d=f.parentWindow.Object;return f=null,d},k=function(){var f=h("iframe"),d="java"+T+":",b;return f.style.display="none",l.appendChild(f),f.src=String(d),b=f.contentWindow.document,b.open(),b.write(A("document.F=Object")),b.close(),b.F},z,v=function(){try{z=new ActiveXObject("htmlfile")}catch{}v=typeof document!="undefined"?document.domain&&z?D(z):k():D(z);for(var f=o.length;f--;)delete v[N][o[f]];return v()};u[R]=!0,i.exports=Object.create||function(d,b){var y;return d!==null?(P[N]=t(d),y=new P,P[N]=null,y[R]=d):y=v(),b===void 0?y:a(y,b)}},(i,n,e)=>{var t=e(12),a=e(48),o=e(49),u=e(17),l=e(75);i.exports=t?Object.defineProperties:function(S,w){o(S);for(var x=u(w),N=l(w),T=N.length,R=0,P;T>R;)a.f(S,P=N[R++],x[P]);return S}},(i,n,e)=>{var t=e(60),a=e(66);i.exports=Object.keys||function(u){return t(u,a)}},(i,n,e)=>{var t=e(27);i.exports=t("document","documentElement")},i=>{i.exports={}},(i,n,e)=>{var t=e(9),a=e(14),o=e(39),u=e(56),l=e(25),h=e(79),S=e(81),w=e(84),x=e(83),N=e(47),T=e(50),R=e(37),P=e(77),A=e(80),D=u.PROPER,k=u.CONFIGURABLE,z=A.IteratorPrototype,v=A.BUGGY_SAFARI_ITERATORS,f=R("iterator"),d="keys",b="values",y="entries",p=function(){return this};i.exports=function(C,I,j,W,H,Q,K){h(j,I,W);var ie=function(be){if(be===H&&E)return E;if(!v&&be in F)return F[be];switch(be){case d:return function(){return new j(this,be)};case b:return function(){return new j(this,be)};case y:return function(){return new j(this,be)}}return function(){return new j(this)}},V=I+" Iterator",Y=!1,F=C.prototype,m=F[f]||F["@@iterator"]||H&&F[H],E=!v&&m||ie(H),L=I=="Array"&&F.entries||m,X,re,q;if(L&&(X=S(L.call(new C)),X!==Object.prototype&&X.next&&(!o&&S(X)!==z&&(w?w(X,z):l(X[f])||T(X,f,p)),x(X,V,!0,!0),o&&(P[V]=p))),D&&H==b&&m&&m.name!==b&&(!o&&k?N(F,"name",b):(Y=!0,E=function(){return a(m,this)})),H)if(re={values:ie(b),keys:Q?E:ie(d),entries:ie(y)},K)for(q in re)(v||Y||!(q in F))&&T(F,q,re[q]);else t({target:I,proto:!0,forced:v||Y},re);return(!o||K)&&F[f]!==E&&T(F,f,E,{name:H}),P[I]=E,re}},(i,n,e)=>{var t=e(80).IteratorPrototype,a=e(73),o=e(16),u=e(83),l=e(77),h=function(){return this};i.exports=function(S,w,x,N){var T=w+" Iterator";return S.prototype=a(t,{next:o(+!N,x)}),u(S,T,!1,!0),l[T]=h,S}},(i,n,e)=>{var t=e(13),a=e(25),o=e(73),u=e(81),l=e(50),h=e(37),S=e(39),w=h("iterator"),x=!1,N,T,R;[].keys&&(R=[].keys(),"next"in R?(T=u(u(R)),T!==Object.prototype&&(N=T)):x=!0);var P=N==null||t(function(){var A={};return N[w].call(A)!==A});P?N={}:S&&(N=o(N)),a(N[w])||l(N,w,function(){return this}),i.exports={IteratorPrototype:N,BUGGY_SAFARI_ITERATORS:x}},(i,n,e)=>{var t=e(10),a=e(42),o=e(25),u=e(43),l=e(54),h=e(82),S=l("IE_PROTO"),w=t.Object,x=w.prototype;i.exports=h?w.getPrototypeOf:function(N){var T=u(N);if(a(T,S))return T[S];var R=T.constructor;return o(R)&&T instanceof R?R.prototype:T instanceof w?x:null}},(i,n,e)=>{var t=e(13);i.exports=!t(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},(i,n,e)=>{var t=e(48).f,a=e(42),o=e(37),u=o("toStringTag");i.exports=function(l,h,S){l&&!a(l=S?l:l.prototype,u)&&t(l,u,{configurable:!0,value:h})}},(i,n,e)=>{var t=e(19),a=e(49),o=e(85);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,l={},h;try{h=t(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),h(l,[]),u=l instanceof Array}catch{}return function(w,x){return a(w),o(x),u?h(w,x):w.__proto__=x,w}}():void 0)},(i,n,e)=>{var t=e(10),a=e(25),o=t.String,u=t.TypeError;i.exports=function(l){if(typeof l=="object"||a(l))return l;throw u("Can't set "+o(l)+" as a prototype")}},(i,n,e)=>{var t=e(9),a=e(87),o=e(95);t({target:"Object",stat:!0},{fromEntries:function(l){var h={};return a(l,function(S,w){o(h,S,w)},{AS_ENTRIES:!0}),h}})},(i,n,e)=>{var t=e(10),a=e(88),o=e(14),u=e(49),l=e(35),h=e(89),S=e(64),w=e(28),x=e(90),N=e(91),T=e(94),R=t.TypeError,P=function(D,k){this.stopped=D,this.result=k},A=P.prototype;i.exports=function(D,k,z){var v=z&&z.that,f=!!(z&&z.AS_ENTRIES),d=!!(z&&z.IS_ITERATOR),b=!!(z&&z.INTERRUPTED),y=a(k,v),p,C,I,j,W,H,Q,K=function(V){return p&&T(p,"normal",V),new P(!0,V)},ie=function(V){return f?(u(V),b?y(V[0],V[1],K):y(V[0],V[1])):b?y(V,K):y(V)};if(d)p=D;else{if(C=N(D),!C)throw R(l(D)+" is not iterable");if(h(C)){for(I=0,j=S(D);j>I;I++)if(W=ie(D[I]),W&&w(A,W))return W;return new P(!1)}p=x(D,C)}for(H=p.next;!(Q=o(H,p)).done;){try{W=ie(Q.value)}catch(V){T(p,"throw",V)}if(typeof W=="object"&&W&&w(A,W))return W}return new P(!1)}},(i,n,e)=>{var t=e(19),a=e(34),o=t(t.bind);i.exports=function(u,l){return a(u),l===void 0?u:o?o(u,l):function(){return u.apply(l,arguments)}}},(i,n,e)=>{var t=e(37),a=e(77),o=t("iterator"),u=Array.prototype;i.exports=function(l){return l!==void 0&&(a.Array===l||u[o]===l)}},(i,n,e)=>{var t=e(10),a=e(14),o=e(34),u=e(49),l=e(35),h=e(91),S=t.TypeError;i.exports=function(w,x){var N=arguments.length<2?h(w):x;if(o(N))return u(a(N,w));throw S(l(w)+" is not iterable")}},(i,n,e)=>{var t=e(92),a=e(33),o=e(77),u=e(37),l=u("iterator");i.exports=function(h){if(h!=null)return a(h,l)||a(h,"@@iterator")||o[t(h)]}},(i,n,e)=>{var t=e(10),a=e(93),o=e(25),u=e(20),l=e(37),h=l("toStringTag"),S=t.Object,w=u(function(){return arguments}())=="Arguments",x=function(N,T){try{return N[T]}catch{}};i.exports=a?u:function(N){var T,R,P;return N===void 0?"Undefined":N===null?"Null":typeof(R=x(T=S(N),h))=="string"?R:w?u(T):(P=u(T))=="Object"&&o(T.callee)?"Arguments":P}},(i,n,e)=>{var t=e(37),a=t("toStringTag"),o={};o[a]="z",i.exports=String(o)==="[object z]"},(i,n,e)=>{var t=e(14),a=e(49),o=e(33);i.exports=function(u,l,h){var S,w;a(u);try{if(S=o(u,"return"),!S){if(l==="throw")throw h;return h}S=t(S,u)}catch(x){w=!0,S=x}if(l==="throw")throw h;if(w)throw S;return a(S),h}},(i,n,e)=>{var t=e(22),a=e(48),o=e(16);i.exports=function(u,l,h){var S=t(l);S in u?a.f(u,S,o(0,h)):u[S]=h}},(i,n,e)=>{var t=e(10);i.exports=t},(i,n,e)=>{e(98),e(71),e(105),e(107),e(129),e(130),e(131),e(132);var t=e(96);i.exports=t.Promise},(i,n,e)=>{var t=e(9),a=e(10),o=e(28),u=e(81),l=e(84),h=e(57),S=e(73),w=e(47),x=e(16),N=e(99),T=e(101),R=e(87),P=e(102),A=e(37),D=e(104),k=A("toStringTag"),z=a.Error,v=[].push,f=function(y,p){var C=arguments.length>2?arguments[2]:void 0,I=o(d,this),j;l?j=l(new z(void 0),I?u(this):d):(j=I?this:S(d),w(j,k,"Error")),w(j,"message",P(p,"")),D&&w(j,"stack",N(j.stack,1)),T(j,C);var W=[];return R(y,v,{that:W}),w(j,"errors",W),j};l?l(f,z):h(f,z);var d=f.prototype=S(z.prototype,{constructor:x(1,f),message:x(1,""),name:x(1,"AggregateError")});t({global:!0},{AggregateError:f})},(i,n,e)=>{var t=e(19),a=e(100),o=t("".replace),u=t("".split),l=t([].join),h=function(N){return String(Error(N).stack)}("zxcasd"),S=/\n\s*at [^:]*:[^\n]*/,w=S.test(h),x=/@[^\n]*\n/.test(h)&&!/zxcasd/.test(h);i.exports=function(N,T){if(typeof N!="string")return N;if(w)for(;T--;)N=o(N,S,"");else if(x)return l(a(u(N,`
`),T),`
`);return N}},(i,n,e)=>{var t=e(10),a=e(62),o=e(64),u=e(95),l=t.Array,h=Math.max;i.exports=function(S,w,x){for(var N=o(S),T=a(w,N),R=a(x===void 0?N:x,N),P=l(h(R-T,0)),A=0;T<R;T++,A++)u(P,A,S[T]);return P.length=A,P}},(i,n,e)=>{var t=e(24),a=e(47);i.exports=function(o,u){t(u)&&"cause"in u&&a(o,"cause",u.cause)}},(i,n,e)=>{var t=e(103);i.exports=function(a,o){return a===void 0?arguments.length<2?"":o:t(a)}},(i,n,e)=>{var t=e(10),a=e(92),o=t.String;i.exports=function(u){if(a(u)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return o(u)}},(i,n,e)=>{var t=e(13),a=e(16);i.exports=!t(function(){var o=Error("a");return"stack"in o?(Object.defineProperty(o,"stack",a(1,7)),o.stack!==7):!0})},(i,n,e)=>{var t=e(93),a=e(50),o=e(106);t||a(Object.prototype,"toString",o,{unsafe:!0})},(i,n,e)=>{var t=e(93),a=e(92);i.exports=t?{}.toString:function(){return"[object "+a(this)+"]"}},(i,n,e)=>{var t=e(9),a=e(39),o=e(10),u=e(27),l=e(14),h=e(108),S=e(50),w=e(109),x=e(84),N=e(83),T=e(110),R=e(34),P=e(25),A=e(24),D=e(111),k=e(51),z=e(87),v=e(112),f=e(113),d=e(116).set,b=e(121),y=e(124),p=e(126),C=e(125),I=e(127),j=e(52),W=e(68),H=e(37),Q=e(128),K=e(120),ie=e(31),V=H("species"),Y="Promise",F=j.getterFor(Y),m=j.set,E=j.getterFor(Y),L=h&&h.prototype,X=h,re=L,q=o.TypeError,be=o.document,Ce=o.process,Ee=C.f,G=Ee,M=!!(be&&be.createEvent&&o.dispatchEvent),g=P(o.PromiseRejectionEvent),c="unhandledrejection",_="rejectionhandled",B=0,U=1,ee=2,ue=1,pe=2,ge=!1,ve,_e,Re,we,Ie=W(Y,function(){var J=k(X),he=J!==String(X);if(!he&&ie===66||a&&!re.finally)return!0;if(ie>=51&&/native code/.test(J))return!1;var ce=new X(function(Le){Le(1)}),Se=function(Le){Le(function(){},function(){})},ke=ce.constructor={};return ke[V]=Se,ge=ce.then(function(){})instanceof Se,ge?!he&&Q&&!g:!0}),Fe=Ie||!v(function(J){X.all(J).catch(function(){})}),We=function(J){var he;return A(J)&&P(he=J.then)?he:!1},Ue=function(J,he){if(!J.notified){J.notified=!0;var ce=J.reactions;b(function(){for(var Se=J.value,ke=J.state==U,Le=0;ce.length>Le;){var De=ce[Le++],Ae=ke?De.ok:De.fail,$e=De.resolve,xe=De.reject,Oe=De.domain,Be,Ne,Ve;try{Ae?(ke||(J.rejection===pe&&te(J),J.rejection=ue),Ae===!0?Be=Se:(Oe&&Oe.enter(),Be=Ae(Se),Oe&&(Oe.exit(),Ve=!0)),Be===De.promise?xe(q("Promise-chain cycle")):(Ne=We(Be))?l(Ne,Be,$e,xe):$e(Be)):xe(Se)}catch(qe){Oe&&!Ve&&Oe.exit(),xe(qe)}}J.reactions=[],J.notified=!1,he&&!J.rejection&&de(J)})}},fe=function(J,he,ce){var Se,ke;M?(Se=be.createEvent("Event"),Se.promise=he,Se.reason=ce,Se.initEvent(J,!1,!0),o.dispatchEvent(Se)):Se={promise:he,reason:ce},!g&&(ke=o["on"+J])?ke(Se):J===c&&p("Unhandled promise rejection",ce)},de=function(J){l(d,o,function(){var he=J.facade,ce=J.value,Se=$(J),ke;if(Se&&(ke=I(function(){K?Ce.emit("unhandledRejection",ce,he):fe(c,he,ce)}),J.rejection=K||$(J)?pe:ue,ke.error))throw ke.value})},$=function(J){return J.rejection!==ue&&!J.parent},te=function(J){l(d,o,function(){var he=J.facade;K?Ce.emit("rejectionHandled",he):fe(_,he,J.value)})},Z=function(J,he,ce){return function(Se){J(he,Se,ce)}},oe=function(J,he,ce){J.done||(J.done=!0,ce&&(J=ce),J.value=he,J.state=ee,Ue(J,!0))},ne=function(J,he,ce){if(!J.done){J.done=!0,ce&&(J=ce);try{if(J.facade===he)throw q("Promise can't be resolved itself");var Se=We(he);Se?b(function(){var ke={done:!1};try{l(Se,he,Z(ne,ke,J),Z(oe,ke,J))}catch(Le){oe(ke,Le,J)}}):(J.value=he,J.state=U,Ue(J,!1))}catch(ke){oe({done:!1},ke,J)}}};if(Ie&&(X=function(he){D(this,re),R(he),l(ve,this);var ce=F(this);try{he(Z(ne,ce),Z(oe,ce))}catch(Se){oe(ce,Se)}},re=X.prototype,ve=function(he){m(this,{type:Y,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:B,value:void 0})},ve.prototype=w(re,{then:function(he,ce){var Se=E(this),ke=Se.reactions,Le=Ee(f(this,X));return Le.ok=P(he)?he:!0,Le.fail=P(ce)&&ce,Le.domain=K?Ce.domain:void 0,Se.parent=!0,ke[ke.length]=Le,Se.state!=B&&Ue(Se,!1),Le.promise},catch:function(J){return this.then(void 0,J)}}),_e=function(){var J=new ve,he=F(J);this.promise=J,this.resolve=Z(ne,he),this.reject=Z(oe,he)},C.f=Ee=function(J){return J===X||J===Re?new _e(J):G(J)},!a&&P(h)&&L!==Object.prototype)){we=L.then,ge||(S(L,"then",function(he,ce){var Se=this;return new X(function(ke,Le){l(we,Se,ke,Le)}).then(he,ce)},{unsafe:!0}),S(L,"catch",re.catch,{unsafe:!0}));try{delete L.constructor}catch{}x&&x(L,re)}t({global:!0,wrap:!0,forced:Ie},{Promise:X}),N(X,Y,!1,!0),T(Y),Re=u(Y),t({target:Y,stat:!0,forced:Ie},{reject:function(he){var ce=Ee(this);return l(ce.reject,void 0,he),ce.promise}}),t({target:Y,stat:!0,forced:a||Ie},{resolve:function(he){return y(a&&this===Re?X:this,he)}}),t({target:Y,stat:!0,forced:Fe},{all:function(he){var ce=this,Se=Ee(ce),ke=Se.resolve,Le=Se.reject,De=I(function(){var Ae=R(ce.resolve),$e=[],xe=0,Oe=1;z(he,function(Be){var Ne=xe++,Ve=!1;Oe++,l(Ae,ce,Be).then(function(qe){Ve||(Ve=!0,$e[Ne]=qe,--Oe||ke($e))},Le)}),--Oe||ke($e)});return De.error&&Le(De.value),Se.promise},race:function(he){var ce=this,Se=Ee(ce),ke=Se.reject,Le=I(function(){var De=R(ce.resolve);z(he,function(Ae){l(De,ce,Ae).then(Se.resolve,ke)})});return Le.error&&ke(Le.value),Se.promise}})},(i,n,e)=>{var t=e(10);i.exports=t.Promise},(i,n,e)=>{var t=e(50);i.exports=function(a,o,u){for(var l in o)t(a,l,o[l],u);return a}},(i,n,e)=>{var t=e(27),a=e(48),o=e(37),u=e(12),l=o("species");i.exports=function(h){var S=t(h),w=a.f;u&&S&&!S[l]&&w(S,l,{configurable:!0,get:function(){return this}})}},(i,n,e)=>{var t=e(10),a=e(28),o=t.TypeError;i.exports=function(u,l){if(a(l,u))return u;throw o("Incorrect invocation")}},(i,n,e)=>{var t=e(37),a=t("iterator"),o=!1;try{var u=0,l={next:function(){return{done:!!u++}},return:function(){o=!0}};l[a]=function(){return this},Array.from(l,function(){throw 2})}catch{}i.exports=function(h,S){if(!S&&!o)return!1;var w=!1;try{var x={};x[a]=function(){return{next:function(){return{done:w=!0}}}},h(x)}catch{}return w}},(i,n,e)=>{var t=e(49),a=e(114),o=e(37),u=o("species");i.exports=function(l,h){var S=t(l).constructor,w;return S===void 0||(w=t(S)[u])==null?h:a(w)}},(i,n,e)=>{var t=e(10),a=e(115),o=e(35),u=t.TypeError;i.exports=function(l){if(a(l))return l;throw u(o(l)+" is not a constructor")}},(i,n,e)=>{var t=e(19),a=e(13),o=e(25),u=e(92),l=e(27),h=e(51),S=function(){},w=[],x=l("Reflect","construct"),N=/^\s*(?:class|function)\b/,T=t(N.exec),R=!N.exec(S),P=function(D){if(!o(D))return!1;try{return x(S,w,D),!0}catch{return!1}},A=function(D){if(!o(D))return!1;switch(u(D)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return R||!!T(N,h(D))};i.exports=!x||a(function(){var D;return P(P.call)||!P(Object)||!P(function(){D=!0})||D})?A:P},(i,n,e)=>{var t=e(10),a=e(117),o=e(88),u=e(25),l=e(42),h=e(13),S=e(76),w=e(118),x=e(46),N=e(119),T=e(120),R=t.setImmediate,P=t.clearImmediate,A=t.process,D=t.Dispatch,k=t.Function,z=t.MessageChannel,v=t.String,f=0,d={},b="onreadystatechange",y,p,C,I;try{y=t.location}catch{}var j=function(K){if(l(d,K)){var ie=d[K];delete d[K],ie()}},W=function(K){return function(){j(K)}},H=function(K){j(K.data)},Q=function(K){t.postMessage(v(K),y.protocol+"//"+y.host)};(!R||!P)&&(R=function(ie){var V=w(arguments,1);return d[++f]=function(){a(u(ie)?ie:k(ie),void 0,V)},p(f),f},P=function(ie){delete d[ie]},T?p=function(K){A.nextTick(W(K))}:D&&D.now?p=function(K){D.now(W(K))}:z&&!N?(C=new z,I=C.port2,C.port1.onmessage=H,p=o(I.postMessage,I)):t.addEventListener&&u(t.postMessage)&&!t.importScripts&&y&&y.protocol!=="file:"&&!h(Q)?(p=Q,t.addEventListener("message",H,!1)):b in x("script")?p=function(K){S.appendChild(x("script"))[b]=function(){S.removeChild(this),j(K)}}:p=function(K){setTimeout(W(K),0)}),i.exports={set:R,clear:P}},i=>{var n=Function.prototype,e=n.apply,t=n.bind,a=n.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(t?a.bind(e):function(){return a.apply(e,arguments)})},(i,n,e)=>{var t=e(19);i.exports=t([].slice)},(i,n,e)=>{var t=e(32);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(t)},(i,n,e)=>{var t=e(20),a=e(10);i.exports=t(a.process)=="process"},(i,n,e)=>{var t=e(10),a=e(88),o=e(11).f,u=e(116).set,l=e(119),h=e(122),S=e(123),w=e(120),x=t.MutationObserver||t.WebKitMutationObserver,N=t.document,T=t.process,R=t.Promise,P=o(t,"queueMicrotask"),A=P&&P.value,D,k,z,v,f,d,b,y;A||(D=function(){var p,C;for(w&&(p=T.domain)&&p.exit();k;){C=k.fn,k=k.next;try{C()}catch(I){throw k?v():z=void 0,I}}z=void 0,p&&p.enter()},!l&&!w&&!S&&x&&N?(f=!0,d=N.createTextNode(""),new x(D).observe(d,{characterData:!0}),v=function(){d.data=f=!f}):!h&&R&&R.resolve?(b=R.resolve(void 0),b.constructor=R,y=a(b.then,b),v=function(){y(D)}):w?v=function(){T.nextTick(D)}:(u=a(u,t),v=function(){u(D)})),i.exports=A||function(p){var C={fn:p,next:void 0};z&&(z.next=C),k||(k=C,v()),z=C}},(i,n,e)=>{var t=e(32),a=e(10);i.exports=/ipad|iphone|ipod/i.test(t)&&a.Pebble!==void 0},(i,n,e)=>{var t=e(32);i.exports=/web0s(?!.*chrome)/i.test(t)},(i,n,e)=>{var t=e(49),a=e(24),o=e(125);i.exports=function(u,l){if(t(u),a(l)&&l.constructor===u)return l;var h=o.f(u),S=h.resolve;return S(l),h.promise}},(i,n,e)=>{var t=e(34),a=function(o){var u,l;this.promise=new o(function(h,S){if(u!==void 0||l!==void 0)throw TypeError("Bad Promise constructor");u=h,l=S}),this.resolve=t(u),this.reject=t(l)};i.exports.f=function(o){return new a(o)}},(i,n,e)=>{var t=e(10);i.exports=function(a,o){var u=t.console;u&&u.error&&(arguments.length==1?u.error(a):u.error(a,o))}},i=>{i.exports=function(n){try{return{error:!1,value:n()}}catch(e){return{error:!0,value:e}}}},i=>{i.exports=typeof window=="object"},(i,n,e)=>{var t=e(9),a=e(14),o=e(34),u=e(125),l=e(127),h=e(87);t({target:"Promise",stat:!0},{allSettled:function(w){var x=this,N=u.f(x),T=N.resolve,R=N.reject,P=l(function(){var A=o(x.resolve),D=[],k=0,z=1;h(w,function(v){var f=k++,d=!1;z++,a(A,x,v).then(function(b){d||(d=!0,D[f]={status:"fulfilled",value:b},--z||T(D))},function(b){d||(d=!0,D[f]={status:"rejected",reason:b},--z||T(D))})}),--z||T(D)});return P.error&&R(P.value),N.promise}})},(i,n,e)=>{var t=e(9),a=e(34),o=e(27),u=e(14),l=e(125),h=e(127),S=e(87),w="No one promise resolved";t({target:"Promise",stat:!0},{any:function(N){var T=this,R=o("AggregateError"),P=l.f(T),A=P.resolve,D=P.reject,k=h(function(){var z=a(T.resolve),v=[],f=0,d=1,b=!1;S(N,function(y){var p=f++,C=!1;d++,u(z,T,y).then(function(I){C||b||(b=!0,A(I))},function(I){C||b||(C=!0,v[p]=I,--d||D(new R(v,w)))})}),--d||D(new R(v,w))});return k.error&&D(k.value),P.promise}})},(i,n,e)=>{var t=e(9),a=e(39),o=e(108),u=e(13),l=e(27),h=e(25),S=e(113),w=e(124),x=e(50),N=!!o&&u(function(){o.prototype.finally.call({then:function(){}},function(){})});if(t({target:"Promise",proto:!0,real:!0,forced:N},{finally:function(R){var P=S(this,l("Promise")),A=h(R);return this.then(A?function(D){return w(P,R()).then(function(){return D})}:R,A?function(D){return w(P,R()).then(function(){throw D})}:R)}}),!a&&h(o)){var T=l("Promise").prototype.finally;o.prototype.finally!==T&&x(o.prototype,"finally",T,{unsafe:!0})}},(i,n,e)=>{var t=e(133).charAt,a=e(103),o=e(52),u=e(78),l="String Iterator",h=o.set,S=o.getterFor(l);u(String,"String",function(w){h(this,{type:l,string:a(w),index:0})},function(){var x=S(this),N=x.string,T=x.index,R;return T>=N.length?{value:void 0,done:!0}:(R=t(N,T),x.index+=R.length,{value:R,done:!1})})},(i,n,e)=>{var t=e(19),a=e(63),o=e(103),u=e(21),l=t("".charAt),h=t("".charCodeAt),S=t("".slice),w=function(x){return function(N,T){var R=o(u(N)),P=a(T),A=R.length,D,k;return P<0||P>=A?x?"":void 0:(D=h(R,P),D<55296||D>56319||P+1===A||(k=h(R,P+1))<56320||k>57343?x?l(R,P):D:x?S(R,P,P+2):(D-55296<<10)+(k-56320)+65536)}};i.exports={codeAt:w(!1),charAt:w(!0)}},function(i,n){(function(e,t){t(n)})(this,function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(r){return"Symbol("+r+")"};function a(){}function o(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal}var u=o();function l(r){return typeof r=="object"&&r!==null||typeof r=="function"}var h=a,S=Promise,w=Promise.prototype.then,x=Promise.resolve.bind(S),N=Promise.reject.bind(S);function T(r){return new S(r)}function R(r){return x(r)}function P(r){return N(r)}function A(r,s,O){return w.call(r,s,O)}function D(r,s,O){A(A(r,s,O),void 0,h)}function k(r,s){D(r,s)}function z(r,s){D(r,void 0,s)}function v(r,s,O){return A(r,s,O)}function f(r){A(r,void 0,h)}var d=function(){var r=u&&u.queueMicrotask;if(typeof r=="function")return r;var s=R(void 0);return function(O){return A(s,O)}}();function b(r,s,O){if(typeof r!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(r,s,O)}function y(r,s,O){try{return R(b(r,s,O))}catch(ae){return P(ae)}}var p=16384,C=function(){function r(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(r.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),r.prototype.push=function(s){var O=this._back,ae=O;O._elements.length===p-1&&(ae={_elements:[],_next:void 0}),O._elements.push(s),ae!==O&&(this._back=ae,O._next=ae),++this._size},r.prototype.shift=function(){var s=this._front,O=s,ae=this._cursor,ye=ae+1,Pe=s._elements,Me=Pe[ae];return ye===p&&(O=s._next,ye=0),--this._size,this._cursor=ye,s!==O&&(this._front=O),Pe[ae]=void 0,Me},r.prototype.forEach=function(s){for(var O=this._cursor,ae=this._front,ye=ae._elements;(O!==ye.length||ae._next!==void 0)&&!(O===ye.length&&(ae=ae._next,ye=ae._elements,O=0,ye.length===0));)s(ye[O]),++O},r.prototype.peek=function(){var s=this._front,O=this._cursor;return s._elements[O]},r}();function I(r,s){r._ownerReadableStream=s,s._reader=r,s._state==="readable"?Q(r):s._state==="closed"?ie(r):K(r,s._storedError)}function j(r,s){var O=r._ownerReadableStream;return At(O,s)}function W(r){r._ownerReadableStream._state==="readable"?V(r,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Y(r,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),r._ownerReadableStream._reader=void 0,r._ownerReadableStream=void 0}function H(r){return new TypeError("Cannot "+r+" a stream using a released reader")}function Q(r){r._closedPromise=T(function(s,O){r._closedPromise_resolve=s,r._closedPromise_reject=O})}function K(r,s){Q(r),V(r,s)}function ie(r){Q(r),F(r)}function V(r,s){r._closedPromise_reject!==void 0&&(f(r._closedPromise),r._closedPromise_reject(s),r._closedPromise_resolve=void 0,r._closedPromise_reject=void 0)}function Y(r,s){K(r,s)}function F(r){r._closedPromise_resolve!==void 0&&(r._closedPromise_resolve(void 0),r._closedPromise_resolve=void 0,r._closedPromise_reject=void 0)}var m=t("[[AbortSteps]]"),E=t("[[ErrorSteps]]"),L=t("[[CancelSteps]]"),X=t("[[PullSteps]]"),re=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},q=Math.trunc||function(r){return r<0?Math.ceil(r):Math.floor(r)};function be(r){return typeof r=="object"||typeof r=="function"}function Ce(r,s){if(r!==void 0&&!be(r))throw new TypeError(s+" is not an object.")}function Ee(r,s){if(typeof r!="function")throw new TypeError(s+" is not a function.")}function G(r){return typeof r=="object"&&r!==null||typeof r=="function"}function M(r,s){if(!G(r))throw new TypeError(s+" is not an object.")}function g(r,s,O){if(r===void 0)throw new TypeError("Parameter "+s+" is required in '"+O+"'.")}function c(r,s,O){if(r===void 0)throw new TypeError(s+" is required in '"+O+"'.")}function _(r){return Number(r)}function B(r){return r===0?0:r}function U(r){return B(q(r))}function ee(r,s){var O=0,ae=Number.MAX_SAFE_INTEGER,ye=Number(r);if(ye=B(ye),!re(ye))throw new TypeError(s+" is not a finite number");if(ye=U(ye),ye<O||ye>ae)throw new TypeError(s+" is outside the accepted range of "+O+" to "+ae+", inclusive");return!re(ye)||ye===0?0:ye}function ue(r,s){if(!zt(r))throw new TypeError(s+" is not a ReadableStream.")}function pe(r){return new we(r)}function ge(r,s){r._reader._readRequests.push(s)}function ve(r,s,O){var ae=r._reader,ye=ae._readRequests.shift();O?ye._closeSteps():ye._chunkSteps(s)}function _e(r){return r._reader._readRequests.length}function Re(r){var s=r._reader;return!(s===void 0||!Ie(s))}var we=function(){function r(s){if(g(s,1,"ReadableStreamDefaultReader"),ue(s,"First parameter"),Ut(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");I(this,s),this._readRequests=new C}return Object.defineProperty(r.prototype,"closed",{get:function(){return Ie(this)?this._closedPromise:P(We("closed"))},enumerable:!1,configurable:!0}),r.prototype.cancel=function(s){return s===void 0&&(s=void 0),Ie(this)?this._ownerReadableStream===void 0?P(H("cancel")):j(this,s):P(We("cancel"))},r.prototype.read=function(){if(!Ie(this))return P(We("read"));if(this._ownerReadableStream===void 0)return P(H("read from"));var s,O,ae=T(function(Pe,Me){s=Pe,O=Me}),ye={_chunkSteps:function(Pe){return s({value:Pe,done:!1})},_closeSteps:function(){return s({value:void 0,done:!0})},_errorSteps:function(Pe){return O(Pe)}};return Fe(this,ye),ae},r.prototype.releaseLock=function(){if(!Ie(this))throw We("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");W(this)}},r}();Object.defineProperties(we.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(we.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ie(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_readRequests")?!1:r instanceof we}function Fe(r,s){var O=r._ownerReadableStream;O._disturbed=!0,O._state==="closed"?s._closeSteps():O._state==="errored"?s._errorSteps(O._storedError):O._readableStreamController[X](s)}function We(r){return new TypeError("ReadableStreamDefaultReader.prototype."+r+" can only be used on a ReadableStreamDefaultReader")}var Ue,fe;typeof t.asyncIterator=="symbol"&&(fe=(Ue={},Ue[t.asyncIterator]=function(){return this},Ue),Object.defineProperty(fe,t.asyncIterator,{enumerable:!1}));var de=function(){function r(s,O){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=s,this._preventCancel=O}return r.prototype.next=function(){var s=this,O=function(){return s._nextSteps()};return this._ongoingPromise=this._ongoingPromise?v(this._ongoingPromise,O,O):O(),this._ongoingPromise},r.prototype.return=function(s){var O=this,ae=function(){return O._returnSteps(s)};return this._ongoingPromise?v(this._ongoingPromise,ae,ae):ae()},r.prototype._nextSteps=function(){var s=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var O=this._reader;if(O._ownerReadableStream===void 0)return P(H("iterate"));var ae,ye,Pe=T(function(Ge,Xe){ae=Ge,ye=Xe}),Me={_chunkSteps:function(Ge){s._ongoingPromise=void 0,d(function(){return ae({value:Ge,done:!1})})},_closeSteps:function(){s._ongoingPromise=void 0,s._isFinished=!0,W(O),ae({value:void 0,done:!0})},_errorSteps:function(Ge){s._ongoingPromise=void 0,s._isFinished=!0,W(O),ye(Ge)}};return Fe(O,Me),Pe},r.prototype._returnSteps=function(s){if(this._isFinished)return Promise.resolve({value:s,done:!0});this._isFinished=!0;var O=this._reader;if(O._ownerReadableStream===void 0)return P(H("finish iterating"));if(!this._preventCancel){var ae=j(O,s);return W(O),v(ae,function(){return{value:s,done:!0}})}return W(O),R({value:s,done:!0})},r}(),$={next:function(){return Z(this)?this._asyncIteratorImpl.next():P(oe("next"))},return:function(r){return Z(this)?this._asyncIteratorImpl.return(r):P(oe("return"))}};fe!==void 0&&Object.setPrototypeOf($,fe);function te(r,s){var O=pe(r),ae=new de(O,s),ye=Object.create($);return ye._asyncIteratorImpl=ae,ye}function Z(r){if(!l(r)||!Object.prototype.hasOwnProperty.call(r,"_asyncIteratorImpl"))return!1;try{return r._asyncIteratorImpl instanceof de}catch{return!1}}function oe(r){return new TypeError("ReadableStreamAsyncIterator."+r+" can only be used on a ReadableSteamAsyncIterator")}var ne=Number.isNaN||function(r){return r!==r};function J(r){return r.slice()}function he(r,s,O,ae,ye){new Uint8Array(r).set(new Uint8Array(O,ae,ye),s)}function ce(r){return r}function Se(r){return!1}function ke(r,s,O){if(r.slice)return r.slice(s,O);var ae=O-s,ye=new ArrayBuffer(ae);return he(ye,0,r,s,ae),ye}function Le(r){return!(typeof r!="number"||ne(r)||r<0)}function De(r){var s=ke(r.buffer,r.byteOffset,r.byteOffset+r.byteLength);return new Uint8Array(s)}function Ae(r){var s=r._queue.shift();return r._queueTotalSize-=s.size,r._queueTotalSize<0&&(r._queueTotalSize=0),s.value}function $e(r,s,O){if(!Le(O)||O===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");r._queue.push({value:s,size:O}),r._queueTotalSize+=O}function xe(r){var s=r._queue.peek();return s.value}function Oe(r){r._queue=new C,r._queueTotalSize=0}var Be=function(){function r(){throw new TypeError("Illegal constructor")}return Object.defineProperty(r.prototype,"view",{get:function(){if(!qe(this))throw Dt("view");return this._view},enumerable:!1,configurable:!0}),r.prototype.respond=function(s){if(!qe(this))throw Dt("respond");if(g(s,1,"respond"),s=ee(s,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Se(this._view.buffer),st(this._associatedReadableByteStreamController,s)},r.prototype.respondWithNewView=function(s){if(!qe(this))throw Dt("respondWithNewView");if(g(s,1,"respondWithNewView"),!ArrayBuffer.isView(s))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Se(s.buffer),gt(this._associatedReadableByteStreamController,s)},r}();Object.defineProperties(Be.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Ne=function(){function r(){throw new TypeError("Illegal constructor")}return Object.defineProperty(r.prototype,"byobRequest",{get:function(){if(!Ve(this))throw it("byobRequest");return Ye(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"desiredSize",{get:function(){if(!Ve(this))throw it("desiredSize");return at(this)},enumerable:!1,configurable:!0}),r.prototype.close=function(){if(!Ve(this))throw it("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError("The stream (in "+s+" state) is not in the readable state and cannot be closed");ze(this)},r.prototype.enqueue=function(s){if(!Ve(this))throw it("enqueue");if(g(s,1,"enqueue"),!ArrayBuffer.isView(s))throw new TypeError("chunk must be an array buffer view");if(s.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(s.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var O=this._controlledReadableByteStream._state;if(O!=="readable")throw new TypeError("The stream (in "+O+" state) is not in the readable state and cannot be enqueued to");je(this,s)},r.prototype.error=function(s){if(s===void 0&&(s=void 0),!Ve(this))throw it("error");He(this,s)},r.prototype[L]=function(s){nt(this),Oe(this);var O=this._cancelAlgorithm(s);return me(this),O},r.prototype[X]=function(s){var O=this._controlledReadableByteStream;if(this._queueTotalSize>0){var ae=this._queue.shift();this._queueTotalSize-=ae.byteLength,Ft(this);var ye=new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength);s._chunkSteps(ye);return}var Pe=this._autoAllocateChunkSize;if(Pe!==void 0){var Me=void 0;try{Me=new ArrayBuffer(Pe)}catch(Xe){s._errorSteps(Xe);return}var Ge={buffer:Me,bufferByteLength:Pe,byteOffset:0,byteLength:Pe,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Ge)}ge(O,s),Ze(this)},r}();Object.defineProperties(Ne.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ne.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ve(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_controlledReadableByteStream")?!1:r instanceof Ne}function qe(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_associatedReadableByteStreamController")?!1:r instanceof Be}function Ze(r){var s=se(r);if(!!s){if(r._pulling){r._pullAgain=!0;return}r._pulling=!0;var O=r._pullAlgorithm();D(O,function(){r._pulling=!1,r._pullAgain&&(r._pullAgain=!1,Ze(r))},function(ae){He(r,ae)})}}function nt(r){Mt(r),r._pendingPullIntos=new C}function ot(r,s){var O=!1;r._state==="closed"&&(O=!0);var ae=bt(s);s.readerType==="default"?ve(r,ae,O):or(r,ae,O)}function bt(r){var s=r.bytesFilled,O=r.elementSize;return new r.viewConstructor(r.buffer,r.byteOffset,s/O)}function vt(r,s,O,ae){r._queue.push({buffer:s,byteOffset:O,byteLength:ae}),r._queueTotalSize+=ae}function xt(r,s){var O=s.elementSize,ae=s.bytesFilled-s.bytesFilled%O,ye=Math.min(r._queueTotalSize,s.byteLength-s.bytesFilled),Pe=s.bytesFilled+ye,Me=Pe-Pe%O,Ge=ye,Xe=!1;Me>ae&&(Ge=Me-s.bytesFilled,Xe=!0);for(var Ke=r._queue;Ge>0;){var Je=Ke.peek(),et=Math.min(Ge,Je.byteLength),dt=s.byteOffset+s.bytesFilled;he(s.buffer,dt,Je.buffer,Je.byteOffset,et),Je.byteLength===et?Ke.shift():(Je.byteOffset+=et,Je.byteLength-=et),r._queueTotalSize-=et,Xt(r,et,s),Ge-=et}return Xe}function Xt(r,s,O){O.bytesFilled+=s}function Ft(r){r._queueTotalSize===0&&r._closeRequested?(me(r),hr(r._controlledReadableByteStream)):Ze(r)}function Mt(r){r._byobRequest!==null&&(r._byobRequest._associatedReadableByteStreamController=void 0,r._byobRequest._view=null,r._byobRequest=null)}function Lt(r){for(;r._pendingPullIntos.length>0;){if(r._queueTotalSize===0)return;var s=r._pendingPullIntos.peek();xt(r,s)&&(Te(r),ot(r._controlledReadableByteStream,s))}}function Kt(r,s,O){var ae=r._controlledReadableByteStream,ye=1;s.constructor!==DataView&&(ye=s.constructor.BYTES_PER_ELEMENT);var Pe=s.constructor,Me=s.buffer,Ge={buffer:Me,bufferByteLength:Me.byteLength,byteOffset:s.byteOffset,byteLength:s.byteLength,bytesFilled:0,elementSize:ye,viewConstructor:Pe,readerType:"byob"};if(r._pendingPullIntos.length>0){r._pendingPullIntos.push(Ge),Vt(ae,O);return}if(ae._state==="closed"){var Xe=new Pe(Ge.buffer,Ge.byteOffset,0);O._closeSteps(Xe);return}if(r._queueTotalSize>0){if(xt(r,Ge)){var Ke=bt(Ge);Ft(r),O._chunkSteps(Ke);return}if(r._closeRequested){var Je=new TypeError("Insufficient bytes to fill elements in the given buffer");He(r,Je),O._errorSteps(Je);return}}r._pendingPullIntos.push(Ge),Vt(ae,O),Ze(r)}function Rt(r,s){var O=r._controlledReadableByteStream;if(Ht(O))for(;Zt(O)>0;){var ae=Te(r);ot(O,ae)}}function Ot(r,s,O){if(Xt(r,s,O),!(O.bytesFilled<O.elementSize)){Te(r);var ae=O.bytesFilled%O.elementSize;if(ae>0){var ye=O.byteOffset+O.bytesFilled,Pe=ke(O.buffer,ye-ae,ye);vt(r,Pe,0,Pe.byteLength)}O.bytesFilled-=ae,ot(r._controlledReadableByteStream,O),Lt(r)}}function le(r,s){var O=r._pendingPullIntos.peek();Mt(r);var ae=r._controlledReadableByteStream._state;ae==="closed"?Rt(r):Ot(r,s,O),Ze(r)}function Te(r){var s=r._pendingPullIntos.shift();return s}function se(r){var s=r._controlledReadableByteStream;if(s._state!=="readable"||r._closeRequested||!r._started)return!1;if(Re(s)&&_e(s)>0||Ht(s)&&Zt(s)>0)return!0;var O=at(r);return O>0}function me(r){r._pullAlgorithm=void 0,r._cancelAlgorithm=void 0}function ze(r){var s=r._controlledReadableByteStream;if(!(r._closeRequested||s._state!=="readable")){if(r._queueTotalSize>0){r._closeRequested=!0;return}if(r._pendingPullIntos.length>0){var O=r._pendingPullIntos.peek();if(O.bytesFilled>0){var ae=new TypeError("Insufficient bytes to fill elements in the given buffer");throw He(r,ae),ae}}me(r),hr(s)}}function je(r,s){var O=r._controlledReadableByteStream;if(!(r._closeRequested||O._state!=="readable")){var ae=s.buffer,ye=s.byteOffset,Pe=s.byteLength,Me=ae;if(r._pendingPullIntos.length>0){var Ge=r._pendingPullIntos.peek();Se(Ge.buffer),Ge.buffer=Ge.buffer}if(Mt(r),Re(O))if(_e(O)===0)vt(r,Me,ye,Pe);else{r._pendingPullIntos.length>0&&Te(r);var Xe=new Uint8Array(Me,ye,Pe);ve(O,Xe,!1)}else Ht(O)?(vt(r,Me,ye,Pe),Lt(r)):vt(r,Me,ye,Pe);Ze(r)}}function He(r,s){var O=r._controlledReadableByteStream;O._state==="readable"&&(nt(r),Oe(r),me(r),Rn(O,s))}function Ye(r){if(r._byobRequest===null&&r._pendingPullIntos.length>0){var s=r._pendingPullIntos.peek(),O=new Uint8Array(s.buffer,s.byteOffset+s.bytesFilled,s.byteLength-s.bytesFilled),ae=Object.create(Be.prototype);St(ae,r,O),r._byobRequest=ae}return r._byobRequest}function at(r){var s=r._controlledReadableByteStream._state;return s==="errored"?null:s==="closed"?0:r._strategyHWM-r._queueTotalSize}function st(r,s){var O=r._pendingPullIntos.peek(),ae=r._controlledReadableByteStream._state;if(ae==="closed"){if(s!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(s===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(O.bytesFilled+s>O.byteLength)throw new RangeError("bytesWritten out of range")}O.buffer=O.buffer,le(r,s)}function gt(r,s){var O=r._pendingPullIntos.peek(),ae=r._controlledReadableByteStream._state;if(ae==="closed"){if(s.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(s.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(O.byteOffset+O.bytesFilled!==s.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(O.bufferByteLength!==s.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(O.bytesFilled+s.byteLength>O.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var ye=s.byteLength;O.buffer=s.buffer,le(r,ye)}function ht(r,s,O,ae,ye,Pe,Me){s._controlledReadableByteStream=r,s._pullAgain=!1,s._pulling=!1,s._byobRequest=null,s._queue=s._queueTotalSize=void 0,Oe(s),s._closeRequested=!1,s._started=!1,s._strategyHWM=Pe,s._pullAlgorithm=ae,s._cancelAlgorithm=ye,s._autoAllocateChunkSize=Me,s._pendingPullIntos=new C,r._readableStreamController=s;var Ge=O();D(R(Ge),function(){s._started=!0,Ze(s)},function(Xe){He(s,Xe)})}function Tt(r,s,O){var ae=Object.create(Ne.prototype),ye=function(){},Pe=function(){return R(void 0)},Me=function(){return R(void 0)};s.start!==void 0&&(ye=function(){return s.start(ae)}),s.pull!==void 0&&(Pe=function(){return s.pull(ae)}),s.cancel!==void 0&&(Me=function(Xe){return s.cancel(Xe)});var Ge=s.autoAllocateChunkSize;if(Ge===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ht(r,ae,ye,Pe,Me,O,Ge)}function St(r,s,O){r._associatedReadableByteStreamController=s,r._view=O}function Dt(r){return new TypeError("ReadableStreamBYOBRequest.prototype."+r+" can only be used on a ReadableStreamBYOBRequest")}function it(r){return new TypeError("ReadableByteStreamController.prototype."+r+" can only be used on a ReadableByteStreamController")}function Gt(r){return new _t(r)}function Vt(r,s){r._reader._readIntoRequests.push(s)}function or(r,s,O){var ae=r._reader,ye=ae._readIntoRequests.shift();O?ye._closeSteps(s):ye._chunkSteps(s)}function Zt(r){return r._reader._readIntoRequests.length}function Ht(r){var s=r._reader;return!(s===void 0||!ft(s))}var _t=function(){function r(s){if(g(s,1,"ReadableStreamBYOBReader"),ue(s,"First parameter"),Ut(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ve(s._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");I(this,s),this._readIntoRequests=new C}return Object.defineProperty(r.prototype,"closed",{get:function(){return ft(this)?this._closedPromise:P(gr("closed"))},enumerable:!1,configurable:!0}),r.prototype.cancel=function(s){return s===void 0&&(s=void 0),ft(this)?this._ownerReadableStream===void 0?P(H("cancel")):j(this,s):P(gr("cancel"))},r.prototype.read=function(s){if(!ft(this))return P(gr("read"));if(!ArrayBuffer.isView(s))return P(new TypeError("view must be an array buffer view"));if(s.byteLength===0)return P(new TypeError("view must have non-zero byteLength"));if(s.buffer.byteLength===0)return P(new TypeError("view's buffer must have non-zero byteLength"));if(Se(s.buffer),this._ownerReadableStream===void 0)return P(H("read from"));var O,ae,ye=T(function(Me,Ge){O=Me,ae=Ge}),Pe={_chunkSteps:function(Me){return O({value:Me,done:!1})},_closeSteps:function(Me){return O({value:Me,done:!0})},_errorSteps:function(Me){return ae(Me)}};return Nt(this,s,Pe),ye},r.prototype.releaseLock=function(){if(!ft(this))throw gr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");W(this)}},r}();Object.defineProperties(_t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_t.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function ft(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_readIntoRequests")?!1:r instanceof _t}function Nt(r,s,O){var ae=r._ownerReadableStream;ae._disturbed=!0,ae._state==="errored"?O._errorSteps(ae._storedError):Kt(ae._readableStreamController,s,O)}function gr(r){return new TypeError("ReadableStreamBYOBReader.prototype."+r+" can only be used on a ReadableStreamBYOBReader")}function sr(r,s){var O=r.highWaterMark;if(O===void 0)return s;if(ne(O)||O<0)throw new RangeError("Invalid highWaterMark");return O}function mr(r){var s=r.size;return s||function(){return 1}}function yr(r,s){Ce(r,s);var O=r==null?void 0:r.highWaterMark,ae=r==null?void 0:r.size;return{highWaterMark:O===void 0?void 0:_(O),size:ae===void 0?void 0:Un(ae,s+" has member 'size' that")}}function Un(r,s){return Ee(r,s),function(O){return _(r(O))}}function $n(r,s){Ce(r,s);var O=r==null?void 0:r.abort,ae=r==null?void 0:r.close,ye=r==null?void 0:r.start,Pe=r==null?void 0:r.type,Me=r==null?void 0:r.write;return{abort:O===void 0?void 0:jn(O,r,s+" has member 'abort' that"),close:ae===void 0?void 0:Gn(ae,r,s+" has member 'close' that"),start:ye===void 0?void 0:Vn(ye,r,s+" has member 'start' that"),write:Me===void 0?void 0:Hn(Me,r,s+" has member 'write' that"),type:Pe}}function jn(r,s,O){return Ee(r,O),function(ae){return y(r,s,[ae])}}function Gn(r,s,O){return Ee(r,O),function(){return y(r,s,[])}}function Vn(r,s,O){return Ee(r,O),function(ae){return b(r,s,[ae])}}function Hn(r,s,O){return Ee(r,O),function(ae,ye){return y(r,s,[ae,ye])}}function en(r,s){if(!Jt(r))throw new TypeError(s+" is not a WritableStream.")}function Qn(r){if(typeof r!="object"||r===null)return!1;try{return typeof r.aborted=="boolean"}catch{return!1}}var qn=typeof AbortController=="function";function Yn(){if(qn)return new AbortController}var lr=function(){function r(s,O){s===void 0&&(s={}),O===void 0&&(O={}),s===void 0?s=null:M(s,"First parameter");var ae=yr(O,"Second parameter"),ye=$n(s,"First parameter");rn(this);var Pe=ye.type;if(Pe!==void 0)throw new RangeError("Invalid type is specified");var Me=mr(ae),Ge=sr(ae,1);ua(this,ye,Ge,Me)}return Object.defineProperty(r.prototype,"locked",{get:function(){if(!Jt(this))throw Cr("locked");return er(this)},enumerable:!1,configurable:!0}),r.prototype.abort=function(s){return s===void 0&&(s=void 0),Jt(this)?er(this)?P(new TypeError("Cannot abort a stream that already has a writer")):br(this,s):P(Cr("abort"))},r.prototype.close=function(){return Jt(this)?er(this)?P(new TypeError("Cannot close a stream that already has a writer")):Pt(this)?P(new TypeError("Cannot close an already-closing stream")):nn(this):P(Cr("close"))},r.prototype.getWriter=function(){if(!Jt(this))throw Cr("getWriter");return tn(this)},r}();Object.defineProperties(lr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(lr.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function tn(r){return new ur(r)}function Xn(r,s,O,ae,ye,Pe){ye===void 0&&(ye=1),Pe===void 0&&(Pe=function(){return 1});var Me=Object.create(lr.prototype);rn(Me);var Ge=Object.create(tr.prototype);return fn(Me,Ge,r,s,O,ae,ye,Pe),Me}function rn(r){r._state="writable",r._storedError=void 0,r._writer=void 0,r._writableStreamController=void 0,r._writeRequests=new C,r._inFlightWriteRequest=void 0,r._closeRequest=void 0,r._inFlightCloseRequest=void 0,r._pendingAbortRequest=void 0,r._backpressure=!1}function Jt(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_writableStreamController")?!1:r instanceof lr}function er(r){return r._writer!==void 0}function br(r,s){var O;if(r._state==="closed"||r._state==="errored")return R(void 0);r._writableStreamController._abortReason=s,(O=r._writableStreamController._abortController)===null||O===void 0||O.abort();var ae=r._state;if(ae==="closed"||ae==="errored")return R(void 0);if(r._pendingAbortRequest!==void 0)return r._pendingAbortRequest._promise;var ye=!1;ae==="erroring"&&(ye=!0,s=void 0);var Pe=T(function(Me,Ge){r._pendingAbortRequest={_promise:void 0,_resolve:Me,_reject:Ge,_reason:s,_wasAlreadyErroring:ye}});return r._pendingAbortRequest._promise=Pe,ye||zr(r,s),Pe}function nn(r){var s=r._state;if(s==="closed"||s==="errored")return P(new TypeError("The stream (in "+s+" state) is not in the writable state and cannot be closed"));var O=T(function(ye,Pe){var Me={_resolve:ye,_reject:Pe};r._closeRequest=Me}),ae=r._writer;return ae!==void 0&&r._backpressure&&s==="writable"&&Yr(ae),ca(r._writableStreamController),O}function Kn(r){var s=T(function(O,ae){var ye={_resolve:O,_reject:ae};r._writeRequests.push(ye)});return s}function Wr(r,s){var O=r._state;if(O==="writable"){zr(r,s);return}Ur(r)}function zr(r,s){var O=r._writableStreamController;r._state="erroring",r._storedError=s;var ae=r._writer;ae!==void 0&&sn(ae,s),!ra(r)&&O._started&&Ur(r)}function Ur(r){r._state="errored",r._writableStreamController[E]();var s=r._storedError;if(r._writeRequests.forEach(function(ye){ye._reject(s)}),r._writeRequests=new C,r._pendingAbortRequest===void 0){Sr(r);return}var O=r._pendingAbortRequest;if(r._pendingAbortRequest=void 0,O._wasAlreadyErroring){O._reject(s),Sr(r);return}var ae=r._writableStreamController[m](O._reason);D(ae,function(){O._resolve(),Sr(r)},function(ye){O._reject(ye),Sr(r)})}function Zn(r){r._inFlightWriteRequest._resolve(void 0),r._inFlightWriteRequest=void 0}function Jn(r,s){r._inFlightWriteRequest._reject(s),r._inFlightWriteRequest=void 0,Wr(r,s)}function ea(r){r._inFlightCloseRequest._resolve(void 0),r._inFlightCloseRequest=void 0;var s=r._state;s==="erroring"&&(r._storedError=void 0,r._pendingAbortRequest!==void 0&&(r._pendingAbortRequest._resolve(),r._pendingAbortRequest=void 0)),r._state="closed";var O=r._writer;O!==void 0&&vn(O)}function ta(r,s){r._inFlightCloseRequest._reject(s),r._inFlightCloseRequest=void 0,r._pendingAbortRequest!==void 0&&(r._pendingAbortRequest._reject(s),r._pendingAbortRequest=void 0),Wr(r,s)}function Pt(r){return!(r._closeRequest===void 0&&r._inFlightCloseRequest===void 0)}function ra(r){return!(r._inFlightWriteRequest===void 0&&r._inFlightCloseRequest===void 0)}function na(r){r._inFlightCloseRequest=r._closeRequest,r._closeRequest=void 0}function aa(r){r._inFlightWriteRequest=r._writeRequests.shift()}function Sr(r){r._closeRequest!==void 0&&(r._closeRequest._reject(r._storedError),r._closeRequest=void 0);var s=r._writer;s!==void 0&&Qr(s,r._storedError)}function $r(r,s){var O=r._writer;O!==void 0&&s!==r._backpressure&&(s?ma(O):Yr(O)),r._backpressure=s}var ur=function(){function r(s){if(g(s,1,"WritableStreamDefaultWriter"),en(s,"First parameter"),er(s))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=s,s._writer=this;var O=s._state;if(O==="writable")!Pt(s)&&s._backpressure?Tr(this):gn(this),Rr(this);else if(O==="erroring")qr(this,s._storedError),Rr(this);else if(O==="closed")gn(this),va(this);else{var ae=s._storedError;qr(this,ae),pn(this,ae)}}return Object.defineProperty(r.prototype,"closed",{get:function(){return Qt(this)?this._closedPromise:P(qt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"desiredSize",{get:function(){if(!Qt(this))throw qt("desiredSize");if(this._ownerWritableStream===void 0)throw cr("desiredSize");return la(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ready",{get:function(){return Qt(this)?this._readyPromise:P(qt("ready"))},enumerable:!1,configurable:!0}),r.prototype.abort=function(s){return s===void 0&&(s=void 0),Qt(this)?this._ownerWritableStream===void 0?P(cr("abort")):ia(this,s):P(qt("abort"))},r.prototype.close=function(){if(!Qt(this))return P(qt("close"));var s=this._ownerWritableStream;return s===void 0?P(cr("close")):Pt(s)?P(new TypeError("Cannot close an already-closing stream")):an(this)},r.prototype.releaseLock=function(){if(!Qt(this))throw qt("releaseLock");var s=this._ownerWritableStream;s!==void 0&&ln(this)},r.prototype.write=function(s){return s===void 0&&(s=void 0),Qt(this)?this._ownerWritableStream===void 0?P(cr("write to")):un(this,s):P(qt("write"))},r}();Object.defineProperties(ur.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ur.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Qt(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_ownerWritableStream")?!1:r instanceof ur}function ia(r,s){var O=r._ownerWritableStream;return br(O,s)}function an(r){var s=r._ownerWritableStream;return nn(s)}function oa(r){var s=r._ownerWritableStream,O=s._state;return Pt(s)||O==="closed"?R(void 0):O==="errored"?P(s._storedError):an(r)}function sa(r,s){r._closedPromiseState==="pending"?Qr(r,s):ga(r,s)}function sn(r,s){r._readyPromiseState==="pending"?mn(r,s):ya(r,s)}function la(r){var s=r._ownerWritableStream,O=s._state;return O==="errored"||O==="erroring"?null:O==="closed"?0:dn(s._writableStreamController)}function ln(r){var s=r._ownerWritableStream,O=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");sn(r,O),sa(r,O),s._writer=void 0,r._ownerWritableStream=void 0}function un(r,s){var O=r._ownerWritableStream,ae=O._writableStreamController,ye=fa(ae,s);if(O!==r._ownerWritableStream)return P(cr("write to"));var Pe=O._state;if(Pe==="errored")return P(O._storedError);if(Pt(O)||Pe==="closed")return P(new TypeError("The stream is closing or closed and cannot be written to"));if(Pe==="erroring")return P(O._storedError);var Me=Kn(O);return da(ae,s,ye),Me}var cn={},tr=function(){function r(){throw new TypeError("Illegal constructor")}return Object.defineProperty(r.prototype,"abortReason",{get:function(){if(!jr(this))throw Hr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"signal",{get:function(){if(!jr(this))throw Hr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),r.prototype.error=function(s){if(s===void 0&&(s=void 0),!jr(this))throw Hr("error");var O=this._controlledWritableStream._state;O==="writable"&&hn(this,s)},r.prototype[m]=function(s){var O=this._abortAlgorithm(s);return _r(this),O},r.prototype[E]=function(){Oe(this)},r}();Object.defineProperties(tr.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(tr.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function jr(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_controlledWritableStream")?!1:r instanceof tr}function fn(r,s,O,ae,ye,Pe,Me,Ge){s._controlledWritableStream=r,r._writableStreamController=s,s._queue=void 0,s._queueTotalSize=void 0,Oe(s),s._abortReason=void 0,s._abortController=Yn(),s._started=!1,s._strategySizeAlgorithm=Ge,s._strategyHWM=Me,s._writeAlgorithm=ae,s._closeAlgorithm=ye,s._abortAlgorithm=Pe;var Xe=Vr(s);$r(r,Xe);var Ke=O(),Je=R(Ke);D(Je,function(){s._started=!0,Ar(s)},function(et){s._started=!0,Wr(r,et)})}function ua(r,s,O,ae){var ye=Object.create(tr.prototype),Pe=function(){},Me=function(){return R(void 0)},Ge=function(){return R(void 0)},Xe=function(){return R(void 0)};s.start!==void 0&&(Pe=function(){return s.start(ye)}),s.write!==void 0&&(Me=function(Ke){return s.write(Ke,ye)}),s.close!==void 0&&(Ge=function(){return s.close()}),s.abort!==void 0&&(Xe=function(Ke){return s.abort(Ke)}),fn(r,ye,Pe,Me,Ge,Xe,O,ae)}function _r(r){r._writeAlgorithm=void 0,r._closeAlgorithm=void 0,r._abortAlgorithm=void 0,r._strategySizeAlgorithm=void 0}function ca(r){$e(r,cn,0),Ar(r)}function fa(r,s){try{return r._strategySizeAlgorithm(s)}catch(O){return Gr(r,O),1}}function dn(r){return r._strategyHWM-r._queueTotalSize}function da(r,s,O){try{$e(r,s,O)}catch(Pe){Gr(r,Pe);return}var ae=r._controlledWritableStream;if(!Pt(ae)&&ae._state==="writable"){var ye=Vr(r);$r(ae,ye)}Ar(r)}function Ar(r){var s=r._controlledWritableStream;if(!!r._started&&s._inFlightWriteRequest===void 0){var O=s._state;if(O==="erroring"){Ur(s);return}if(r._queue.length!==0){var ae=xe(r);ae===cn?ha(r):pa(r,ae)}}}function Gr(r,s){r._controlledWritableStream._state==="writable"&&hn(r,s)}function ha(r){var s=r._controlledWritableStream;na(s),Ae(r);var O=r._closeAlgorithm();_r(r),D(O,function(){ea(s)},function(ae){ta(s,ae)})}function pa(r,s){var O=r._controlledWritableStream;aa(O);var ae=r._writeAlgorithm(s);D(ae,function(){Zn(O);var ye=O._state;if(Ae(r),!Pt(O)&&ye==="writable"){var Pe=Vr(r);$r(O,Pe)}Ar(r)},function(ye){O._state==="writable"&&_r(r),Jn(O,ye)})}function Vr(r){var s=dn(r);return s<=0}function hn(r,s){var O=r._controlledWritableStream;_r(r),zr(O,s)}function Cr(r){return new TypeError("WritableStream.prototype."+r+" can only be used on a WritableStream")}function Hr(r){return new TypeError("WritableStreamDefaultController.prototype."+r+" can only be used on a WritableStreamDefaultController")}function qt(r){return new TypeError("WritableStreamDefaultWriter.prototype."+r+" can only be used on a WritableStreamDefaultWriter")}function cr(r){return new TypeError("Cannot "+r+" a stream using a released writer")}function Rr(r){r._closedPromise=T(function(s,O){r._closedPromise_resolve=s,r._closedPromise_reject=O,r._closedPromiseState="pending"})}function pn(r,s){Rr(r),Qr(r,s)}function va(r){Rr(r),vn(r)}function Qr(r,s){r._closedPromise_reject!==void 0&&(f(r._closedPromise),r._closedPromise_reject(s),r._closedPromise_resolve=void 0,r._closedPromise_reject=void 0,r._closedPromiseState="rejected")}function ga(r,s){pn(r,s)}function vn(r){r._closedPromise_resolve!==void 0&&(r._closedPromise_resolve(void 0),r._closedPromise_resolve=void 0,r._closedPromise_reject=void 0,r._closedPromiseState="resolved")}function Tr(r){r._readyPromise=T(function(s,O){r._readyPromise_resolve=s,r._readyPromise_reject=O}),r._readyPromiseState="pending"}function qr(r,s){Tr(r),mn(r,s)}function gn(r){Tr(r),Yr(r)}function mn(r,s){r._readyPromise_reject!==void 0&&(f(r._readyPromise),r._readyPromise_reject(s),r._readyPromise_resolve=void 0,r._readyPromise_reject=void 0,r._readyPromiseState="rejected")}function ma(r){Tr(r)}function ya(r,s){qr(r,s)}function Yr(r){r._readyPromise_resolve!==void 0&&(r._readyPromise_resolve(void 0),r._readyPromise_resolve=void 0,r._readyPromise_reject=void 0,r._readyPromiseState="fulfilled")}var yn=typeof DOMException!="undefined"?DOMException:void 0;function ba(r){if(!(typeof r=="function"||typeof r=="object"))return!1;try{return new r,!0}catch{return!1}}function Sa(){var r=function(O,ae){this.message=O||"",this.name=ae||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return r.prototype=Object.create(Error.prototype),Object.defineProperty(r.prototype,"constructor",{value:r,writable:!0,configurable:!0}),r}var _a=ba(yn)?yn:Sa();function bn(r,s,O,ae,ye,Pe){var Me=pe(r),Ge=tn(s);r._disturbed=!0;var Xe=!1,Ke=R(void 0);return T(function(Je,et){var dt;if(Pe!==void 0){if(dt=function(){var Qe=new _a("Aborted","AbortError"),tt=[];ae||tt.push(function(){return s._state==="writable"?br(s,Qe):R(void 0)}),ye||tt.push(function(){return r._state==="readable"?At(r,Qe):R(void 0)}),mt(function(){return Promise.all(tt.map(function(ut){return ut()}))},!0,Qe)},Pe.aborted){dt();return}Pe.addEventListener("abort",dt)}function Ct(){return T(function(Qe,tt){function ut(wt){wt?Qe():A(ar(),ut,tt)}ut(!1)})}function ar(){return Xe?R(!0):A(Ge._readyPromise,function(){return T(function(Qe,tt){Fe(Me,{_chunkSteps:function(ut){Ke=A(un(Ge,ut),void 0,a),Qe(!1)},_closeSteps:function(){return Qe(!0)},_errorSteps:tt})})})}if(pt(r,Me._closedPromise,function(Qe){ae?It(!0,Qe):mt(function(){return br(s,Qe)},!0,Qe)}),pt(s,Ge._closedPromise,function(Qe){ye?It(!0,Qe):mt(function(){return At(r,Qe)},!0,Qe)}),Et(r,Me._closedPromise,function(){O?It():mt(function(){return oa(Ge)})}),Pt(s)||s._state==="closed"){var $t=new TypeError("the destination writable stream closed before all data could be piped to it");ye?It(!0,$t):mt(function(){return At(r,$t)},!0,$t)}f(Ct());function kt(){var Qe=Ke;return A(Ke,function(){return Qe!==Ke?kt():void 0})}function pt(Qe,tt,ut){Qe._state==="errored"?ut(Qe._storedError):z(tt,ut)}function Et(Qe,tt,ut){Qe._state==="closed"?ut():k(tt,ut)}function mt(Qe,tt,ut){if(Xe)return;Xe=!0,s._state==="writable"&&!Pt(s)?k(kt(),wt):wt();function wt(){D(Qe(),function(){return lt(tt,ut)},function(jt){return lt(!0,jt)})}}function It(Qe,tt){Xe||(Xe=!0,s._state==="writable"&&!Pt(s)?k(kt(),function(){return lt(Qe,tt)}):lt(Qe,tt))}function lt(Qe,tt){ln(Ge),W(Me),Pe!==void 0&&Pe.removeEventListener("abort",dt),Qe?et(tt):Je(void 0)}})}var rr=function(){function r(){throw new TypeError("Illegal constructor")}return Object.defineProperty(r.prototype,"desiredSize",{get:function(){if(!Pr(this))throw wr("desiredSize");return Xr(this)},enumerable:!1,configurable:!0}),r.prototype.close=function(){if(!Pr(this))throw wr("close");if(!nr(this))throw new TypeError("The stream is not in a state that permits close");dr(this)},r.prototype.enqueue=function(s){if(s===void 0&&(s=void 0),!Pr(this))throw wr("enqueue");if(!nr(this))throw new TypeError("The stream is not in a state that permits enqueue");return Er(this,s)},r.prototype.error=function(s){if(s===void 0&&(s=void 0),!Pr(this))throw wr("error");Bt(this,s)},r.prototype[L]=function(s){Oe(this);var O=this._cancelAlgorithm(s);return kr(this),O},r.prototype[X]=function(s){var O=this._controlledReadableStream;if(this._queue.length>0){var ae=Ae(this);this._closeRequested&&this._queue.length===0?(kr(this),hr(O)):fr(this),s._chunkSteps(ae)}else ge(O,s),fr(this)},r}();Object.defineProperties(rr.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Pr(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_controlledReadableStream")?!1:r instanceof rr}function fr(r){var s=Sn(r);if(!!s){if(r._pulling){r._pullAgain=!0;return}r._pulling=!0;var O=r._pullAlgorithm();D(O,function(){r._pulling=!1,r._pullAgain&&(r._pullAgain=!1,fr(r))},function(ae){Bt(r,ae)})}}function Sn(r){var s=r._controlledReadableStream;if(!nr(r)||!r._started)return!1;if(Ut(s)&&_e(s)>0)return!0;var O=Xr(r);return O>0}function kr(r){r._pullAlgorithm=void 0,r._cancelAlgorithm=void 0,r._strategySizeAlgorithm=void 0}function dr(r){if(!!nr(r)){var s=r._controlledReadableStream;r._closeRequested=!0,r._queue.length===0&&(kr(r),hr(s))}}function Er(r,s){if(!!nr(r)){var O=r._controlledReadableStream;if(Ut(O)&&_e(O)>0)ve(O,s,!1);else{var ae=void 0;try{ae=r._strategySizeAlgorithm(s)}catch(ye){throw Bt(r,ye),ye}try{$e(r,s,ae)}catch(ye){throw Bt(r,ye),ye}}fr(r)}}function Bt(r,s){var O=r._controlledReadableStream;O._state==="readable"&&(Oe(r),kr(r),Rn(O,s))}function Xr(r){var s=r._controlledReadableStream._state;return s==="errored"?null:s==="closed"?0:r._strategyHWM-r._queueTotalSize}function Aa(r){return!Sn(r)}function nr(r){var s=r._controlledReadableStream._state;return!r._closeRequested&&s==="readable"}function _n(r,s,O,ae,ye,Pe,Me){s._controlledReadableStream=r,s._queue=void 0,s._queueTotalSize=void 0,Oe(s),s._started=!1,s._closeRequested=!1,s._pullAgain=!1,s._pulling=!1,s._strategySizeAlgorithm=Me,s._strategyHWM=Pe,s._pullAlgorithm=ae,s._cancelAlgorithm=ye,r._readableStreamController=s;var Ge=O();D(R(Ge),function(){s._started=!0,fr(s)},function(Xe){Bt(s,Xe)})}function Ca(r,s,O,ae){var ye=Object.create(rr.prototype),Pe=function(){},Me=function(){return R(void 0)},Ge=function(){return R(void 0)};s.start!==void 0&&(Pe=function(){return s.start(ye)}),s.pull!==void 0&&(Me=function(){return s.pull(ye)}),s.cancel!==void 0&&(Ge=function(Xe){return s.cancel(Xe)}),_n(r,ye,Pe,Me,Ge,O,ae)}function wr(r){return new TypeError("ReadableStreamDefaultController.prototype."+r+" can only be used on a ReadableStreamDefaultController")}function Ra(r,s){return Ve(r._readableStreamController)?Pa(r):Ta(r)}function Ta(r,s){var O=pe(r),ae=!1,ye=!1,Pe=!1,Me=!1,Ge,Xe,Ke,Je,et,dt=T(function(pt){et=pt});function Ct(){if(ae)return ye=!0,R(void 0);ae=!0;var pt={_chunkSteps:function(Et){d(function(){ye=!1;var mt=Et,It=Et;Pe||Er(Ke._readableStreamController,mt),Me||Er(Je._readableStreamController,It),ae=!1,ye&&Ct()})},_closeSteps:function(){ae=!1,Pe||dr(Ke._readableStreamController),Me||dr(Je._readableStreamController),(!Pe||!Me)&&et(void 0)},_errorSteps:function(){ae=!1}};return Fe(O,pt),R(void 0)}function ar(pt){if(Pe=!0,Ge=pt,Me){var Et=J([Ge,Xe]),mt=At(r,Et);et(mt)}return dt}function $t(pt){if(Me=!0,Xe=pt,Pe){var Et=J([Ge,Xe]),mt=At(r,Et);et(mt)}return dt}function kt(){}return Ke=Kr(kt,Ct,ar),Je=Kr(kt,Ct,$t),z(O._closedPromise,function(pt){Bt(Ke._readableStreamController,pt),Bt(Je._readableStreamController,pt),(!Pe||!Me)&&et(void 0)}),[Ke,Je]}function Pa(r){var s=pe(r),O=!1,ae=!1,ye=!1,Pe=!1,Me=!1,Ge,Xe,Ke,Je,et,dt=T(function(lt){et=lt});function Ct(lt){z(lt._closedPromise,function(Qe){lt===s&&(He(Ke._readableStreamController,Qe),He(Je._readableStreamController,Qe),(!Pe||!Me)&&et(void 0))})}function ar(){ft(s)&&(W(s),s=pe(r),Ct(s));var lt={_chunkSteps:function(Qe){d(function(){ae=!1,ye=!1;var tt=Qe,ut=Qe;if(!Pe&&!Me)try{ut=De(Qe)}catch(wt){He(Ke._readableStreamController,wt),He(Je._readableStreamController,wt),et(At(r,wt));return}Pe||je(Ke._readableStreamController,tt),Me||je(Je._readableStreamController,ut),O=!1,ae?kt():ye&&pt()})},_closeSteps:function(){O=!1,Pe||ze(Ke._readableStreamController),Me||ze(Je._readableStreamController),Ke._readableStreamController._pendingPullIntos.length>0&&st(Ke._readableStreamController,0),Je._readableStreamController._pendingPullIntos.length>0&&st(Je._readableStreamController,0),(!Pe||!Me)&&et(void 0)},_errorSteps:function(){O=!1}};Fe(s,lt)}function $t(lt,Qe){Ie(s)&&(W(s),s=Gt(r),Ct(s));var tt=Qe?Je:Ke,ut=Qe?Ke:Je,wt={_chunkSteps:function(jt){d(function(){ae=!1,ye=!1;var ir=Qe?Me:Pe,vr=Qe?Pe:Me;if(vr)ir||gt(tt._readableStreamController,jt);else{var Nn=void 0;try{Nn=De(jt)}catch(Jr){He(tt._readableStreamController,Jr),He(ut._readableStreamController,Jr),et(At(r,Jr));return}ir||gt(tt._readableStreamController,jt),je(ut._readableStreamController,Nn)}O=!1,ae?kt():ye&&pt()})},_closeSteps:function(jt){O=!1;var ir=Qe?Me:Pe,vr=Qe?Pe:Me;ir||ze(tt._readableStreamController),vr||ze(ut._readableStreamController),jt!==void 0&&(ir||gt(tt._readableStreamController,jt),!vr&&ut._readableStreamController._pendingPullIntos.length>0&&st(ut._readableStreamController,0)),(!ir||!vr)&&et(void 0)},_errorSteps:function(){O=!1}};Nt(s,lt,wt)}function kt(){if(O)return ae=!0,R(void 0);O=!0;var lt=Ye(Ke._readableStreamController);return lt===null?ar():$t(lt._view,!1),R(void 0)}function pt(){if(O)return ye=!0,R(void 0);O=!0;var lt=Ye(Je._readableStreamController);return lt===null?ar():$t(lt._view,!0),R(void 0)}function Et(lt){if(Pe=!0,Ge=lt,Me){var Qe=J([Ge,Xe]),tt=At(r,Qe);et(tt)}return dt}function mt(lt){if(Me=!0,Xe=lt,Pe){var Qe=J([Ge,Xe]),tt=At(r,Qe);et(tt)}return dt}function It(){}return Ke=Cn(It,kt,Et),Je=Cn(It,pt,mt),Ct(s),[Ke,Je]}function ka(r,s){Ce(r,s);var O=r,ae=O==null?void 0:O.autoAllocateChunkSize,ye=O==null?void 0:O.cancel,Pe=O==null?void 0:O.pull,Me=O==null?void 0:O.start,Ge=O==null?void 0:O.type;return{autoAllocateChunkSize:ae===void 0?void 0:ee(ae,s+" has member 'autoAllocateChunkSize' that"),cancel:ye===void 0?void 0:Ea(ye,O,s+" has member 'cancel' that"),pull:Pe===void 0?void 0:wa(Pe,O,s+" has member 'pull' that"),start:Me===void 0?void 0:xa(Me,O,s+" has member 'start' that"),type:Ge===void 0?void 0:Oa(Ge,s+" has member 'type' that")}}function Ea(r,s,O){return Ee(r,O),function(ae){return y(r,s,[ae])}}function wa(r,s,O){return Ee(r,O),function(ae){return y(r,s,[ae])}}function xa(r,s,O){return Ee(r,O),function(ae){return b(r,s,[ae])}}function Oa(r,s){if(r=""+r,r!=="bytes")throw new TypeError(s+" '"+r+"' is not a valid enumeration value for ReadableStreamType");return r}function Ia(r,s){Ce(r,s);var O=r==null?void 0:r.mode;return{mode:O===void 0?void 0:Fa(O,s+" has member 'mode' that")}}function Fa(r,s){if(r=""+r,r!=="byob")throw new TypeError(s+" '"+r+"' is not a valid enumeration value for ReadableStreamReaderMode");return r}function Ma(r,s){Ce(r,s);var O=r==null?void 0:r.preventCancel;return{preventCancel:Boolean(O)}}function An(r,s){Ce(r,s);var O=r==null?void 0:r.preventAbort,ae=r==null?void 0:r.preventCancel,ye=r==null?void 0:r.preventClose,Pe=r==null?void 0:r.signal;return Pe!==void 0&&La(Pe,s+" has member 'signal' that"),{preventAbort:Boolean(O),preventCancel:Boolean(ae),preventClose:Boolean(ye),signal:Pe}}function La(r,s){if(!Qn(r))throw new TypeError(s+" is not an AbortSignal.")}function Da(r,s){Ce(r,s);var O=r==null?void 0:r.readable;c(O,"readable","ReadableWritablePair"),ue(O,s+" has member 'readable' that");var ae=r==null?void 0:r.writable;return c(ae,"writable","ReadableWritablePair"),en(ae,s+" has member 'writable' that"),{readable:O,writable:ae}}var Wt=function(){function r(s,O){s===void 0&&(s={}),O===void 0&&(O={}),s===void 0?s=null:M(s,"First parameter");var ae=yr(O,"Second parameter"),ye=ka(s,"First parameter");if(Zr(this),ye.type==="bytes"){if(ae.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var Pe=sr(ae,0);Tt(this,ye,Pe)}else{var Me=mr(ae),Pe=sr(ae,1);Ca(this,ye,Pe,Me)}}return Object.defineProperty(r.prototype,"locked",{get:function(){if(!zt(this))throw Yt("locked");return Ut(this)},enumerable:!1,configurable:!0}),r.prototype.cancel=function(s){return s===void 0&&(s=void 0),zt(this)?Ut(this)?P(new TypeError("Cannot cancel a stream that already has a reader")):At(this,s):P(Yt("cancel"))},r.prototype.getReader=function(s){if(s===void 0&&(s=void 0),!zt(this))throw Yt("getReader");var O=Ia(s,"First parameter");return O.mode===void 0?pe(this):Gt(this)},r.prototype.pipeThrough=function(s,O){if(O===void 0&&(O={}),!zt(this))throw Yt("pipeThrough");g(s,1,"pipeThrough");var ae=Da(s,"First parameter"),ye=An(O,"Second parameter");if(Ut(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(er(ae.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var Pe=bn(this,ae.writable,ye.preventClose,ye.preventAbort,ye.preventCancel,ye.signal);return f(Pe),ae.readable},r.prototype.pipeTo=function(s,O){if(O===void 0&&(O={}),!zt(this))return P(Yt("pipeTo"));if(s===void 0)return P("Parameter 1 is required in 'pipeTo'.");if(!Jt(s))return P(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var ae;try{ae=An(O,"Second parameter")}catch(ye){return P(ye)}return Ut(this)?P(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):er(s)?P(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):bn(this,s,ae.preventClose,ae.preventAbort,ae.preventCancel,ae.signal)},r.prototype.tee=function(){if(!zt(this))throw Yt("tee");var s=Ra(this);return J(s)},r.prototype.values=function(s){if(s===void 0&&(s=void 0),!zt(this))throw Yt("values");var O=Ma(s,"First parameter");return te(this,O.preventCancel)},r}();Object.defineProperties(Wt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Wt.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Wt.prototype,t.asyncIterator,{value:Wt.prototype.values,writable:!0,configurable:!0});function Kr(r,s,O,ae,ye){ae===void 0&&(ae=1),ye===void 0&&(ye=function(){return 1});var Pe=Object.create(Wt.prototype);Zr(Pe);var Me=Object.create(rr.prototype);return _n(Pe,Me,r,s,O,ae,ye),Pe}function Cn(r,s,O){var ae=Object.create(Wt.prototype);Zr(ae);var ye=Object.create(Ne.prototype);return ht(ae,ye,r,s,O,0,void 0),ae}function Zr(r){r._state="readable",r._reader=void 0,r._storedError=void 0,r._disturbed=!1}function zt(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_readableStreamController")?!1:r instanceof Wt}function Ut(r){return r._reader!==void 0}function At(r,s){if(r._disturbed=!0,r._state==="closed")return R(void 0);if(r._state==="errored")return P(r._storedError);hr(r);var O=r._reader;O!==void 0&&ft(O)&&(O._readIntoRequests.forEach(function(ye){ye._closeSteps(void 0)}),O._readIntoRequests=new C);var ae=r._readableStreamController[L](s);return v(ae,a)}function hr(r){r._state="closed";var s=r._reader;s!==void 0&&(F(s),Ie(s)&&(s._readRequests.forEach(function(O){O._closeSteps()}),s._readRequests=new C))}function Rn(r,s){r._state="errored",r._storedError=s;var O=r._reader;O!==void 0&&(V(O,s),Ie(O)?(O._readRequests.forEach(function(ae){ae._errorSteps(s)}),O._readRequests=new C):(O._readIntoRequests.forEach(function(ae){ae._errorSteps(s)}),O._readIntoRequests=new C))}function Yt(r){return new TypeError("ReadableStream.prototype."+r+" can only be used on a ReadableStream")}function Tn(r,s){Ce(r,s);var O=r==null?void 0:r.highWaterMark;return c(O,"highWaterMark","QueuingStrategyInit"),{highWaterMark:_(O)}}var Pn=function(r){return r.byteLength};Object.defineProperty(Pn,"name",{value:"size",configurable:!0});var xr=function(){function r(s){g(s,1,"ByteLengthQueuingStrategy"),s=Tn(s,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=s.highWaterMark}return Object.defineProperty(r.prototype,"highWaterMark",{get:function(){if(!En(this))throw kn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){if(!En(this))throw kn("size");return Pn},enumerable:!1,configurable:!0}),r}();Object.defineProperties(xr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(xr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function kn(r){return new TypeError("ByteLengthQueuingStrategy.prototype."+r+" can only be used on a ByteLengthQueuingStrategy")}function En(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_byteLengthQueuingStrategyHighWaterMark")?!1:r instanceof xr}var wn=function(){return 1};Object.defineProperty(wn,"name",{value:"size",configurable:!0});var Or=function(){function r(s){g(s,1,"CountQueuingStrategy"),s=Tn(s,"First parameter"),this._countQueuingStrategyHighWaterMark=s.highWaterMark}return Object.defineProperty(r.prototype,"highWaterMark",{get:function(){if(!On(this))throw xn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){if(!On(this))throw xn("size");return wn},enumerable:!1,configurable:!0}),r}();Object.defineProperties(Or.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Or.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function xn(r){return new TypeError("CountQueuingStrategy.prototype."+r+" can only be used on a CountQueuingStrategy")}function On(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_countQueuingStrategyHighWaterMark")?!1:r instanceof Or}function Na(r,s){Ce(r,s);var O=r==null?void 0:r.flush,ae=r==null?void 0:r.readableType,ye=r==null?void 0:r.start,Pe=r==null?void 0:r.transform,Me=r==null?void 0:r.writableType;return{flush:O===void 0?void 0:Ba(O,r,s+" has member 'flush' that"),readableType:ae,start:ye===void 0?void 0:Wa(ye,r,s+" has member 'start' that"),transform:Pe===void 0?void 0:za(Pe,r,s+" has member 'transform' that"),writableType:Me}}function Ba(r,s,O){return Ee(r,O),function(ae){return y(r,s,[ae])}}function Wa(r,s,O){return Ee(r,O),function(ae){return b(r,s,[ae])}}function za(r,s,O){return Ee(r,O),function(ae,ye){return y(r,s,[ae,ye])}}var Ir=function(){function r(s,O,ae){s===void 0&&(s={}),O===void 0&&(O={}),ae===void 0&&(ae={}),s===void 0&&(s=null);var ye=yr(O,"Second parameter"),Pe=yr(ae,"Third parameter"),Me=Na(s,"First parameter");if(Me.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Me.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Ge=sr(Pe,0),Xe=mr(Pe),Ke=sr(ye,1),Je=mr(ye),et,dt=T(function(Ct){et=Ct});Ua(this,dt,Ke,Je,Ge,Xe),ja(this,Me),Me.start!==void 0?et(Me.start(this._transformStreamController)):et(void 0)}return Object.defineProperty(r.prototype,"readable",{get:function(){if(!In(this))throw Dn("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"writable",{get:function(){if(!In(this))throw Dn("writable");return this._writable},enumerable:!1,configurable:!0}),r}();Object.defineProperties(Ir.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ir.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Ua(r,s,O,ae,ye,Pe){function Me(){return s}function Ge(dt){return Ha(r,dt)}function Xe(dt){return Qa(r,dt)}function Ke(){return qa(r)}r._writable=Xn(Me,Ge,Ke,Xe,O,ae);function Je(){return Ya(r)}function et(dt){return Mr(r,dt),R(void 0)}r._readable=Kr(Me,Je,et,ye,Pe),r._backpressure=void 0,r._backpressureChangePromise=void 0,r._backpressureChangePromise_resolve=void 0,Lr(r,!0),r._transformStreamController=void 0}function In(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_transformStreamController")?!1:r instanceof Ir}function Fr(r,s){Bt(r._readable._readableStreamController,s),Mr(r,s)}function Mr(r,s){Fn(r._transformStreamController),Gr(r._writable._writableStreamController,s),r._backpressure&&Lr(r,!1)}function Lr(r,s){r._backpressureChangePromise!==void 0&&r._backpressureChangePromise_resolve(),r._backpressureChangePromise=T(function(O){r._backpressureChangePromise_resolve=O}),r._backpressure=s}var pr=function(){function r(){throw new TypeError("Illegal constructor")}return Object.defineProperty(r.prototype,"desiredSize",{get:function(){if(!Dr(this))throw Nr("desiredSize");var s=this._controlledTransformStream._readable._readableStreamController;return Xr(s)},enumerable:!1,configurable:!0}),r.prototype.enqueue=function(s){if(s===void 0&&(s=void 0),!Dr(this))throw Nr("enqueue");Mn(this,s)},r.prototype.error=function(s){if(s===void 0&&(s=void 0),!Dr(this))throw Nr("error");Ga(this,s)},r.prototype.terminate=function(){if(!Dr(this))throw Nr("terminate");Va(this)},r}();Object.defineProperties(pr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(pr.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Dr(r){return!l(r)||!Object.prototype.hasOwnProperty.call(r,"_controlledTransformStream")?!1:r instanceof pr}function $a(r,s,O,ae){s._controlledTransformStream=r,r._transformStreamController=s,s._transformAlgorithm=O,s._flushAlgorithm=ae}function ja(r,s){var O=Object.create(pr.prototype),ae=function(Pe){try{return Mn(O,Pe),R(void 0)}catch(Me){return P(Me)}},ye=function(){return R(void 0)};s.transform!==void 0&&(ae=function(Pe){return s.transform(Pe,O)}),s.flush!==void 0&&(ye=function(){return s.flush(O)}),$a(r,O,ae,ye)}function Fn(r){r._transformAlgorithm=void 0,r._flushAlgorithm=void 0}function Mn(r,s){var O=r._controlledTransformStream,ae=O._readable._readableStreamController;if(!nr(ae))throw new TypeError("Readable side is not in a state that permits enqueue");try{Er(ae,s)}catch(Pe){throw Mr(O,Pe),O._readable._storedError}var ye=Aa(ae);ye!==O._backpressure&&Lr(O,!0)}function Ga(r,s){Fr(r._controlledTransformStream,s)}function Ln(r,s){var O=r._transformAlgorithm(s);return v(O,void 0,function(ae){throw Fr(r._controlledTransformStream,ae),ae})}function Va(r){var s=r._controlledTransformStream,O=s._readable._readableStreamController;dr(O);var ae=new TypeError("TransformStream terminated");Mr(s,ae)}function Ha(r,s){var O=r._transformStreamController;if(r._backpressure){var ae=r._backpressureChangePromise;return v(ae,function(){var ye=r._writable,Pe=ye._state;if(Pe==="erroring")throw ye._storedError;return Ln(O,s)})}return Ln(O,s)}function Qa(r,s){return Fr(r,s),R(void 0)}function qa(r){var s=r._readable,O=r._transformStreamController,ae=O._flushAlgorithm();return Fn(O),v(ae,function(){if(s._state==="errored")throw s._storedError;dr(s._readableStreamController)},function(ye){throw Fr(r,ye),s._storedError})}function Ya(r){return Lr(r,!1),r._backpressureChangePromise}function Nr(r){return new TypeError("TransformStreamDefaultController.prototype."+r+" can only be used on a TransformStreamDefaultController")}function Dn(r){return new TypeError("TransformStream.prototype."+r+" can only be used on a TransformStream")}e.ByteLengthQueuingStrategy=xr,e.CountQueuingStrategy=Or,e.ReadableByteStreamController=Ne,e.ReadableStream=Wt,e.ReadableStreamBYOBReader=_t,e.ReadableStreamBYOBRequest=Be,e.ReadableStreamDefaultController=rr,e.ReadableStreamDefaultReader=we,e.TransformStream=Ir,e.TransformStreamDefaultController=pr,e.WritableStream=lr,e.WritableStreamDefaultController=tr,e.WritableStreamDefaultWriter=ur,Object.defineProperty(e,"__esModule",{value:!0})})},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var t=o(e(2)),a=e(4);function o(P){return P&&P.__esModule?P:{default:P}}function u(P,A,D,k,z,v,f){try{var d=P[v](f),b=d.value}catch(y){D(y);return}d.done?A(b):Promise.resolve(b).then(k,z)}function l(P){return function(){var A=this,D=arguments;return new Promise(function(k,z){var v=P.apply(A,D);function f(b){u(v,k,z,f,d,"next",b)}function d(b){u(v,k,z,f,d,"throw",b)}f(void 0)})}}function h(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function S(P,A){for(var D=0;D<A.length;D++){var k=A[D];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(P,k.key,k)}}function w(P,A,D){return A&&S(P.prototype,A),D&&S(P,D),P}var x=function(){function P(){h(this,P),this.constructor===P&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}return w(P,[{key:"create",value:function(D,k){if(D<=0||k<=0)throw new Error("Invalid canvas size");var z=this._createCanvas(D,k);return{canvas:z,context:z.getContext("2d")}}},{key:"reset",value:function(D,k,z){if(!D.canvas)throw new Error("Canvas is not specified");if(k<=0||z<=0)throw new Error("Invalid canvas size");D.canvas.width=k,D.canvas.height=z}},{key:"destroy",value:function(D){if(!D.canvas)throw new Error("Canvas is not specified");D.canvas.width=0,D.canvas.height=0,D.canvas=null,D.context=null}},{key:"_createCanvas",value:function(D,k){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}]),P}();n.BaseCanvasFactory=x;var N=function(){function P(A){var D=A.baseUrl,k=D===void 0?null:D,z=A.isCompressed,v=z===void 0?!1:z;h(this,P),this.constructor===P&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=k,this.isCompressed=v}return w(P,[{key:"fetch",value:function(){var A=l(t.default.mark(function k(z){var v=this,f,d,b;return t.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(f=z.name,this.baseUrl){p.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(f){p.next=5;break}throw new Error("CMap name must be specified.");case 5:return d=this.baseUrl+f+(this.isCompressed?".bcmap":""),b=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE,p.abrupt("return",this._fetchData(d,b).catch(function(C){throw new Error("Unable to load ".concat(v.isCompressed?"binary ":"","CMap at: ").concat(d))}));case 8:case"end":return p.stop()}},k,this)}));function D(k){return A.apply(this,arguments)}return D}()},{key:"_fetchData",value:function(D,k){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]),P}();n.BaseCMapReaderFactory=N;var T=function(){function P(A){var D=A.baseUrl,k=D===void 0?null:D;h(this,P),this.constructor===P&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=k}return w(P,[{key:"fetch",value:function(){var A=l(t.default.mark(function k(z){var v,f;return t.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(v=z.filename,this.baseUrl){b.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(v){b.next=5;break}throw new Error("Font filename must be specified.");case 5:return f="".concat(this.baseUrl).concat(v),b.abrupt("return",this._fetchData(f).catch(function(y){throw new Error("Unable to load font data at: ".concat(f))}));case 7:case"end":return b.stop()}},k,this)}));function D(k){return A.apply(this,arguments)}return D}()},{key:"_fetchData",value:function(D){(0,a.unreachable)("Abstract method `_fetchData` called.")}}]),P}();n.BaseStandardFontDataFactory=T;var R=function(){function P(){h(this,P),this.constructor===P&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}return w(P,[{key:"create",value:function(D,k){if(D<=0||k<=0)throw new Error("Invalid SVG dimensions");var z=this._createSVG("svg:svg");return z.setAttribute("version","1.1"),z.setAttribute("width","".concat(D,"px")),z.setAttribute("height","".concat(k,"px")),z.setAttribute("preserveAspectRatio","none"),z.setAttribute("viewBox","0 0 ".concat(D," ").concat(k)),z}},{key:"createElement",value:function(D){if(typeof D!="string")throw new Error("Invalid SVG element type");return this._createSVG(D)}},{key:"_createSVG",value:function(D){(0,a.unreachable)("Abstract method `_createSVG` called.")}}]),P}();n.BaseSVGFactory=R},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(4),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(137),_node_utils=__w_pdfjs_require__(138),_annotation_storage=__w_pdfjs_require__(139),_canvas=__w_pdfjs_require__(140),_worker_options=__w_pdfjs_require__(142),_is_node=__w_pdfjs_require__(6),_message_handler=__w_pdfjs_require__(143),_metadata=__w_pdfjs_require__(144),_optional_content_config=__w_pdfjs_require__(145),_transport_stream=__w_pdfjs_require__(146),_xfa_text=__w_pdfjs_require__(147);function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _classPrivateFieldInitSpec(i,n,e){_checkPrivateRedeclaration(i,n),n.set(i,e)}function _checkPrivateRedeclaration(i,n){if(n.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(i,n,e){var t=_classExtractFieldDescriptor(i,n,"set");return _classApplyDescriptorSet(i,t,e),e}function _classApplyDescriptorSet(i,n,e){if(n.set)n.set.call(i,e);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=e}}function _classPrivateFieldGet(i,n){var e=_classExtractFieldDescriptor(i,n,"get");return _classApplyDescriptorGet(i,e)}function _classExtractFieldDescriptor(i,n,e){if(!n.has(i))throw new TypeError("attempted to "+e+" private field on non-instance");return n.get(i)}function _classApplyDescriptorGet(i,n){return n.get?n.get.call(i):n.value}function _toConsumableArray(i){return _arrayWithoutHoles(i)||_iterableToArray(i)||_unsupportedIterableToArray(i)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}function _createForOfIteratorHelper(i,n){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=_unsupportedIterableToArray(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,a=function(){};return{s:a,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(S){throw S},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,l;return{s:function(){e=e.call(i)},n:function(){var S=e.next();return o=S.done,S},e:function(S){u=!0,l=S},f:function(){try{!o&&e.return!=null&&e.return()}finally{if(u)throw l}}}}function _classCallCheck(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function _createClass(i,n,e){return n&&_defineProperties(i.prototype,n),e&&_defineProperties(i,e),i}function asyncGeneratorStep(i,n,e,t,a,o,u){try{var l=i[o](u),h=l.value}catch(S){e(S);return}l.done?n(h):Promise.resolve(h).then(t,a)}function _asyncToGenerator(i){return function(){var n=this,e=arguments;return new Promise(function(t,a){var o=i.apply(n,e);function u(h){asyncGeneratorStep(o,t,a,u,l,"next",h)}function l(h){asyncGeneratorStep(o,t,a,u,l,"throw",h)}u(void 0)})}}function _slicedToArray(i,n){return _arrayWithHoles(i)||_iterableToArrayLimit(i,n)||_unsupportedIterableToArray(i,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(i,n){if(!!i){if(typeof i=="string")return _arrayLikeToArray(i,n);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray(i,n)}}function _arrayLikeToArray(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}function _iterableToArrayLimit(i,n){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var t=[],a=!0,o=!1,u,l;try{for(e=e.call(i);!(a=(u=e.next()).done)&&(t.push(u.value),!(n&&t.length===n));a=!0);}catch(h){o=!0,l=h}finally{try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}return t}}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _typeof(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(i)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;var createPDFNetworkStream;function setPDFNetworkStreamFactory(i){createPDFNetworkStream=i}function getDocument(i){var n=new PDFDocumentLoadingTask,e;if(typeof i=="string"||i instanceof URL)e={url:i};else if((0,_util.isArrayBuffer)(i))e={data:i};else if(i instanceof PDFDataRangeTransport)e={range:i};else{if(_typeof(i)!=="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=i}var t=Object.create(null),a=null,o=null;for(var u in e){var l=e[u];switch(u){case"url":if(typeof window!="undefined")try{t[u]=new URL(l,window.location).href;continue}catch(w){(0,_util.warn)('Cannot create valid URL: "'.concat(w,'".'))}else if(typeof l=="string"||l instanceof URL){t[u]=l.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":a=l;continue;case"worker":o=l;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&l instanceof Buffer)t[u]=new Uint8Array(l);else{if(l instanceof Uint8Array)break;if(typeof l=="string")t[u]=(0,_util.stringToBytes)(l);else if(_typeof(l)==="object"&&l!==null&&!isNaN(l.length))t[u]=new Uint8Array(l);else if((0,_util.isArrayBuffer)(l))t[u]=new Uint8Array(l);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}t[u]=l}if(t.rangeChunkSize=t.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,t.CMapReaderFactory=t.CMapReaderFactory||DefaultCMapReaderFactory,t.StandardFontDataFactory=t.StandardFontDataFactory||DefaultStandardFontDataFactory,t.ignoreErrors=t.stopAtErrors!==!0,t.fontExtraProperties=t.fontExtraProperties===!0,t.pdfBug=t.pdfBug===!0,t.enableXfa=t.enableXfa===!0,(typeof t.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(t.docBaseUrl))&&(t.docBaseUrl=null),Number.isInteger(t.maxImageSize)||(t.maxImageSize=-1),typeof t.useWorkerFetch!="boolean"&&(t.useWorkerFetch=t.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&t.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof t.isEvalSupported!="boolean"&&(t.isEvalSupported=!0),typeof t.disableFontFace!="boolean"&&(t.disableFontFace=_is_node.isNodeJS),typeof t.useSystemFonts!="boolean"&&(t.useSystemFonts=!_is_node.isNodeJS&&!t.disableFontFace),typeof t.ownerDocument=="undefined"&&(t.ownerDocument=globalThis.document),typeof t.disableRange!="boolean"&&(t.disableRange=!1),typeof t.disableStream!="boolean"&&(t.disableStream=!1),typeof t.disableAutoFetch!="boolean"&&(t.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(t.verbosity),!o){var h={verbosity:t.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};o=h.port?PDFWorker.fromPort(h):new PDFWorker(h),n._worker=o}var S=n.docId;return o.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");var w=_fetchDocument(o,t,a,S),x=new Promise(function(N){var T;a?T=new _transport_stream.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,contentDispositionFilename:t.contentDispositionFilename,disableRange:t.disableRange,disableStream:t.disableStream},a):t.data||(T=createPDFNetworkStream({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),N(T)});return Promise.all([w,x]).then(function(N){var T=_slicedToArray(N,2),R=T[0],P=T[1];if(n.destroyed)throw new Error("Loading aborted");var A=new _message_handler.MessageHandler(S,R,o.port),D=new WorkerTransport(A,n,P,t);n._transport=D,A.send("Ready",null)})}).catch(n._capability.reject),n}function _fetchDocument(i,n,e,t){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return _fetchDocument2=_asyncToGenerator(_regenerator.default.mark(function i(n,e,t,a){var o;return _regenerator.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!n.destroyed){l.next=2;break}throw new Error("Worker was destroyed");case 2:return t&&(e.length=t.length,e.initialData=t.initialData,e.progressiveDone=t.progressiveDone,e.contentDispositionFilename=t.contentDispositionFilename),l.next=5,n.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"2.12.313",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});case 5:if(o=l.sent,!n.destroyed){l.next=8;break}throw new Error("Worker was destroyed");case 8:return l.abrupt("return",o);case 9:case"end":return l.stop()}},i)})),_fetchDocument2.apply(this,arguments)}var PDFDocumentLoadingTask=function(){function i(){_classCallCheck(this,i),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat(i.idCounters.doc++),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(i,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function t(){var a;return _regenerator.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.destroyed=!0,u.next=3,(a=this._transport)===null||a===void 0?void 0:a.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return u.stop()}},t,this)}));function e(){return n.apply(this,arguments)}return e}()}],[{key:"idCounters",get:function(){return(0,_util.shadow)(this,"idCounters",{doc:0})}}]),i}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){function i(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;_classCallCheck(this,i),this.length=n,this.initialData=e,this.progressiveDone=t,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(i,[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,t){var a=_createForOfIteratorHelper(this._rangeListeners),o;try{for(a.s();!(o=a.n()).done;){var u=o.value;u(e,t)}}catch(l){a.e(l)}finally{a.f()}}},{key:"onDataProgress",value:function(e,t){var a=this;this._readyCapability.promise.then(function(){var o=_createForOfIteratorHelper(a._progressListeners),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;l(e,t)}}catch(h){o.e(h)}finally{o.f()}})}},{key:"onDataProgressiveRead",value:function(e){var t=this;this._readyCapability.promise.then(function(){var a=_createForOfIteratorHelper(t._progressiveReadListeners),o;try{for(a.s();!(o=a.n()).done;){var u=o.value;u(e)}}catch(l){a.e(l)}finally{a.f()}})}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then(function(){var t=_createForOfIteratorHelper(e._progressiveDoneListeners),a;try{for(t.s();!(a=t.n()).done;){var o=a.value;o()}}catch(u){t.e(u)}finally{t.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),i}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function i(n,e){var t=this;_classCallCheck(this,i),this._pdfInfo=n,this._transport=e,Object.defineProperty(this,"fingerprint",{get:function(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:function(){var a=_asyncToGenerator(_regenerator.default.mark(function u(){return _regenerator.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),h.abrupt("return",t.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return h.stop()}},u)}));function o(){return a.apply(this,arguments)}return o}()})}return _createClass(i,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"stats",get:function(){return this._transport.stats}},{key:"isPureXfa",get:function(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(e||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),i}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function i(n,e,t,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;_classCallCheck(this,i),this._pageIndex=n,this._pageInfo=e,this._ownerDocument=a,this._transport=t,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}return _createClass(i,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.scale,a=e.rotation,o=a===void 0?this.rotate:a,u=e.offsetX,l=u===void 0?0:u,h=e.offsetY,S=h===void 0?0:h,w=e.dontFlip,x=w===void 0?!1:w;return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:o,offsetX:l,offsetY:S,dontFlip:x})}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.intent,a=t===void 0?"display":t,o=this._transport.getRenderingIntent(a),u=this._annotationPromises.get(o.cacheKey);return u||(u=this._transport.getAnnotations(this._pageIndex,o.renderingIntent),this._annotationPromises.set(o.cacheKey,u),u=u.then(function(l){var h=_createForOfIteratorHelper(l),S;try{var w=function(){var N=S.value;N.titleObj!==void 0&&Object.defineProperty(N,"title",{get:function(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),N.titleObj.str}}),N.contentsObj!==void 0&&Object.defineProperty(N,"contents",{get:function(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),N.contentsObj.str}})};for(h.s();!(S=h.n()).done;)w()}catch(x){h.e(x)}finally{h.f()}return l})),u}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function t(){var a;return _regenerator.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",((a=this._transport._htmlForXfa)===null||a===void 0?void 0:a.children[this._pageIndex])||null);case 1:case"end":return u.stop()}},t,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"render",value:function(e){var t,a,o=this,u,l=e.canvasContext,h=e.viewport,S=e.intent,w=S===void 0?"display":S,x=e.annotationMode,N=x===void 0?_util.AnnotationMode.ENABLE:x,T=e.transform,R=T===void 0?null:T,P=e.imageLayer,A=P===void 0?null:P,D=e.canvasFactory,k=D===void 0?null:D,z=e.background,v=z===void 0?null:z,f=e.optionalContentConfigPromise,d=f===void 0?null:f,b=e.annotationCanvasMap,y=b===void 0?null:b;((t=arguments[0])===null||t===void 0?void 0:t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&N===_util.AnnotationMode.ENABLE&&(N=_util.AnnotationMode.ENABLE_FORMS)),((a=arguments[0])===null||a===void 0?void 0:a.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&N===_util.AnnotationMode.ENABLE&&(N=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");var p=this._transport.getRenderingIntent(w,N);this.pendingCleanup=!1,d||(d=this._transport.getOptionalContentConfig());var C=this._intentStates.get(p.cacheKey);C||(C=Object.create(null),this._intentStates.set(p.cacheKey,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);var I=k||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),j=!!(p.renderingIntent&_util.RenderingIntentFlag.PRINT);C.displayReadyCapability||(C.displayReadyCapability=(0,_util.createPromiseCapability)(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(p));var W=function(ie){C.renderTasks.delete(H),(o.cleanupAfterRender||j)&&(o.pendingCleanup=!0),o._tryCleanup(),ie?(H.capability.reject(ie),o._abortOperatorList({intentState:C,reason:ie instanceof Error?ie:new Error(ie)})):H.capability.resolve(),o._stats&&(o._stats.timeEnd("Rendering"),o._stats.timeEnd("Overall"))},H=new InternalRenderTask({callback:W,params:{canvasContext:l,viewport:h,transform:R,imageLayer:A,background:v},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:y,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:I,useRequestAnimationFrame:!j,pdfBug:this._pdfBug});((u=C).renderTasks||(u.renderTasks=new Set)).add(H);var Q=H.task;return Promise.all([C.displayReadyCapability.promise,d]).then(function(K){var ie=_slicedToArray(K,2),V=ie[0],Y=ie[1];if(o.pendingCleanup){W();return}o._stats&&o._stats.time("Rendering"),H.initializeGraphics({transparency:V,optionalContentConfig:Y}),H.operatorListChanged()}).catch(W),Q}},{key:"getOperatorList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.intent,a=t===void 0?"display":t,o=e.annotationMode,u=o===void 0?_util.AnnotationMode.ENABLE:o;function l(){S.operatorList.lastChunk&&(S.opListReadCapability.resolve(S.operatorList),S.renderTasks.delete(w))}var h=this._transport.getRenderingIntent(a,u,!0),S=this._intentStates.get(h.cacheKey);S||(S=Object.create(null),this._intentStates.set(h.cacheKey,S));var w;if(!S.opListReadCapability){var x;w=Object.create(null),w.operatorListChanged=l,S.opListReadCapability=(0,_util.createPromiseCapability)(),((x=S).renderTasks||(x.renderTasks=new Set)).add(w),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(h)}return S.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.normalizeWhitespace,a=t===void 0?!1:t,o=e.disableCombineTextItems,u=o===void 0?!1:o,l=e.includeMarkedContent,h=l===void 0?!1:l,S=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:a===!0,combineTextItems:u!==!0,includeMarkedContent:h===!0},{highWaterMark:S,size:function(x){return x.items.length}})}},{key:"getTextContent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(a){return _xfa_text.XfaText.textContent(a)});var t=this.streamTextContent(e);return new Promise(function(a,o){function u(){l.read().then(function(S){var w,x=S.value,N=S.done;if(N){a(h);return}Object.assign(h.styles,x.styles),(w=h.items).push.apply(w,_toConsumableArray(x.items)),u()},o)}var l=t.getReader(),h={items:[],styles:Object.create(null)};u()})}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0;var e=[],t=_createForOfIteratorHelper(this._intentStates.values()),a;try{for(t.s();!(a=t.n()).done;){var o=a.value;if(this._abortOperatorList({intentState:o,reason:new Error("Page was destroyed."),force:!0}),!o.opListReadCapability){var u=_createForOfIteratorHelper(o.renderTasks),l;try{for(u.s();!(l=u.n()).done;){var h=l.value;e.push(h.completed),h.cancel()}}catch(S){u.e(S)}finally{u.f()}}}}catch(S){t.e(S)}finally{t.f()}return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}},{key:"cleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(e)}},{key:"_tryCleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;var t=_createForOfIteratorHelper(this._intentStates.values()),a;try{for(t.s();!(a=t.n()).done;){var o=a.value,u=o.renderTasks,l=o.operatorList;if(u.size>0||!l.lastChunk)return!1}}catch(h){t.e(h)}finally{t.f()}return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(e,t){var a=this._intentStates.get(t);!a||(this._stats&&this._stats.timeEnd("Page Request"),a.displayReadyCapability&&a.displayReadyCapability.resolve(e))}},{key:"_renderPageChunk",value:function(e,t){for(var a=0,o=e.length;a<o;a++)t.operatorList.fnArray.push(e.fnArray[a]),t.operatorList.argsArray.push(e.argsArray[a]);t.operatorList.lastChunk=e.lastChunk;var u=_createForOfIteratorHelper(t.renderTasks),l;try{for(u.s();!(l=u.n()).done;){var h=l.value;h.operatorListChanged()}}catch(S){u.e(S)}finally{u.f()}e.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(e){var t=this,a=e.renderingIntent,o=e.cacheKey,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:o,annotationStorage:a&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}),l=u.getReader(),h=this._intentStates.get(o);h.streamReader=l;var S=function w(){l.read().then(function(x){var N=x.value,T=x.done;if(T){h.streamReader=null;return}t._transport.destroyed||(t._renderPageChunk(N,h),w())},function(x){if(h.streamReader=null,!t._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;var N=_createForOfIteratorHelper(h.renderTasks),T;try{for(N.s();!(T=N.n()).done;){var R=T.value;R.operatorListChanged()}}catch(P){N.e(P)}finally{N.f()}t._tryCleanup()}if(h.displayReadyCapability)h.displayReadyCapability.reject(x);else if(h.opListReadCapability)h.opListReadCapability.reject(x);else throw x}})};S()}},{key:"_abortOperatorList",value:function(e){var t=this,a=e.intentState,o=e.reason,u=e.force,l=u===void 0?!1:u;if(!!a.streamReader){if(!l){if(a.renderTasks.size>0)return;if(o instanceof _display_utils.RenderingCancelledException){a.streamReaderCancelTimeout=setTimeout(function(){t._abortOperatorList({intentState:a,reason:o,force:!0}),a.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(a.streamReader.cancel(new _util.AbortException(o.message)).catch(function(){}),a.streamReader=null,!this._transport.destroyed){var h=_createForOfIteratorHelper(this._intentStates),S;try{for(h.s();!(S=h.n()).done;){var w=_slicedToArray(S.value,2),x=w[0],N=w[1];if(N===a){this._intentStates.delete(x);break}}}catch(T){h.e(T)}finally{h.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),i}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function i(){_classCallCheck(this,i),this._listeners=[],this._deferred=Promise.resolve()}return _createClass(i,[{key:"postMessage",value:function(e,t){var a=this;function o(l){if(globalThis.structuredClone)return globalThis.structuredClone(l,t);function h(w){if(typeof w=="function"||_typeof(w)==="symbol"||w instanceof URL)throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(w==null?void 0:w.toString()));if(_typeof(w)!=="object"||w===null)return w;if(S.has(w))return S.get(w);var x,N;if((x=w.buffer)&&(0,_util.isArrayBuffer)(x))return t!=null&&t.includes(x)?N=new w.constructor(x,w.byteOffset,w.byteLength):N=new w.constructor(w),S.set(w,N),N;if(w instanceof Map){N=new Map,S.set(w,N);var T=_createForOfIteratorHelper(w),R;try{for(T.s();!(R=T.n()).done;){var P=_slicedToArray(R.value,2),A=P[0],D=P[1];N.set(A,h(D))}}catch(p){T.e(p)}finally{T.f()}return N}if(w instanceof Set){N=new Set,S.set(w,N);var k=_createForOfIteratorHelper(w),z;try{for(k.s();!(z=k.n()).done;){var v=z.value;N.add(h(v))}}catch(p){k.e(p)}finally{k.f()}return N}N=Array.isArray(w)?[]:Object.create(null),S.set(w,N);for(var f in w){for(var d,b=void 0,y=w;!(b=Object.getOwnPropertyDescriptor(y,f));)y=Object.getPrototypeOf(y);typeof b.value!="undefined"&&(typeof b.value=="function"&&!((d=w.hasOwnProperty)!==null&&d!==void 0&&d.call(w,f))||(N[f]=h(b.value)))}return N}var S=new WeakMap;return h(l)}var u={data:o(e)};this._deferred.then(function(){var l=_createForOfIteratorHelper(a._listeners),h;try{for(l.s();!(h=l.n()).done;){var S=h.value;S.call(a,u)}}catch(w){l.e(w)}finally{l.f()}})}},{key:"addEventListener",value:function(e,t){this._listeners.push(t)}},{key:"removeEventListener",value:function(e,t){var a=this._listeners.indexOf(t);this._listeners.splice(a,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),i}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if((typeof document=="undefined"?"undefined":_typeof(document))==="object"){var _document,_document$currentScri,pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(i){var n='importScripts("'.concat(i,'");');return URL.createObjectURL(new Blob([n]))}}var PDFWorker=function(){function PDFWorker(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=i.name,e=n===void 0?null:n,t=i.port,a=t===void 0?null:t,o=i.verbosity,u=o===void 0?(0,_util.getVerbosityLevel)():o;if(_classCallCheck(this,PDFWorker),a&&PDFWorker._workerPorts.has(a))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=e,this.destroyed=!1,this.verbosity=u,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a){PDFWorker._workerPorts.set(a,this),this._initializeFromPort(a);return}this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(n){this._port=n,this._messageHandler=new _message_handler.MessageHandler("main","worker",n),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var n=this;if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var e=PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));var t=new Worker(e),a=new _message_handler.MessageHandler("main","worker",t),o=function(){t.removeEventListener("error",u),a.destroy(),t.terminate(),n.destroyed?n._readyCapability.reject(new Error("Worker was destroyed")):n._setupFakeWorker()},u=function(){n._webWorker||o()};t.addEventListener("error",u),a.on("test",function(h){if(t.removeEventListener("error",u),n.destroyed){o();return}h?(n._messageHandler=a,n._port=t,n._webWorker=t,n._readyCapability.resolve(),a.send("configure",{verbosity:n.verbosity})):(n._setupFakeWorker(),a.destroy(),t.terminate())}),a.on("ready",function(h){if(t.removeEventListener("error",u),n.destroyed){o();return}try{l()}catch{n._setupFakeWorker()}});var l=function(){var S=new Uint8Array([255]);try{a.send("test",S,[S.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),S[0]=0,a.send("test",S)}};l();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var n=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(function(e){if(n.destroyed){n._readyCapability.reject(new Error("Worker was destroyed"));return}var t=new LoopbackPort;n._port=t;var a="fake".concat(PDFWorkerUtil.fakeWorkerId++),o=new _message_handler.MessageHandler(a+"_worker",a,t);e.setup(o,t);var u=new _message_handler.MessageHandler(a,a+"_worker",t);n._messageHandler=u,n._readyCapability.resolve(),u.send("configure",{verbosity:n.verbosity})}).catch(function(e){n._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"_workerPorts",get:function(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}},{key:"fromPort",value:function(n){if(!(n!=null&&n.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(n.port)?this._workerPorts.get(n.port):new PDFWorker(n)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var n;return((n=globalThis.pdfjsWorker)===null||n===void 0?void 0:n.WorkerMessageHandler)||null}catch{return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this,loader=function(){var _ref15=_asyncToGenerator(_regenerator.default.mark(function _callee4(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(mainWorkerMessageHandler=_this11._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context4.next=3;break}return _context4.abrupt("return",mainWorkerMessageHandler);case 3:if(!(_is_node.isNodeJS&&typeof commonjsRequire=="function")){_context4.next=6;break}return worker=eval("require")(_this11.workerSrc),_context4.abrupt("return",worker.WorkerMessageHandler);case 6:return _context4.next=8,(0,_display_utils.loadScript)(_this11.workerSrc);case 8:return _context4.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context4.stop()}},_callee4)}));return function i(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]),PDFWorker}();exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap,WorkerTransport=function(){function i(n,e,t,a){_classCallCheck(this,i),_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=n,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,a.useWorkerFetch||(this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked}),this.StandardFontDataFactory=new a.StandardFontDataFactory({baseUrl:a.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}return _createClass(i,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"stats",get:function(){return _classPrivateFieldGet(this,_docStats)}},{key:"getRenderingIntent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=_util.RenderingIntentFlag.DISPLAY,u="";switch(e){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(e))}switch(t){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,u=this.annotationStorage.lastModified;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(t))}return a&&(o+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:o,cacheKey:"".concat(o,"_").concat(u)}}},{key:"destroy",value:function(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var t=[],a=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),o;try{for(a.s();!(o=a.n()).done;){var u=o.value;t.push(u._destroy())}}catch(h){a.e(h)}finally{a.f()}_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var l=this.messageHandler.sendWithPromise("Terminate",null);return t.push(l),Promise.all(t).then(function(){e.commonObjs.clear(),e.fontLoader.clear(),_classPrivateFieldSet(e,_metadataPromise,null),e._getFieldObjectsPromise=null,e._hasJSActionsPromise=null,e._networkStream&&e._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var e=this,t=this.messageHandler,a=this.loadingTask;t.on("GetReader",function(o,u){(0,_util.assert)(e._networkStream,"GetReader - no `IPDFStream` instance available."),e._fullReader=e._networkStream.getFullReader(),e._fullReader.onProgress=function(l){e._lastProgress={loaded:l.loaded,total:l.total}},u.onPull=function(){e._fullReader.read().then(function(l){var h=l.value,S=l.done;if(S){u.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(h),"GetReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(h),1,[h])}).catch(function(l){u.error(l)})},u.onCancel=function(l){e._fullReader.cancel(l),u.ready.catch(function(h){if(!e.destroyed)throw h})}}),t.on("ReaderHeadersReady",function(o){var u=(0,_util.createPromiseCapability)(),l=e._fullReader;return l.headersReady.then(function(){if(!l.isStreamingSupported||!l.isRangeSupported){if(e._lastProgress){var h;(h=a.onProgress)===null||h===void 0||h.call(a,e._lastProgress)}l.onProgress=function(S){var w;(w=a.onProgress)===null||w===void 0||w.call(a,{loaded:S.loaded,total:S.total})}}u.resolve({isStreamingSupported:l.isStreamingSupported,isRangeSupported:l.isRangeSupported,contentLength:l.contentLength})},u.reject),u.promise}),t.on("GetRangeReader",function(o,u){(0,_util.assert)(e._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var l=e._networkStream.getRangeReader(o.begin,o.end);if(!l){u.close();return}u.onPull=function(){l.read().then(function(h){var S=h.value,w=h.done;if(w){u.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(S),"GetRangeReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(S),1,[S])}).catch(function(h){u.error(h)})},u.onCancel=function(h){l.cancel(h),u.ready.catch(function(S){if(!e.destroyed)throw S})}}),t.on("GetDoc",function(o){var u=o.pdfInfo;e._numPages=u.numPages,e._htmlForXfa=u.htmlForXfa,delete u.htmlForXfa,a._capability.resolve(new PDFDocumentProxy(u,e))}),t.on("DocException",function(o){var u;switch(o.name){case"PasswordException":u=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":u=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":u=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":u=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":u=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}a._capability.reject(u)}),t.on("PasswordRequest",function(o){if(e._passwordCapability=(0,_util.createPromiseCapability)(),a.onPassword){var u=function(h){e._passwordCapability.resolve({password:h})};try{a.onPassword(u,o.code)}catch(l){e._passwordCapability.reject(l)}}else e._passwordCapability.reject(new _util.PasswordException(o.message,o.code));return e._passwordCapability.promise}),t.on("DataLoaded",function(o){var u;(u=a.onProgress)===null||u===void 0||u.call(a,{loaded:o.length,total:o.length}),e.downloadInfoCapability.resolve(o)}),t.on("StartRenderPage",function(o){if(!e.destroyed){var u=_classPrivateFieldGet(e,_pageCache).get(o.pageIndex);u._startRenderPage(o.transparency,o.cacheKey)}}),t.on("commonobj",function(o){var u,l=_slicedToArray(o,3),h=l[0],S=l[1],w=l[2];if(!e.destroyed&&!e.commonObjs.has(h))switch(S){case"Font":var x=e._params;if("error"in w){var N=w.error;(0,_util.warn)("Error during font loading: ".concat(N)),e.commonObjs.resolve(h,N);break}var T=null;x.pdfBug&&(u=globalThis.FontInspector)!==null&&u!==void 0&&u.enabled&&(T={registerFont:function(A,D){globalThis.FontInspector.fontAdded(A,D)}});var R=new _font_loader.FontFaceObject(w,{isEvalSupported:x.isEvalSupported,disableFontFace:x.disableFontFace,ignoreErrors:x.ignoreErrors,onUnsupportedFeature:e._onUnsupportedFeature.bind(e),fontRegistry:T});e.fontLoader.bind(R).catch(function(P){return t.sendWithPromise("FontFallback",{id:h})}).finally(function(){!x.fontExtraProperties&&R.data&&(R.data=null),e.commonObjs.resolve(h,R)});break;case"FontPath":case"Image":e.commonObjs.resolve(h,w);break;default:throw new Error("Got unknown common object type ".concat(S))}}),t.on("obj",function(o){var u,l=_slicedToArray(o,4),h=l[0],S=l[1],w=l[2],x=l[3];if(!e.destroyed){var N=_classPrivateFieldGet(e,_pageCache).get(S);if(!N.objs.has(h))switch(w){case"Image":N.objs.resolve(h,x);var T=8e6;(x==null||(u=x.data)===null||u===void 0?void 0:u.length)>T&&(N.cleanupAfterRender=!0);break;case"Pattern":N.objs.resolve(h,x);break;default:throw new Error("Got unknown object type ".concat(w))}}}),t.on("DocProgress",function(o){var u;e.destroyed||(u=a.onProgress)===null||u===void 0||u.call(a,{loaded:o.loaded,total:o.total})}),t.on("DocStats",function(o){e.destroyed||_classPrivateFieldSet(e,_docStats,Object.freeze({streamTypes:Object.freeze(o.streamTypes),fontTypes:Object.freeze(o.fontTypes)}))}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",function(o){return e.destroyed?Promise.reject(new Error("Worker was destroyed.")):e.CMapReaderFactory?e.CMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),t.on("FetchStandardFontData",function(o){return e.destroyed?Promise.reject(new Error("Worker was destroyed.")):e.StandardFontDataFactory?e.StandardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"_onUnsupportedFeature",value:function(e){var t,a,o=e.featureId;this.destroyed||(t=(a=this.loadingTask).onUnsupportedFeature)===null||t===void 0||t.call(a,o)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(e){var t=this;if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));var a=e-1,o=_classPrivateFieldGet(this,_pagePromises).get(a);if(o)return o;var u=this.messageHandler.sendWithPromise("GetPage",{pageIndex:a}).then(function(l){if(t.destroyed)throw new Error("Transport destroyed");var h=new PDFPageProxy(a,l,t,t._params.ownerDocument,t._params.pdfBug);return _classPrivateFieldGet(t,_pageCache).set(a,h),h});return _classPrivateFieldGet(this,_pagePromises).set(a,u),u}},{key:"getPageIndex",value:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e})}},{key:"getAnnotations",value:function(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}},{key:"saveDocument",value:function(){var e,t,a=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(e=(t=this._fullReader)===null||t===void 0?void 0:t.filename)!==null&&e!==void 0?e:null}).finally(function(){a.annotationStorage.resetModified()})}},{key:"getFieldObjects",value:function(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}},{key:"getStructTree",value:function(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(e){return new _optional_content_config.OptionalContentConfig(e)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var e=this;return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(function(t){var a,o,u,l;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:(a=(o=e._fullReader)===null||o===void 0?void 0:o.filename)!==null&&a!==void 0?a:null,contentLength:(u=(l=e._fullReader)===null||l===void 0?void 0:l.contentLength)!==null&&u!==void 0?u:null}}))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function t(){var a,o,u,l,h,S=arguments;return _regenerator.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return a=S.length>0&&S[0]!==void 0?S[0]:!1,x.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){x.next=5;break}return x.abrupt("return");case 5:o=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),x.prev=6,o.s();case 8:if((u=o.n()).done){x.next=15;break}if(l=u.value,h=l.cleanup(),h){x.next=13;break}throw new Error("startCleanup: Page ".concat(l.pageNumber," is currently rendering."));case 13:x.next=8;break;case 15:x.next=20;break;case 17:x.prev=17,x.t0=x.catch(6),o.e(x.t0);case 20:return x.prev=20,o.f(),x.finish(20);case 23:this.commonObjs.clear(),a||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 28:case"end":return x.stop()}},t,this,[[6,17,20,23]])}));function e(){return n.apply(this,arguments)}return e}()},{key:"loadingParams",get:function(){var e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}]),i}(),PDFObjects=function(){function i(){_classCallCheck(this,i),this._objs=Object.create(null)}return _createClass(i,[{key:"_ensureObj",value:function(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t)return this._ensureObj(e).capability.promise.then(t),null;var a=this._objs[e];if(!a||!a.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return a.data}},{key:"has",value:function(e){var t=this._objs[e];return(t==null?void 0:t.resolved)||!1}},{key:"resolve",value:function(e,t){var a=this._ensureObj(e);a.resolved=!0,a.data=t,a.capability.resolve(t)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),i}(),RenderTask=function(){function i(n){_classCallCheck(this,i),this._internalRenderTask=n,this.onContinue=null}return _createClass(i,[{key:"promise",get:function(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function(){this._internalRenderTask.cancel()}}]),i}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function i(n){var e=n.callback,t=n.params,a=n.objs,o=n.commonObjs,u=n.annotationCanvasMap,l=n.operatorList,h=n.pageIndex,S=n.canvasFactory,w=n.useRequestAnimationFrame,x=w===void 0?!1:w,N=n.pdfBug,T=N===void 0?!1:N;_classCallCheck(this,i),this.callback=e,this.params=t,this.objs=a,this.commonObjs=o,this.annotationCanvasMap=u,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=S,this._pdfBug=T,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=x===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}return _createClass(i,[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(e){var t,a=e.transparency,o=a===void 0?!1:a,u=e.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(i.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i.canvasInUse.add(this._canvas)}this._pdfBug&&(t=globalThis.StepperManager)!==null&&t!==void 0&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var l=this.params,h=l.canvasContext,S=l.viewport,w=l.transform,x=l.imageLayer,N=l.background;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,x,u,this.annotationCanvasMap),this.gfx.beginDrawing({transform:w,viewport:S,transparency:o,background:N}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&i.canvasInUse.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}},{key:"_continue",value:function(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var e=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){e._nextBound().catch(e._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.cancelled){o.next=2;break}return o.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&i.canvasInUse.delete(this._canvas),this.callback()));case 4:case"end":return o.stop()}},t,this)}));function e(){return n.apply(this,arguments)}return e}()}],[{key:"canvasInUse",get:function(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}}]),i}(),version="2.12.313";exports.version=version;var build="a2ae56f39";exports.build=build},(i,n,e)=>{function t(p){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(I){return typeof I}:t=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},t(p)}Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var a=u(e(2)),o=e(4);function u(p){return p&&p.__esModule?p:{default:p}}function l(p,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(C&&C.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),C&&h(p,C)}function h(p,C){return h=Object.setPrototypeOf||function(j,W){return j.__proto__=W,j},h(p,C)}function S(p){var C=N();return function(){var j=T(p),W;if(C){var H=T(this).constructor;W=Reflect.construct(j,arguments,H)}else W=j.apply(this,arguments);return w(this,W)}}function w(p,C){if(C&&(t(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(p)}function x(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function T(p){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},T(p)}function R(p,C,I,j,W,H,Q){try{var K=p[H](Q),ie=K.value}catch(V){I(V);return}K.done?C(ie):Promise.resolve(ie).then(j,W)}function P(p){return function(){var C=this,I=arguments;return new Promise(function(j,W){var H=p.apply(C,I);function Q(ie){R(H,j,W,Q,K,"next",ie)}function K(ie){R(H,j,W,Q,K,"throw",ie)}Q(void 0)})}}function A(p,C){var I=typeof Symbol!="undefined"&&p[Symbol.iterator]||p["@@iterator"];if(!I){if(Array.isArray(p)||(I=D(p))||C&&p&&typeof p.length=="number"){I&&(p=I);var j=0,W=function(){};return{s:W,n:function(){return j>=p.length?{done:!0}:{done:!1,value:p[j++]}},e:function(V){throw V},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=!0,Q=!1,K;return{s:function(){I=I.call(p)},n:function(){var V=I.next();return H=V.done,V},e:function(V){Q=!0,K=V},f:function(){try{!H&&I.return!=null&&I.return()}finally{if(Q)throw K}}}}function D(p,C){if(!!p){if(typeof p=="string")return k(p,C);var I=Object.prototype.toString.call(p).slice(8,-1);if(I==="Object"&&p.constructor&&(I=p.constructor.name),I==="Map"||I==="Set")return Array.from(p);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return k(p,C)}}function k(p,C){(C==null||C>p.length)&&(C=p.length);for(var I=0,j=new Array(C);I<C;I++)j[I]=p[I];return j}function z(p,C){if(!(p instanceof C))throw new TypeError("Cannot call a class as a function")}function v(p,C){for(var I=0;I<C.length;I++){var j=C[I];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(p,j.key,j)}}function f(p,C,I){return C&&v(p.prototype,C),I&&v(p,I),p}var d=function(){function p(C){var I=C.docId,j=C.onUnsupportedFeature,W=C.ownerDocument,H=W===void 0?globalThis.document:W;C.styleElement,z(this,p),this.constructor===p&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=I,this._onUnsupportedFeature=j,this._document=H,this.nativeFontFaces=[],this.styleElement=null}return f(p,[{key:"addNativeFontFace",value:function(I){this.nativeFontFaces.push(I),this._document.fonts.add(I)}},{key:"insertRule",value:function(I){var j=this.styleElement;j||(j=this.styleElement=this._document.createElement("style"),j.id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(j));var W=j.sheet;W.insertRule(I,W.cssRules.length)}},{key:"clear",value:function(){var I=A(this.nativeFontFaces),j;try{for(I.s();!(j=I.n()).done;){var W=j.value;this._document.fonts.delete(W)}}catch(H){I.e(H)}finally{I.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:function(){var C=P(a.default.mark(function j(W){var H=this,Q,K;return a.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!(W.attached||W.missingFile)){V.next=2;break}return V.abrupt("return");case 2:if(W.attached=!0,!this.isFontLoadingAPISupported){V.next=19;break}if(Q=W.createNativeFontFace(),!Q){V.next=18;break}return this.addNativeFontFace(Q),V.prev=7,V.next=10,Q.loaded;case 10:V.next=18;break;case 12:throw V.prev=12,V.t0=V.catch(7),this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,o.warn)("Failed to load font '".concat(Q.family,"': '").concat(V.t0,"'.")),W.disableFontFace=!0,V.t0;case 18:return V.abrupt("return");case 19:if(K=W.createFontFaceRule(),!K){V.next=26;break}if(this.insertRule(K),!this.isSyncFontLoadingSupported){V.next=24;break}return V.abrupt("return");case 24:return V.next=26,new Promise(function(Y){var F=H._queueLoadingCallback(Y);H._prepareFontLoadEvent([K],[W],F)});case 26:case"end":return V.stop()}},j,this,[[7,12]])}));function I(j){return C.apply(this,arguments)}return I}()},{key:"_queueLoadingCallback",value:function(I){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var I,j=!!((I=this._document)!==null&&I!==void 0&&I.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",j)}},{key:"isSyncFontLoadingSupported",get:function(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(I,j,W){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),p}(),b;n.FontLoader=b,n.FontLoader=b=function(p){l(I,p);var C=S(I);function I(j){var W;return z(this,I),W=C.call(this,j),W.loadingContext={requests:[],nextRequestId:0},W.loadTestFontId=0,W}return f(I,[{key:"isSyncFontLoadingSupported",get:function(){var W=!1;if(typeof navigator=="undefined")W=!0;else{var H=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(H==null?void 0:H[1])>=14&&(W=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",W)}},{key:"_queueLoadingCallback",value:function(W){function H(){for((0,o.assert)(!K.done,"completeRequest() cannot be called twice."),K.done=!0;Q.requests.length>0&&Q.requests[0].done;){var ie=Q.requests.shift();setTimeout(ie.callback,0)}}var Q=this.loadingContext,K={id:"pdfjs-font-loading-".concat(Q.nextRequestId++),done:!1,complete:H,callback:W};return Q.requests.push(K),K}},{key:"_loadTestFont",get:function(){var W=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,o.shadow)(this,"_loadTestFont",W())}},{key:"_prepareFontLoadEvent",value:function(W,H,Q){function K(ve,_e){return ve.charCodeAt(_e)<<24|ve.charCodeAt(_e+1)<<16|ve.charCodeAt(_e+2)<<8|ve.charCodeAt(_e+3)&255}function ie(ve,_e,Re,we){var Ie=ve.substring(0,_e),Fe=ve.substring(_e+Re);return Ie+we+Fe}var V,Y,F=this._document.createElement("canvas");F.width=1,F.height=1;var m=F.getContext("2d"),E=0;function L(ve,_e){if(E++,E>30){(0,o.warn)("Load test font never loaded."),_e();return}m.font="30px "+ve,m.fillText(".",0,20);var Re=m.getImageData(0,0,1,1);if(Re.data[3]>0){_e();return}setTimeout(L.bind(null,ve,_e))}var X="lt".concat(Date.now()).concat(this.loadTestFontId++),re=this._loadTestFont,q=976;re=ie(re,q,X.length,X);var be=16,Ce=1482184792,Ee=K(re,be);for(V=0,Y=X.length-3;V<Y;V+=4)Ee=Ee-Ce+K(X,V)|0;V<X.length&&(Ee=Ee-Ce+K(X+"XXX",V)|0),re=ie(re,be,4,(0,o.string32)(Ee));var G="url(data:font/opentype;base64,".concat(btoa(re),");"),M='@font-face {font-family:"'.concat(X,'";src:').concat(G,"}");this.insertRule(M);var g=[],c=A(H),_;try{for(c.s();!(_=c.n()).done;){var B=_.value;g.push(B.loadedName)}}catch(ve){c.e(ve)}finally{c.f()}g.push(X);var U=this._document.createElement("div");U.style.visibility="hidden",U.style.width=U.style.height="10px",U.style.position="absolute",U.style.top=U.style.left="0px";for(var ee=0,ue=g;ee<ue.length;ee++){var pe=ue[ee],ge=this._document.createElement("span");ge.textContent="Hi",ge.style.fontFamily=pe,U.appendChild(ge)}this._document.body.appendChild(U),L(X,function(){U.remove(),Q.complete()})}}]),I}(d);var y=function(){function p(C,I){var j=I.isEvalSupported,W=j===void 0?!0:j,H=I.disableFontFace,Q=H===void 0?!1:H,K=I.ignoreErrors,ie=K===void 0?!1:K,V=I.onUnsupportedFeature,Y=I.fontRegistry,F=Y===void 0?null:Y;z(this,p),this.compiledGlyphs=Object.create(null);for(var m in C)this[m]=C[m];this.isEvalSupported=W!==!1,this.disableFontFace=Q===!0,this.ignoreErrors=ie===!0,this._onUnsupportedFeature=V,this.fontRegistry=F}return f(p,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var I;if(!this.cssFontInfo)I=new FontFace(this.loadedName,this.data,{});else{var j={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(j.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),I=new FontFace(this.cssFontInfo.fontFamily,this.data,j)}return this.fontRegistry&&this.fontRegistry.registerFont(this),I}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var I=(0,o.bytesToString)(this.data),j="url(data:".concat(this.mimetype,";base64,").concat(btoa(I),");"),W;if(!this.cssFontInfo)W='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(j,"}");else{var H="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(H+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),W='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(H,"src:").concat(j,"}")}return this.fontRegistry&&this.fontRegistry.registerFont(this,j),W}},{key:"getPathGenerator",value:function(I,j){if(this.compiledGlyphs[j]!==void 0)return this.compiledGlyphs[j];var W;try{W=I.get(this.loadedName+"_path_"+j)}catch(Y){if(!this.ignoreErrors)throw Y;return this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,o.warn)('getPathGenerator - ignoring character: "'.concat(Y,'".')),this.compiledGlyphs[j]=function(F,m){}}if(this.isEvalSupported&&o.IsEvalSupportedCached.value){var H=[],Q=A(W),K;try{for(Q.s();!(K=Q.n()).done;){var ie=K.value,V=ie.args!==void 0?ie.args.join(","):"";H.push("c.",ie.cmd,"(",V,`);
`)}}catch(Y){Q.e(Y)}finally{Q.f()}return this.compiledGlyphs[j]=new Function("c","size",H.join(""))}return this.compiledGlyphs[j]=function(Y,F){var m=A(W),E;try{for(m.s();!(E=m.n()).done;){var L=E.value;L.cmd==="scale"&&(L.args=[F,-F]),Y[L.cmd].apply(Y,L.args)}}catch(X){m.e(X)}finally{m.f()}}}}]),p}();n.FontFaceObject=y},(i,n,e)=>{function t(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(b){return typeof b}:t=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},t(f)}Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var a=e(135),o=e(6),u=e(4);function l(f,d){for(var b=0;b<d.length;b++){var y=d[b];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}function h(f,d,b){return d&&l(f.prototype,d),b&&l(f,b),f}function S(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),d&&w(f,d)}function w(f,d){return w=Object.setPrototypeOf||function(y,p){return y.__proto__=p,y},w(f,d)}function x(f){var d=R();return function(){var y=P(f),p;if(d){var C=P(this).constructor;p=Reflect.construct(y,arguments,C)}else p=y.apply(this,arguments);return N(this,p)}}function N(f,d){if(d&&(t(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T(f)}function T(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P(f){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},P(f)}function A(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var D=function f(){A(this,f),(0,u.unreachable)("Not implemented: NodeCanvasFactory")};n.NodeCanvasFactory=D;var k=function f(){A(this,f),(0,u.unreachable)("Not implemented: NodeCMapReaderFactory")};n.NodeCMapReaderFactory=k;var z=function f(){A(this,f),(0,u.unreachable)("Not implemented: NodeStandardFontDataFactory")};if(n.NodeStandardFontDataFactory=z,o.isNodeJS){var v=function(d){return new Promise(function(b,y){var p=require$$4;p.readFile(d,function(C,I){if(C||!I){y(new Error(C));return}b(new Uint8Array(I))})})};n.NodeCanvasFactory=D=function(f){S(b,f);var d=x(b);function b(){return A(this,b),d.apply(this,arguments)}return h(b,[{key:"_createCanvas",value:function(p,C){var I=require$$4;return I.createCanvas(p,C)}}]),b}(a.BaseCanvasFactory),n.NodeCMapReaderFactory=k=function(f){S(b,f);var d=x(b);function b(){return A(this,b),d.apply(this,arguments)}return h(b,[{key:"_fetchData",value:function(p,C){return v(p).then(function(I){return{cMapData:I,compressionType:C}})}}]),b}(a.BaseCMapReaderFactory),n.NodeStandardFontDataFactory=z=function(f){S(b,f);var d=x(b);function b(){return A(this,b),d.apply(this,arguments)}return h(b,[{key:"_fetchData",value:function(p){return v(p)}}]),b}(a.BaseStandardFontDataFactory)}},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationStorage=void 0;var t=e(4);function a(R,P){return S(R)||h(R,P)||u(R,P)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(R,P){if(!!R){if(typeof R=="string")return l(R,P);var A=Object.prototype.toString.call(R).slice(8,-1);if(A==="Object"&&R.constructor&&(A=R.constructor.name),A==="Map"||A==="Set")return Array.from(R);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return l(R,P)}}function l(R,P){(P==null||P>R.length)&&(P=R.length);for(var A=0,D=new Array(P);A<P;A++)D[A]=R[A];return D}function h(R,P){var A=R==null?null:typeof Symbol!="undefined"&&R[Symbol.iterator]||R["@@iterator"];if(A!=null){var D=[],k=!0,z=!1,v,f;try{for(A=A.call(R);!(k=(v=A.next()).done)&&(D.push(v.value),!(P&&D.length===P));k=!0);}catch(d){z=!0,f=d}finally{try{!k&&A.return!=null&&A.return()}finally{if(z)throw f}}return D}}function S(R){if(Array.isArray(R))return R}function w(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function x(R,P){for(var A=0;A<P.length;A++){var D=P[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}function N(R,P,A){return P&&x(R.prototype,P),A&&x(R,A),R}var T=function(){function R(){w(this,R),this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}return N(R,[{key:"getValue",value:function(A,D){var k=this._storage.get(A);return k===void 0?D:Object.assign(D,k)}},{key:"setValue",value:function(A,D){var k=this._storage.get(A),z=!1;if(k!==void 0)for(var v=0,f=Object.entries(D);v<f.length;v++){var d=a(f[v],2),b=d[0],y=d[1];k[b]!==y&&(z=!0,k[b]=y)}else z=!0,this._storage.set(A,D);z&&(this._timeStamp=Date.now(),this._setModified())}},{key:"getAll",value:function(){return this._storage.size>0?(0,t.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"_setModified",value:function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}},{key:"serializable",get:function(){return this._storage.size>0?this._storage:null}},{key:"lastModified",get:function(){return this._timeStamp.toString()}}]),R}();n.AnnotationStorage=T},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var t=e(4),a=e(141),o=e(1);function u(G){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(g){return typeof g}:u=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(G)}function l(G,M){var g=typeof Symbol!="undefined"&&G[Symbol.iterator]||G["@@iterator"];if(!g){if(Array.isArray(G)||(g=T(G))||M&&G&&typeof G.length=="number"){g&&(G=g);var c=0,_=function(){};return{s:_,n:function(){return c>=G.length?{done:!0}:{done:!1,value:G[c++]}},e:function(pe){throw pe},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B=!0,U=!1,ee;return{s:function(){g=g.call(G)},n:function(){var pe=g.next();return B=pe.done,pe},e:function(pe){U=!0,ee=pe},f:function(){try{!B&&g.return!=null&&g.return()}finally{if(U)throw ee}}}}function h(G,M){if(!(G instanceof M))throw new TypeError("Cannot call a class as a function")}function S(G,M){for(var g=0;g<M.length;g++){var c=M[g];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(G,c.key,c)}}function w(G,M,g){return M&&S(G.prototype,M),g&&S(G,g),G}function x(G,M){return A(G)||P(G,M)||T(G,M)||N()}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(G,M){if(!!G){if(typeof G=="string")return R(G,M);var g=Object.prototype.toString.call(G).slice(8,-1);if(g==="Object"&&G.constructor&&(g=G.constructor.name),g==="Map"||g==="Set")return Array.from(G);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return R(G,M)}}function R(G,M){(M==null||M>G.length)&&(M=G.length);for(var g=0,c=new Array(M);g<M;g++)c[g]=G[g];return c}function P(G,M){var g=G==null?null:typeof Symbol!="undefined"&&G[Symbol.iterator]||G["@@iterator"];if(g!=null){var c=[],_=!0,B=!1,U,ee;try{for(g=g.call(G);!(_=(U=g.next()).done)&&(c.push(U.value),!(M&&c.length===M));_=!0);}catch(ue){B=!0,ee=ue}finally{try{!_&&g.return!=null&&g.return()}finally{if(B)throw ee}}return c}}function A(G){if(Array.isArray(G))return G}var D=16,k=100,z=4096,v=15,f=10,d=1e3,b=16,y=1.000001;function p(G,M){if(G._removeMirroring)throw new Error("Context is already forwarding operations.");G.__originalSave=G.save,G.__originalRestore=G.restore,G.__originalRotate=G.rotate,G.__originalScale=G.scale,G.__originalTranslate=G.translate,G.__originalTransform=G.transform,G.__originalSetTransform=G.setTransform,G.__originalResetTransform=G.resetTransform,G.__originalClip=G.clip,G.__originalMoveTo=G.moveTo,G.__originalLineTo=G.lineTo,G.__originalBezierCurveTo=G.bezierCurveTo,G.__originalRect=G.rect,G.__originalClosePath=G.closePath,G.__originalBeginPath=G.beginPath,G._removeMirroring=function(){G.save=G.__originalSave,G.restore=G.__originalRestore,G.rotate=G.__originalRotate,G.scale=G.__originalScale,G.translate=G.__originalTranslate,G.transform=G.__originalTransform,G.setTransform=G.__originalSetTransform,G.resetTransform=G.__originalResetTransform,G.clip=G.__originalClip,G.moveTo=G.__originalMoveTo,G.lineTo=G.__originalLineTo,G.bezierCurveTo=G.__originalBezierCurveTo,G.rect=G.__originalRect,G.closePath=G.__originalClosePath,G.beginPath=G.__originalBeginPath,delete G._removeMirroring},G.save=function(){M.save(),this.__originalSave()},G.restore=function(){M.restore(),this.__originalRestore()},G.translate=function(c,_){M.translate(c,_),this.__originalTranslate(c,_)},G.scale=function(c,_){M.scale(c,_),this.__originalScale(c,_)},G.transform=function(c,_,B,U,ee,ue){M.transform(c,_,B,U,ee,ue),this.__originalTransform(c,_,B,U,ee,ue)},G.setTransform=function(c,_,B,U,ee,ue){M.setTransform(c,_,B,U,ee,ue),this.__originalSetTransform(c,_,B,U,ee,ue)},G.resetTransform=function(){M.resetTransform(),this.__originalResetTransform()},G.rotate=function(c){M.rotate(c),this.__originalRotate(c)},G.clip=function(c){M.clip(c),this.__originalClip(c)},G.moveTo=function(g,c){M.moveTo(g,c),this.__originalMoveTo(g,c)},G.lineTo=function(g,c){M.lineTo(g,c),this.__originalLineTo(g,c)},G.bezierCurveTo=function(g,c,_,B,U,ee){M.bezierCurveTo(g,c,_,B,U,ee),this.__originalBezierCurveTo(g,c,_,B,U,ee)},G.rect=function(g,c,_,B){M.rect(g,c,_,B),this.__originalRect(g,c,_,B)},G.closePath=function(){M.closePath(),this.__originalClosePath()},G.beginPath=function(){M.beginPath(),this.__originalBeginPath()}}function C(G){if(!G.mozCurrentTransform){G._originalSave=G.save,G._originalRestore=G.restore,G._originalRotate=G.rotate,G._originalScale=G.scale,G._originalTranslate=G.translate,G._originalTransform=G.transform,G._originalSetTransform=G.setTransform,G._originalResetTransform=G.resetTransform,G._transformMatrix=G._transformMatrix||[1,0,0,1,0,0],G._transformStack=[];try{var M=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(G),"lineWidth");G._setLineWidth=M.set,G._getLineWidth=M.get,Object.defineProperty(G,"lineWidth",{set:function(c){this._setLineWidth(c*y)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(G,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(G,"mozCurrentTransformInverse",{get:function(){var c=x(this._transformMatrix,6),_=c[0],B=c[1],U=c[2],ee=c[3],ue=c[4],pe=c[5],ge=_*ee-B*U,ve=B*U-_*ee;return[ee/ge,B/ve,U/ve,_/ge,(ee*ue-U*pe)/ve,(B*ue-_*pe)/ge]}}),G.save=function(){var c=this._transformMatrix;this._transformStack.push(c),this._transformMatrix=c.slice(0,6),this._originalSave()},G.restore=function(){var c=this._transformStack.pop();c&&(this._transformMatrix=c,this._originalRestore())},G.translate=function(c,_){var B=this._transformMatrix;B[4]=B[0]*c+B[2]*_+B[4],B[5]=B[1]*c+B[3]*_+B[5],this._originalTranslate(c,_)},G.scale=function(c,_){var B=this._transformMatrix;B[0]*=c,B[1]*=c,B[2]*=_,B[3]*=_,this._originalScale(c,_)},G.transform=function(c,_,B,U,ee,ue){var pe=this._transformMatrix;this._transformMatrix=[pe[0]*c+pe[2]*_,pe[1]*c+pe[3]*_,pe[0]*B+pe[2]*U,pe[1]*B+pe[3]*U,pe[0]*ee+pe[2]*ue+pe[4],pe[1]*ee+pe[3]*ue+pe[5]],G._originalTransform(c,_,B,U,ee,ue)},G.setTransform=function(c,_,B,U,ee,ue){this._transformMatrix=[c,_,B,U,ee,ue],G._originalSetTransform(c,_,B,U,ee,ue)},G.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],G._originalResetTransform()},G.rotate=function(c){var _=Math.cos(c),B=Math.sin(c),U=this._transformMatrix;this._transformMatrix=[U[0]*_+U[2]*B,U[1]*_+U[3]*B,U[0]*-B+U[2]*_,U[1]*-B+U[3]*_,U[4],U[5]],this._originalRotate(c)}}}var I=function(){function G(M){h(this,G),this.canvasFactory=M,this.cache=Object.create(null)}return w(G,[{key:"getCanvas",value:function(g,c,_,B){var U;return this.cache[g]!==void 0?(U=this.cache[g],this.canvasFactory.reset(U,c,_),U.context.setTransform(1,0,0,1,0,0)):(U=this.canvasFactory.create(c,_),this.cache[g]=U),B&&C(U.context),U}},{key:"clear",value:function(){for(var g in this.cache){var c=this.cache[g];this.canvasFactory.destroy(c),delete this.cache[g]}}}]),G}();function j(G){var M=1e3,g=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=G.width,_=G.height,B=c+1,U,ee,ue,pe,ge=new Uint8Array(B*(_+1)),ve=c+7&-8,_e=G.data,Re=new Uint8Array(ve*_),we=0;for(U=0,ee=_e.length;U<ee;U++)for(var Ie=_e[U],Fe=128;Fe>0;)Re[we++]=Ie&Fe?0:255,Fe>>=1;var We=0;for(we=0,Re[we]!==0&&(ge[0]=1,++We),ue=1;ue<c;ue++)Re[we]!==Re[we+1]&&(ge[ue]=Re[we]?2:1,++We),we++;for(Re[we]!==0&&(ge[ue]=2,++We),U=1;U<_;U++){we=U*ve,pe=U*B,Re[we-ve]!==Re[we]&&(ge[pe]=Re[we]?1:8,++We);var Ue=(Re[we]?4:0)+(Re[we-ve]?8:0);for(ue=1;ue<c;ue++)Ue=(Ue>>2)+(Re[we+1]?4:0)+(Re[we-ve+1]?8:0),g[Ue]&&(ge[pe+ue]=g[Ue],++We),we++;if(Re[we-ve]!==Re[we]&&(ge[pe+ue]=Re[we]?2:4,++We),We>M)return null}for(we=ve*(_-1),pe=U*B,Re[we]!==0&&(ge[pe]=8,++We),ue=1;ue<c;ue++)Re[we]!==Re[we+1]&&(ge[pe+ue]=Re[we]?4:8,++We),we++;if(Re[we]!==0&&(ge[pe+ue]=4,++We),We>M)return null;var fe=new Int32Array([0,B,-1,0,-B,0,0,0,1]),de=[];for(U=0;We&&U<=_;U++){for(var $=U*B,te=$+c;$<te&&!ge[$];)$++;if($!==te){var Z=[$%B,U],oe=$,ne=ge[$];do{var J=fe[ne];do $+=J;while(!ge[$]);var he=ge[$];he!==5&&he!==10?(ne=he,ge[$]=0):(ne=he&51*ne>>4,ge[$]&=ne>>2|ne<<2),Z.push($%B,$/B|0),ge[$]||--We}while(oe!==$);de.push(Z),--U}}var ce=function(ke){ke.save(),ke.scale(1/c,-1/_),ke.translate(0,-_),ke.beginPath();for(var Le=0,De=de.length;Le<De;Le++){var Ae=de[Le];ke.moveTo(Ae[0],Ae[1]);for(var $e=2,xe=Ae.length;$e<xe;$e+=2)ke.lineTo(Ae[$e],Ae[$e+1])}ke.fill(),ke.beginPath(),ke.restore()};return ce}var W=function(){function G(M,g){h(this,G),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=t.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,M,g])}return w(G,[{key:"clone",value:function(){var g=Object.create(this);return g.clipBox=this.clipBox.slice(),g}},{key:"setCurrentPoint",value:function(g,c){this.x=g,this.y=c}},{key:"updatePathMinMax",value:function(g,c,_){var B=t.Util.applyTransform([c,_],g),U=x(B,2);c=U[0],_=U[1],this.minX=Math.min(this.minX,c),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,c),this.maxY=Math.max(this.maxY,_)}},{key:"updateCurvePathMinMax",value:function(g,c,_,B,U,ee,ue,pe,ge){var ve=t.Util.bezierBoundingBox(c,_,B,U,ee,ue,pe,ge);this.updatePathMinMax(g,ve[0],ve[1]),this.updatePathMinMax(g,ve[2],ve[3])}},{key:"getPathBoundingBox",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.PathType.FILL,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_=[this.minX,this.minY,this.maxX,this.maxY];if(g===a.PathType.STROKE){c||(0,t.unreachable)("Stroke bounding box must include transform.");var B=t.Util.singularValueDecompose2dScale(c),U=B[0]*this.lineWidth/2,ee=B[1]*this.lineWidth/2;_[0]-=U,_[1]-=ee,_[2]+=U,_[3]+=ee}return _}},{key:"updateClipFromPath",value:function(){var g=t.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}},{key:"startNewPathAndClipBox",value:function(g){this.clipBox=g,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.PathType.FILL,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return t.Util.intersect(this.clipBox,this.getPathBoundingBox(g,c))}}]),G}();function H(G,M){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData!="undefined"&&M instanceof ImageData){G.putImageData(M,0,0);return}var c=M.height,_=M.width,B=c%b,U=(c-B)/b,ee=B===0?U:U+1,ue=G.createImageData(_,b),pe=0,ge,ve=M.data,_e=ue.data,Re,we,Ie,Fe,We,Ue,fe,de;if(g)switch(g.length){case 1:We=g[0],Ue=g[0],fe=g[0],de=g[0];break;case 4:We=g[0],Ue=g[1],fe=g[2],de=g[3];break}if(M.kind===t.ImageKind.GRAYSCALE_1BPP){var $=ve.byteLength,te=new Uint32Array(_e.buffer,0,_e.byteLength>>2),Z=te.length,oe=_+7>>3,ne=4294967295,J=t.IsLittleEndianCached.value?4278190080:255;if(de&&de[0]===255&&de[255]===0){var he=[J,ne];ne=he[0],J=he[1]}for(Re=0;Re<ee;Re++){for(Ie=Re<U?b:B,ge=0,we=0;we<Ie;we++){for(var ce=$-pe,Se=0,ke=ce>oe?_:ce*8-7,Le=ke&-8,De=0,Ae=0;Se<Le;Se+=8)Ae=ve[pe++],te[ge++]=Ae&128?ne:J,te[ge++]=Ae&64?ne:J,te[ge++]=Ae&32?ne:J,te[ge++]=Ae&16?ne:J,te[ge++]=Ae&8?ne:J,te[ge++]=Ae&4?ne:J,te[ge++]=Ae&2?ne:J,te[ge++]=Ae&1?ne:J;for(;Se<ke;Se++)De===0&&(Ae=ve[pe++],De=128),te[ge++]=Ae&De?ne:J,De>>=1}for(;ge<Z;)te[ge++]=0;G.putImageData(ue,0,Re*b)}}else if(M.kind===t.ImageKind.RGBA_32BPP){var $e=!!(We||Ue||fe);for(we=0,Fe=_*b*4,Re=0;Re<U;Re++){if(_e.set(ve.subarray(pe,pe+Fe)),pe+=Fe,$e)for(var xe=0;xe<Fe;xe+=4)We&&(_e[xe+0]=We[_e[xe+0]]),Ue&&(_e[xe+1]=Ue[_e[xe+1]]),fe&&(_e[xe+2]=fe[_e[xe+2]]);G.putImageData(ue,0,we),we+=b}if(Re<ee){if(Fe=_*B*4,_e.set(ve.subarray(pe,pe+Fe)),$e)for(var Oe=0;Oe<Fe;Oe+=4)We&&(_e[Oe+0]=We[_e[Oe+0]]),Ue&&(_e[Oe+1]=Ue[_e[Oe+1]]),fe&&(_e[Oe+2]=fe[_e[Oe+2]]);G.putImageData(ue,0,we)}}else if(M.kind===t.ImageKind.RGB_24BPP){var Be=!!(We||Ue||fe);for(Ie=b,Fe=_*Ie,Re=0;Re<ee;Re++){for(Re>=U&&(Ie=B,Fe=_*Ie),ge=0,we=Fe;we--;)_e[ge++]=ve[pe++],_e[ge++]=ve[pe++],_e[ge++]=ve[pe++],_e[ge++]=255;if(Be)for(var Ne=0;Ne<ge;Ne+=4)We&&(_e[Ne+0]=We[_e[Ne+0]]),Ue&&(_e[Ne+1]=Ue[_e[Ne+1]]),fe&&(_e[Ne+2]=fe[_e[Ne+2]]);G.putImageData(ue,0,Re*b)}}else throw new Error("bad image kind: ".concat(M.kind))}function Q(G,M){for(var g=M.height,c=M.width,_=g%b,B=(g-_)/b,U=_===0?B:B+1,ee=G.createImageData(c,b),ue=0,pe=M.data,ge=ee.data,ve=0;ve<U;ve++){for(var _e=ve<B?b:_,Re=3,we=0;we<_e;we++)for(var Ie=void 0,Fe=0,We=0;We<c;We++)Fe||(Ie=pe[ue++],Fe=128),ge[Re]=Ie&Fe?0:255,Re+=4,Fe>>=1;G.putImageData(ee,0,ve*b)}}function K(G,M){for(var g=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],c=0,_=g.length;c<_;c++){var B=g[c];G[B]!==void 0&&(M[B]=G[B])}G.setLineDash!==void 0&&(M.setLineDash(G.getLineDash()),M.lineDashOffset=G.lineDashOffset)}function ie(G){G.strokeStyle="#000000",G.fillStyle="#000000",G.fillRule="nonzero",G.globalAlpha=1,G.lineWidth=1,G.lineCap="butt",G.lineJoin="miter",G.miterLimit=10,G.globalCompositeOperation="source-over",G.font="10px sans-serif",G.setLineDash!==void 0&&(G.setLineDash([]),G.lineDashOffset=0)}function V(G,M,g,c){for(var _=G.length,B=3;B<_;B+=4){var U=G[B];if(U===0)G[B-3]=M,G[B-2]=g,G[B-1]=c;else if(U<255){var ee=255-U;G[B-3]=G[B-3]*U+M*ee>>8,G[B-2]=G[B-2]*U+g*ee>>8,G[B-1]=G[B-1]*U+c*ee>>8}}}function Y(G,M,g){for(var c=G.length,_=1/255,B=3;B<c;B+=4){var U=g?g[G[B]]:G[B];M[B]=M[B]*U*_|0}}function F(G,M,g){for(var c=G.length,_=3;_<c;_+=4){var B=G[_-3]*77+G[_-2]*152+G[_-1]*28;M[_]=g?M[_]*g[B>>8]>>8:M[_]*B>>16}}function m(G,M,g,c,_,B,U,ee,ue,pe,ge){var ve=!!B,_e=ve?B[0]:0,Re=ve?B[1]:0,we=ve?B[2]:0,Ie;_==="Luminosity"?Ie=F:Ie=Y;for(var Fe=1048576,We=Math.min(c,Math.ceil(Fe/g)),Ue=0;Ue<c;Ue+=We){var fe=Math.min(We,c-Ue),de=G.getImageData(ee-pe,Ue+(ue-ge),g,fe),$=M.getImageData(ee,Ue+ue,g,fe);ve&&V(de.data,_e,Re,we),Ie(de.data,$.data,U),M.putImageData($,ee,Ue+ue)}}function E(G,M,g,c){var _=c[0],B=c[1],U=c[2]-_,ee=c[3]-B;U===0||ee===0||(m(M.context,g,U,ee,M.subtype,M.backdrop,M.transferMap,_,B,M.offsetX,M.offsetY),G.save(),G.globalAlpha=1,G.globalCompositeOperation="source-over",G.setTransform(1,0,0,1,0,0),G.drawImage(g.canvas,0,0),G.restore())}function L(G,M){var g=t.Util.singularValueDecompose2dScale(G);g[0]=Math.fround(g[0]),g[1]=Math.fround(g[1]);var c=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return M!==void 0?M:g[0]<=c||g[1]<=c}var X=["butt","round","square"],re=["miter","round","bevel"],q={},be={},Ce=function(){function G(M,g,c,_,B,U,ee){h(this,G),this.ctx=M,this.current=new W(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=g,this.objs=c,this.canvasFactory=_,this.imageLayer=B,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=U,this.cachedCanvases=new I(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ee,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,M&&C(M),this._cachedGetSinglePixelWidth=null}return w(G,[{key:"beginDrawing",value:function(g){var c=g.transform,_=g.viewport,B=g.transparency,U=B===void 0?!1:B,ee=g.background,ue=ee===void 0?null:ee,pe=this.ctx.canvas.width,ge=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=ue||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,pe,ge),this.ctx.restore(),U){var ve=this.cachedCanvases.getCanvas("transparent",pe,ge,!0);this.compositeCtx=this.ctx,this.transparentCanvas=ve.canvas,this.ctx=ve.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),ie(this.ctx),c&&(this.ctx.transform.apply(this.ctx,c),this.outputScaleX=c[0],this.outputScaleY=c[0]),this.ctx.transform.apply(this.ctx,_.transform),this.viewportScale=_.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(g,c,_,B){var U=g.argsArray,ee=g.fnArray,ue=c||0,pe=U.length;if(pe===ue)return ue;for(var ge=pe-ue>f&&typeof _=="function",ve=ge?Date.now()+v:0,_e=0,Re=this.commonObjs,we=this.objs,Ie;;){if(B!==void 0&&ue===B.nextBreakPoint)return B.breakIt(ue,_),ue;if(Ie=ee[ue],Ie!==t.OPS.dependency)this[Ie].apply(this,U[ue]);else{var Fe=l(U[ue]),We;try{for(Fe.s();!(We=Fe.n()).done;){var Ue=We.value,fe=Ue.startsWith("g_")?Re:we;if(!fe.has(Ue))return fe.get(Ue,_),ue}}catch(de){Fe.e(de)}finally{Fe.f()}}if(ue++,ue===pe)return ue;if(ge&&++_e>f){if(Date.now()>ve)return _(),ue;_e=0}}}},{key:"endDrawing",value:function(){for(;this.stateStack.length||this.current.activeSMask!==null;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function(g,c){for(var _=g.width,B=g.height,U=Math.max(Math.hypot(c[0],c[1]),1),ee=Math.max(Math.hypot(c[2],c[3]),1),ue=_,pe=B,ge="prescale1",ve,_e;U>2&&ue>1||ee>2&&pe>1;){var Re=ue,we=pe;U>2&&ue>1&&(Re=Math.ceil(ue/2),U/=ue/Re),ee>2&&pe>1&&(we=Math.ceil(pe/2),ee/=pe/we),ve=this.cachedCanvases.getCanvas(ge,Re,we),_e=ve.context,_e.clearRect(0,0,Re,we),_e.drawImage(g,0,0,ue,pe,0,0,Re,we),g=ve.canvas,ue=Re,pe=we,ge=ge==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:ue,paintHeight:pe}}},{key:"_createMaskCanvas",value:function(g){var c=this.ctx,_=g.width,B=g.height,U=this.current.fillColor,ee=this.current.patternFill,ue=this.cachedCanvases.getCanvas("maskCanvas",_,B),pe=ue.context;Q(pe,g);var ge=c.mozCurrentTransform,ve=t.Util.transform(ge,[1/_,0,0,-1/B,0,0]);ve=t.Util.transform(ve,[1,0,0,1,0,-B]);var _e=t.Util.applyTransform([0,0],ve),Re=t.Util.applyTransform([_,B],ve),we=t.Util.normalizeRect([_e[0],_e[1],Re[0],Re[1]]),Ie=Math.ceil(we[2]-we[0]),Fe=Math.ceil(we[3]-we[1]),We=this.cachedCanvases.getCanvas("fillCanvas",Ie,Fe,!0),Ue=We.context,fe=Math.min(_e[0],Re[0]),de=Math.min(_e[1],Re[1]);Ue.translate(-fe,-de),Ue.transform.apply(Ue,ve);var $=this._scaleImage(ue.canvas,Ue.mozCurrentTransformInverse);Ue.imageSmoothingEnabled=L(Ue.mozCurrentTransform,g.interpolate),Ue.drawImage($.img,0,0,$.img.width,$.img.height,0,0,_,B),Ue.globalCompositeOperation="source-in";var te=t.Util.transform(Ue.mozCurrentTransformInverse,[1,0,0,1,-fe,-de]);return Ue.fillStyle=ee?U.getPattern(c,this,te,a.PathType.FILL):U,Ue.fillRect(0,0,_,B),{canvas:We.canvas,offsetX:Math.round(fe),offsetY:Math.round(de)}}},{key:"setLineWidth",value:function(g){this.current.lineWidth=g,this.ctx.lineWidth=g}},{key:"setLineCap",value:function(g){this.ctx.lineCap=X[g]}},{key:"setLineJoin",value:function(g){this.ctx.lineJoin=re[g]}},{key:"setMiterLimit",value:function(g){this.ctx.miterLimit=g}},{key:"setDash",value:function(g,c){var _=this.ctx;_.setLineDash!==void 0&&(_.setLineDash(g),_.lineDashOffset=c)}},{key:"setRenderingIntent",value:function(g){}},{key:"setFlatness",value:function(g){}},{key:"setGState",value:function(g){for(var c=0,_=g.length;c<_;c++){var B=g[c],U=B[0],ee=B[1];switch(U){case"LW":this.setLineWidth(ee);break;case"LC":this.setLineCap(ee);break;case"LJ":this.setLineJoin(ee);break;case"ML":this.setMiterLimit(ee);break;case"D":this.setDash(ee[0],ee[1]);break;case"RI":this.setRenderingIntent(ee);break;case"FL":this.setFlatness(ee);break;case"Font":this.setFont(ee[0],ee[1]);break;case"CA":this.current.strokeAlpha=B[1];break;case"ca":this.current.fillAlpha=B[1],this.ctx.globalAlpha=B[1];break;case"BM":this.ctx.globalCompositeOperation=ee;break;case"SMask":this.current.activeSMask=ee?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=ee}}}},{key:"checkSMaskState",value:function(){var g=!!this.suspendedCtx;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.suspendedCtx)throw new Error("beginSMaskMode called while already in smask mode");var g=this.ctx.canvas.width,c=this.ctx.canvas.height,_="smaskGroupAt"+this.groupLevel,B=this.cachedCanvases.getCanvas(_,g,c,!0);this.suspendedCtx=this.ctx,this.ctx=B.context;var U=this.ctx;U.setTransform.apply(U,this.suspendedCtx.mozCurrentTransform),K(this.suspendedCtx,U),p(U,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.suspendedCtx)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),K(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.current.activeSMask=null,this.suspendedCtx=null}},{key:"compose",value:function(g){if(!!this.current.activeSMask){g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var c=this.current.activeSMask,_=this.suspendedCtx;E(_,c,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.ctx.save();var g=this.current;this.stateStack.push(g),this.current=g.clone()}},{key:"restore",value:function(){this.stateStack.length===0&&this.current.activeSMask&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(g,c,_,B,U,ee){this.ctx.transform(g,c,_,B,U,ee),this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(g,c){for(var _=this.ctx,B=this.current,U=B.x,ee=B.y,ue,pe,ge=0,ve=0,_e=g.length;ge<_e;ge++)switch(g[ge]|0){case t.OPS.rectangle:U=c[ve++],ee=c[ve++];var Re=c[ve++],we=c[ve++],Ie=U+Re,Fe=ee+we;_.moveTo(U,ee),Re===0||we===0?_.lineTo(Ie,Fe):(_.lineTo(Ie,ee),_.lineTo(Ie,Fe),_.lineTo(U,Fe)),B.updatePathMinMax(_.mozCurrentTransform,U,ee),B.updatePathMinMax(_.mozCurrentTransform,Ie,Fe),_.closePath();break;case t.OPS.moveTo:U=c[ve++],ee=c[ve++],_.moveTo(U,ee),B.updatePathMinMax(_.mozCurrentTransform,U,ee);break;case t.OPS.lineTo:U=c[ve++],ee=c[ve++],_.lineTo(U,ee),B.updatePathMinMax(_.mozCurrentTransform,U,ee);break;case t.OPS.curveTo:ue=U,pe=ee,U=c[ve+4],ee=c[ve+5],_.bezierCurveTo(c[ve],c[ve+1],c[ve+2],c[ve+3],U,ee),B.updateCurvePathMinMax(_.mozCurrentTransform,ue,pe,c[ve],c[ve+1],c[ve+2],c[ve+3],U,ee),ve+=6;break;case t.OPS.curveTo2:ue=U,pe=ee,_.bezierCurveTo(U,ee,c[ve],c[ve+1],c[ve+2],c[ve+3]),B.updateCurvePathMinMax(_.mozCurrentTransform,ue,pe,U,ee,c[ve],c[ve+1],c[ve+2],c[ve+3]),U=c[ve+2],ee=c[ve+3],ve+=4;break;case t.OPS.curveTo3:ue=U,pe=ee,U=c[ve+2],ee=c[ve+3],_.bezierCurveTo(c[ve],c[ve+1],U,ee,U,ee),B.updateCurvePathMinMax(_.mozCurrentTransform,ue,pe,c[ve],c[ve+1],U,ee,U,ee),ve+=4;break;case t.OPS.closePath:_.closePath();break}B.setCurrentPoint(U,ee)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(g){g=typeof g!="undefined"?g:!0;var c=this.ctx,_=this.current.strokeColor;if(c.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(u(_)==="object"&&_!==null&&_!==void 0&&_.getPattern){var B=this.getSinglePixelWidth();c.save(),c.strokeStyle=_.getPattern(c,this,c.mozCurrentTransformInverse,a.PathType.STROKE),c.lineWidth=Math.max(B,this.current.lineWidth),c.stroke(),c.restore()}else{var U=this.getSinglePixelWidth();U<0&&-U>=this.current.lineWidth?(c.save(),c.resetTransform(),c.lineWidth=Math.round(this._combinedScaleFactor),c.stroke(),c.restore()):(c.lineWidth=Math.max(U,this.current.lineWidth),c.stroke())}g&&this.consumePath(this.current.getClippedPathBoundingBox()),c.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(g){g=typeof g!="undefined"?g:!0;var c=this.ctx,_=this.current.fillColor,B=this.current.patternFill,U=!1;B&&(c.save(),c.fillStyle=_.getPattern(c,this,c.mozCurrentTransformInverse,a.PathType.FILL),U=!0);var ee=this.current.getClippedPathBoundingBox();this.contentVisible&&ee!==null&&(this.pendingEOFill?(c.fill("evenodd"),this.pendingEOFill=!1):c.fill()),U&&c.restore(),g&&this.consumePath(ee)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=q}},{key:"eoClip",value:function(){this.pendingClip=be}},{key:"beginText",value:function(){this.current.textMatrix=t.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var g=this.pendingTextPaths,c=this.ctx;if(g===void 0){c.beginPath();return}c.save(),c.beginPath();for(var _=0;_<g.length;_++){var B=g[_];c.setTransform.apply(c,B.transform),c.translate(B.x,B.y),B.addToPath(c,B.fontSize)}c.restore(),c.clip(),c.beginPath(),delete this.pendingTextPaths}},{key:"setCharSpacing",value:function(g){this.current.charSpacing=g}},{key:"setWordSpacing",value:function(g){this.current.wordSpacing=g}},{key:"setHScale",value:function(g){this.current.textHScale=g/100}},{key:"setLeading",value:function(g){this.current.leading=-g}},{key:"setFont",value:function(g,c){var _=this.commonObjs.get(g),B=this.current;if(!_)throw new Error("Can't find font for ".concat(g));if(B.fontMatrix=_.fontMatrix||t.FONT_IDENTITY_MATRIX,(B.fontMatrix[0]===0||B.fontMatrix[3]===0)&&(0,t.warn)("Invalid font matrix for font "+g),c<0?(c=-c,B.fontDirection=-1):B.fontDirection=1,this.current.font=_,this.current.fontSize=c,!_.isType3Font){var U=_.loadedName||"sans-serif",ee="normal";_.black?ee="900":_.bold&&(ee="bold");var ue=_.italic?"italic":"normal",pe='"'.concat(U,'", ').concat(_.fallbackName),ge=c;c<D?ge=D:c>k&&(ge=k),this.current.fontSizeScale=c/ge,this.ctx.font="".concat(ue," ").concat(ee," ").concat(ge,"px ").concat(pe)}}},{key:"setTextRenderingMode",value:function(g){this.current.textRenderingMode=g}},{key:"setTextRise",value:function(g){this.current.textRise=g}},{key:"moveText",value:function(g,c){this.current.x=this.current.lineX+=g,this.current.y=this.current.lineY+=c}},{key:"setLeadingMoveText",value:function(g,c){this.setLeading(-c),this.moveText(g,c)}},{key:"setTextMatrix",value:function(g,c,_,B,U,ee){this.current.textMatrix=[g,c,_,B,U,ee],this.current.textMatrixScale=Math.hypot(g,c),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(g,c,_,B,U){var ee=this.ctx,ue=this.current,pe=ue.font,ge=ue.textRenderingMode,ve=ue.fontSize/ue.fontSizeScale,_e=ge&t.TextRenderingMode.FILL_STROKE_MASK,Re=!!(ge&t.TextRenderingMode.ADD_TO_PATH_FLAG),we=ue.patternFill&&!pe.missingFile,Ie;if((pe.disableFontFace||Re||we)&&(Ie=pe.getPathGenerator(this.commonObjs,g)),pe.disableFontFace||we?(ee.save(),ee.translate(c,_),ee.beginPath(),Ie(ee,ve),B&&ee.setTransform.apply(ee,B),(_e===t.TextRenderingMode.FILL||_e===t.TextRenderingMode.FILL_STROKE)&&ee.fill(),(_e===t.TextRenderingMode.STROKE||_e===t.TextRenderingMode.FILL_STROKE)&&(U&&(ee.resetTransform(),ee.lineWidth=Math.round(this._combinedScaleFactor)),ee.stroke()),ee.restore()):((_e===t.TextRenderingMode.FILL||_e===t.TextRenderingMode.FILL_STROKE)&&ee.fillText(g,c,_),(_e===t.TextRenderingMode.STROKE||_e===t.TextRenderingMode.FILL_STROKE)&&(U?(ee.save(),ee.moveTo(c,_),ee.resetTransform(),ee.lineWidth=Math.round(this._combinedScaleFactor),ee.strokeText(g,0,0),ee.restore()):ee.strokeText(g,c,_))),Re){var Fe=this.pendingTextPaths||(this.pendingTextPaths=[]);Fe.push({transform:ee.mozCurrentTransform,x:c,y:_,fontSize:ve,addToPath:Ie})}}},{key:"isFontSubpixelAAEnabled",get:function(){var g=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),c=g.context;c.scale(1.5,1),c.fillText("I",0,10);for(var _=c.getImageData(0,0,10,10).data,B=!1,U=3;U<_.length;U+=4)if(_[U]>0&&_[U]<255){B=!0;break}return(0,t.shadow)(this,"isFontSubpixelAAEnabled",B)}},{key:"showText",value:function(g){var c=this.current,_=c.font;if(_.isType3Font)return this.showType3Text(g);var B=c.fontSize;if(B!==0){var U=this.ctx,ee=c.fontSizeScale,ue=c.charSpacing,pe=c.wordSpacing,ge=c.fontDirection,ve=c.textHScale*ge,_e=g.length,Re=_.vertical,we=Re?1:-1,Ie=_.defaultVMetrics,Fe=B*c.fontMatrix[0],We=c.textRenderingMode===t.TextRenderingMode.FILL&&!_.disableFontFace&&!c.patternFill;U.save(),U.transform.apply(U,c.textMatrix),U.translate(c.x,c.y+c.textRise),ge>0?U.scale(ve,-1):U.scale(ve,1);var Ue;if(c.patternFill){U.save();var fe=c.fillColor.getPattern(U,this,U.mozCurrentTransformInverse,a.PathType.FILL);Ue=U.mozCurrentTransform,U.restore(),U.fillStyle=fe}var de=c.lineWidth,$=!1,te=c.textMatrixScale;if(te===0||de===0){var Z=c.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;(Z===t.TextRenderingMode.STROKE||Z===t.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,de=this.getSinglePixelWidth(),$=de<0)}else de/=te;ee!==1&&(U.scale(ee,ee),de/=ee),U.lineWidth=de;var oe=0,ne;for(ne=0;ne<_e;++ne){var J=g[ne];if((0,t.isNum)(J)){oe+=we*J*B/1e3;continue}var he=!1,ce=(J.isSpace?pe:0)+ue,Se=J.fontChar,ke=J.accent,Le=void 0,De=void 0,Ae=J.width;if(Re){var $e=J.vmetric||Ie,xe=-(J.vmetric?$e[1]:Ae*.5)*Fe,Oe=$e[2]*Fe;Ae=$e?-$e[0]:Ae,Le=xe/ee,De=(oe+Oe)/ee}else Le=oe/ee,De=0;if(_.remeasure&&Ae>0){var Be=U.measureText(Se).width*1e3/B*ee;if(Ae<Be&&this.isFontSubpixelAAEnabled){var Ne=Ae/Be;he=!0,U.save(),U.scale(Ne,1),Le/=Ne}else Ae!==Be&&(Le+=(Ae-Be)/2e3*B/ee)}if(this.contentVisible&&(J.isInFont||_.missingFile)){if(We&&!ke)U.fillText(Se,Le,De);else if(this.paintChar(Se,Le,De,Ue,$),ke){var Ve=Le+B*ke.offset.x/ee,qe=De-B*ke.offset.y/ee;this.paintChar(ke.fontChar,Ve,qe,Ue,$)}}var Ze=void 0;Re?Ze=Ae*Fe-ce*ge:Ze=Ae*Fe+ce*ge,oe+=Ze,he&&U.restore()}Re?c.y-=oe:c.x+=oe*ve,U.restore(),this.compose()}}},{key:"showType3Text",value:function(g){var c=this.ctx,_=this.current,B=_.font,U=_.fontSize,ee=_.fontDirection,ue=B.vertical?1:-1,pe=_.charSpacing,ge=_.wordSpacing,ve=_.textHScale*ee,_e=_.fontMatrix||t.FONT_IDENTITY_MATRIX,Re=g.length,we=_.textRenderingMode===t.TextRenderingMode.INVISIBLE,Ie,Fe,We,Ue;if(!(we||U===0)){for(this._cachedGetSinglePixelWidth=null,c.save(),c.transform.apply(c,_.textMatrix),c.translate(_.x,_.y),c.scale(ve,ee),Ie=0;Ie<Re;++Ie){if(Fe=g[Ie],(0,t.isNum)(Fe)){Ue=ue*Fe*U/1e3,this.ctx.translate(Ue,0),_.x+=Ue*ve;continue}var fe=(Fe.isSpace?ge:0)+pe,de=B.charProcOperatorList[Fe.operatorListId];if(!de){(0,t.warn)('Type3 character "'.concat(Fe.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=Fe,this.save(),c.scale(U,U),c.transform.apply(c,_e),this.executeOperatorList(de),this.restore());var $=t.Util.applyTransform([Fe.width,0],_e);We=$[0]*U+fe,c.translate(We,0),_.x+=We*ve}c.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(g,c){}},{key:"setCharWidthAndBounds",value:function(g,c,_,B,U,ee){this.ctx.rect(_,B,U-_,ee-B),this.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(g){var c=this,_;if(g[0]==="TilingPattern"){var B=g[1],U=this.baseTransform||this.ctx.mozCurrentTransform.slice(),ee={createCanvasGraphics:function(pe){return new G(pe,c.commonObjs,c.objs,c.canvasFactory)}};_=new a.TilingPattern(g,B,this.ctx,ee,U)}else _=this._getPattern(g[1],g[2]);return _}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(g,c,_){var B=t.Util.makeHexColor(g,c,_);this.ctx.strokeStyle=B,this.current.strokeColor=B}},{key:"setFillRGBColor",value:function(g,c,_){var B=t.Util.makeHexColor(g,c,_);this.ctx.fillStyle=B,this.current.fillColor=B,this.current.patternFill=!1}},{key:"_getPattern",value:function(g){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_;return this.cachedPatterns.has(g)?_=this.cachedPatterns.get(g):(_=(0,a.getShadingPattern)(this.objs.get(g)),this.cachedPatterns.set(g,_)),c&&(_.matrix=c),_}},{key:"shadingFill",value:function(g){if(!!this.contentVisible){var c=this.ctx;this.save();var _=this._getPattern(g);c.fillStyle=_.getPattern(c,this,c.mozCurrentTransformInverse,a.PathType.SHADING);var B=c.mozCurrentTransformInverse;if(B){var U=c.canvas,ee=U.width,ue=U.height,pe=t.Util.applyTransform([0,0],B),ge=t.Util.applyTransform([0,ue],B),ve=t.Util.applyTransform([ee,0],B),_e=t.Util.applyTransform([ee,ue],B),Re=Math.min(pe[0],ge[0],ve[0],_e[0]),we=Math.min(pe[1],ge[1],ve[1],_e[1]),Ie=Math.max(pe[0],ge[0],ve[0],_e[0]),Fe=Math.max(pe[1],ge[1],ve[1],_e[1]);this.ctx.fillRect(Re,we,Ie-Re,Fe-we)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,t.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,t.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(g,c){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(g)&&g.length===6&&this.transform.apply(this,g),this.baseTransform=this.ctx.mozCurrentTransform,c)){var _=c[2]-c[0],B=c[3]-c[1];this.ctx.rect(c[0],c[1],_,B),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,c[0],c[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,c[2],c[3]),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(g){if(!!this.contentVisible){this.save();var c=this.suspendedCtx;this.current.activeSMask&&(this.suspendedCtx=null,this.current.activeSMask=null);var _=this.ctx;g.isolated||(0,t.info)("TODO: Support non-isolated groups."),g.knockout&&(0,t.warn)("Knockout groups not supported.");var B=_.mozCurrentTransform;if(g.matrix&&_.transform.apply(_,g.matrix),!g.bbox)throw new Error("Bounding box is required.");var U=t.Util.getAxialAlignedBoundingBox(g.bbox,_.mozCurrentTransform),ee=[0,0,_.canvas.width,_.canvas.height];U=t.Util.intersect(U,ee)||[0,0,0,0];var ue=Math.floor(U[0]),pe=Math.floor(U[1]),ge=Math.max(Math.ceil(U[2])-ue,1),ve=Math.max(Math.ceil(U[3])-pe,1),_e=1,Re=1;ge>z&&(_e=ge/z,ge=z),ve>z&&(Re=ve/z,ve=z),this.current.startNewPathAndClipBox([0,0,ge,ve]);var we="groupAt"+this.groupLevel;g.smask&&(we+="_smask_"+this.smaskCounter++%2);var Ie=this.cachedCanvases.getCanvas(we,ge,ve,!0),Fe=Ie.context;Fe.scale(1/_e,1/Re),Fe.translate(-ue,-pe),Fe.transform.apply(Fe,B),g.smask?this.smaskStack.push({canvas:Ie.canvas,context:Fe,offsetX:ue,offsetY:pe,scaleX:_e,scaleY:Re,subtype:g.smask.subtype,backdrop:g.smask.backdrop,transferMap:g.smask.transferMap||null,startTransformInverse:null}):(_.setTransform(1,0,0,1,0,0),_.translate(ue,pe),_.scale(_e,Re),_.save()),K(_,Fe),this.ctx=Fe,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push({ctx:_,suspendedCtx:c}),this.groupLevel++}}},{key:"endGroup",value:function(g){if(!!this.contentVisible){this.groupLevel--;var c=this.ctx,_=this.groupStack.pop(),B=_.ctx,U=_.suspendedCtx;if(this.ctx=B,this.ctx.imageSmoothingEnabled=!1,U&&(this.suspendedCtx=U),g.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();var ee=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,ee);var ue=t.Util.getAxialAlignedBoundingBox([0,0,c.canvas.width,c.canvas.height],ee);this.ctx.drawImage(c.canvas,0,0),this.ctx.restore(),this.compose(ue)}}}},{key:"beginAnnotations",value:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},{key:"endAnnotations",value:function(){this.restore()}},{key:"beginAnnotation",value:function(g,c,_,B,U){if(this.save(),Array.isArray(c)&&c.length===4){var ee=c[2]-c[0],ue=c[3]-c[1];if(U&&this.annotationCanvasMap){_=_.slice(),_[4]-=c[0],_[5]-=c[1],c=c.slice(),c[0]=c[1]=0,c[2]=ee,c[3]=ue;var pe=t.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),ge=x(pe,2),ve=ge[0],_e=ge[1],Re=this.viewportScale,we=Math.ceil(ee*this.outputScaleX*Re),Ie=Math.ceil(ue*this.outputScaleY*Re);this.annotationCanvas=this.canvasFactory.create(we,Ie);var Fe=this.annotationCanvas,We=Fe.canvas,Ue=Fe.context;We.style.width="calc(".concat(ee,"px * var(--viewport-scale-factor))"),We.style.height="calc(".concat(ue,"px * var(--viewport-scale-factor))"),this.annotationCanvasMap.set(g,We),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ue,this.ctx.setTransform(ve,0,0,-_e,0,ue*_e),C(this.ctx),ie(this.ctx)}else ie(this.ctx),this.ctx.rect(c[0],c[1],ee,ue),this.clip(),this.endPath()}this.current=new W(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,_),this.transform.apply(this,B)}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}},{key:"paintImageMaskXObject",value:function(g){if(!!this.contentVisible){var c=this.ctx,_=g.width,B=g.height,U=this.processingType3;if(U&&U.compiled===void 0&&(_<=d&&B<=d?U.compiled=j({data:g.data,width:_,height:B}):U.compiled=null),U!=null&&U.compiled){U.compiled(c);return}var ee=this._createMaskCanvas(g),ue=ee.canvas;c.save(),c.setTransform(1,0,0,1,0,0),c.drawImage(ue,ee.offsetX,ee.offsetY),c.restore(),this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function(g,c){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,U=arguments.length>4?arguments[4]:void 0,ee=arguments.length>5?arguments[5]:void 0;if(!!this.contentVisible){var ue=this.ctx;ue.save();var pe=ue.mozCurrentTransform;ue.transform(c,_,B,U,0,0);var ge=this._createMaskCanvas(g);ue.setTransform(1,0,0,1,0,0);for(var ve=0,_e=ee.length;ve<_e;ve+=2){var Re=t.Util.transform(pe,[c,_,B,U,ee[ve],ee[ve+1]]),we=t.Util.applyTransform([0,0],Re),Ie=x(we,2),Fe=Ie[0],We=Ie[1];ue.drawImage(ge.canvas,Fe,We)}ue.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(g){if(!!this.contentVisible){for(var c=this.ctx,_=this.current.fillColor,B=this.current.patternFill,U=0,ee=g.length;U<ee;U++){var ue=g[U],pe=ue.width,ge=ue.height,ve=this.cachedCanvases.getCanvas("maskCanvas",pe,ge),_e=ve.context;_e.save(),Q(_e,ue),_e.globalCompositeOperation="source-in",_e.fillStyle=B?_.getPattern(_e,this,c.mozCurrentTransformInverse,a.PathType.FILL):_,_e.fillRect(0,0,pe,ge),_e.restore(),c.save(),c.transform.apply(c,ue.transform),c.scale(1,-1),c.drawImage(ve.canvas,0,0,pe,ge,0,-1,1,1),c.restore()}this.compose()}}},{key:"paintImageXObject",value:function(g){if(!!this.contentVisible){var c=g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g);if(!c){(0,t.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(c)}}},{key:"paintImageXObjectRepeat",value:function(g,c,_,B){if(!!this.contentVisible){var U=g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g);if(!U){(0,t.warn)("Dependent image isn't ready yet");return}for(var ee=U.width,ue=U.height,pe=[],ge=0,ve=B.length;ge<ve;ge+=2)pe.push({transform:[c,0,0,_,B[ge],B[ge+1]],x:0,y:0,w:ee,h:ue});this.paintInlineImageXObjectGroup(U,pe)}}},{key:"paintInlineImageXObject",value:function(g){if(!!this.contentVisible){var c=g.width,_=g.height,B=this.ctx;this.save(),B.scale(1/c,-1/_);var U;if(typeof HTMLElement=="function"&&g instanceof HTMLElement||!g.data)U=g;else{var ee=this.cachedCanvases.getCanvas("inlineImage",c,_),ue=ee.context;H(ue,g,this.current.transferMaps),U=ee.canvas}var pe=this._scaleImage(U,B.mozCurrentTransformInverse);if(B.imageSmoothingEnabled=L(B.mozCurrentTransform,g.interpolate),B.drawImage(pe.img,0,0,pe.paintWidth,pe.paintHeight,0,-_,c,_),this.imageLayer){var ge=this.getCanvasPosition(0,-_);this.imageLayer.appendImage({imgData:g,left:ge[0],top:ge[1],width:c/B.mozCurrentTransformInverse[0],height:_/B.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(g,c){if(!!this.contentVisible){var _=this.ctx,B=g.width,U=g.height,ee=this.cachedCanvases.getCanvas("inlineImage",B,U),ue=ee.context;H(ue,g,this.current.transferMaps);for(var pe=0,ge=c.length;pe<ge;pe++){var ve=c[pe];if(_.save(),_.transform.apply(_,ve.transform),_.scale(1,-1),_.drawImage(ee.canvas,ve.x,ve.y,ve.w,ve.h,0,-1,1,1),this.imageLayer){var _e=this.getCanvasPosition(ve.x,ve.y);this.imageLayer.appendImage({imgData:g,left:_e[0],top:_e[1],width:B,height:U})}_.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(g){}},{key:"markPointProps",value:function(g,c){}},{key:"beginMarkedContent",value:function(g){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(g,c){g==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(c)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(g){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(g);var c=this.ctx;this.pendingClip&&(this.pendingClip===be?c.clip("evenodd"):c.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),c.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(this._cachedGetSinglePixelWidth===null){var g=this.ctx.mozCurrentTransform,c=Math.abs(g[0]*g[3]-g[2]*g[1]),_=Math.pow(g[0],2)+Math.pow(g[2],2),B=Math.pow(g[1],2)+Math.pow(g[3],2),U=Math.sqrt(Math.max(_,B))/c;_!==B&&this._combinedScaleFactor*U>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*U):c>Number.EPSILON?this._cachedGetSinglePixelWidth=U:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}},{key:"getCanvasPosition",value:function(g,c){var _=this.ctx.mozCurrentTransform;return[_[0]*g+_[2]*c+_[4],_[1]*g+_[3]*c+_[5]]}},{key:"isContentVisible",value:function(){for(var g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}}]),G}();n.CanvasGraphics=Ce;for(var Ee in t.OPS)Ce.prototype[Ee]!==void 0&&(Ce.prototype[t.OPS[Ee]]=Ce.prototype[Ee])},(i,n,e)=>{function t(W){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(Q){return typeof Q}:t=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},t(W)}Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=C;var a=e(4);function o(W,H){var Q=typeof Symbol!="undefined"&&W[Symbol.iterator]||W["@@iterator"];if(!Q){if(Array.isArray(W)||(Q=u(W))||H&&W&&typeof W.length=="number"){Q&&(W=Q);var K=0,ie=function(){};return{s:ie,n:function(){return K>=W.length?{done:!0}:{done:!1,value:W[K++]}},e:function(E){throw E},f:ie}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V=!0,Y=!1,F;return{s:function(){Q=Q.call(W)},n:function(){var E=Q.next();return V=E.done,E},e:function(E){Y=!0,F=E},f:function(){try{!V&&Q.return!=null&&Q.return()}finally{if(Y)throw F}}}}function u(W,H){if(!!W){if(typeof W=="string")return l(W,H);var Q=Object.prototype.toString.call(W).slice(8,-1);if(Q==="Object"&&W.constructor&&(Q=W.constructor.name),Q==="Map"||Q==="Set")return Array.from(W);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return l(W,H)}}function l(W,H){(H==null||H>W.length)&&(H=W.length);for(var Q=0,K=new Array(H);Q<H;Q++)K[Q]=W[Q];return K}function h(W,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(H&&H.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),H&&S(W,H)}function S(W,H){return S=Object.setPrototypeOf||function(K,ie){return K.__proto__=ie,K},S(W,H)}function w(W){var H=T();return function(){var K=R(W),ie;if(H){var V=R(this).constructor;ie=Reflect.construct(K,arguments,V)}else ie=K.apply(this,arguments);return x(this,ie)}}function x(W,H){if(H&&(t(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(W)}function N(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(W){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},R(W)}function P(W,H){if(!(W instanceof H))throw new TypeError("Cannot call a class as a function")}function A(W,H){for(var Q=0;Q<H.length;Q++){var K=H[Q];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(W,K.key,K)}}function D(W,H,Q){return H&&A(W.prototype,H),Q&&A(W,Q),W}var k={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=k;function z(W,H){if(!(!H||typeof Path2D=="undefined")){var Q=H[2]-H[0],K=H[3]-H[1],ie=new Path2D;ie.rect(H[0],H[1],Q,K),W.clip(ie)}}var v=function(){function W(){P(this,W),this.constructor===W&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}return D(W,[{key:"getPattern",value:function(){(0,a.unreachable)("Abstract method `getPattern` called.")}}]),W}(),f=function(W){h(Q,W);var H=w(Q);function Q(K){var ie;return P(this,Q),ie=H.call(this),ie._type=K[1],ie._bbox=K[2],ie._colorStops=K[3],ie._p0=K[4],ie._p1=K[5],ie._r0=K[6],ie._r1=K[7],ie.matrix=null,ie}return D(Q,[{key:"_createGradient",value:function(ie){var V;this._type==="axial"?V=ie.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(V=ie.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var Y=o(this._colorStops),F;try{for(Y.s();!(F=Y.n()).done;){var m=F.value;V.addColorStop(m[0],m[1])}}catch(E){Y.e(E)}finally{Y.f()}return V}},{key:"getPattern",value:function(ie,V,Y,F){var m;if(F===k.STROKE||F===k.FILL){var E=V.current.getClippedPathBoundingBox(F,ie.mozCurrentTransform)||[0,0,0,0],L=Math.ceil(E[2]-E[0])||1,X=Math.ceil(E[3]-E[1])||1,re=V.cachedCanvases.getCanvas("pattern",L,X,!0),q=re.context;q.clearRect(0,0,q.canvas.width,q.canvas.height),q.beginPath(),q.rect(0,0,q.canvas.width,q.canvas.height),q.translate(-E[0],-E[1]),Y=a.Util.transform(Y,[1,0,0,1,E[0],E[1]]),q.transform.apply(q,V.baseTransform),this.matrix&&q.transform.apply(q,this.matrix),z(q,this._bbox),q.fillStyle=this._createGradient(q),q.fill(),m=ie.createPattern(re.canvas,"no-repeat");var be=new DOMMatrix(Y);try{m.setTransform(be)}catch(Ce){(0,a.warn)('RadialAxialShadingPattern.getPattern: "'.concat(Ce==null?void 0:Ce.message,'".'))}}else z(ie,this._bbox),m=this._createGradient(ie);return m}}]),Q}(v);function d(W,H,Q,K,ie,V,Y,F){var m=H.coords,E=H.colors,L=W.data,X=W.width*4,re;m[Q+1]>m[K+1]&&(re=Q,Q=K,K=re,re=V,V=Y,Y=re),m[K+1]>m[ie+1]&&(re=K,K=ie,ie=re,re=Y,Y=F,F=re),m[Q+1]>m[K+1]&&(re=Q,Q=K,K=re,re=V,V=Y,Y=re);var q=(m[Q]+H.offsetX)*H.scaleX,be=(m[Q+1]+H.offsetY)*H.scaleY,Ce=(m[K]+H.offsetX)*H.scaleX,Ee=(m[K+1]+H.offsetY)*H.scaleY,G=(m[ie]+H.offsetX)*H.scaleX,M=(m[ie+1]+H.offsetY)*H.scaleY;if(!(be>=M))for(var g=E[V],c=E[V+1],_=E[V+2],B=E[Y],U=E[Y+1],ee=E[Y+2],ue=E[F],pe=E[F+1],ge=E[F+2],ve=Math.round(be),_e=Math.round(M),Re,we,Ie,Fe,We,Ue,fe,de,$=ve;$<=_e;$++){if($<Ee){var te=void 0;$<be?te=0:te=(be-$)/(be-Ee),Re=q-(q-Ce)*te,we=g-(g-B)*te,Ie=c-(c-U)*te,Fe=_-(_-ee)*te}else{var Z=void 0;$>M?Z=1:Ee===M?Z=0:Z=(Ee-$)/(Ee-M),Re=Ce-(Ce-G)*Z,we=B-(B-ue)*Z,Ie=U-(U-pe)*Z,Fe=ee-(ee-ge)*Z}var oe=void 0;$<be?oe=0:$>M?oe=1:oe=(be-$)/(be-M),We=q-(q-G)*oe,Ue=g-(g-ue)*oe,fe=c-(c-pe)*oe,de=_-(_-ge)*oe;for(var ne=Math.round(Math.min(Re,We)),J=Math.round(Math.max(Re,We)),he=X*$+ne*4,ce=ne;ce<=J;ce++)oe=(Re-ce)/(Re-We),oe<0?oe=0:oe>1&&(oe=1),L[he++]=we-(we-Ue)*oe|0,L[he++]=Ie-(Ie-fe)*oe|0,L[he++]=Fe-(Fe-de)*oe|0,L[he++]=255}}function b(W,H,Q){var K=H.coords,ie=H.colors,V,Y;switch(H.type){case"lattice":var F=H.verticesPerRow,m=Math.floor(K.length/F)-1,E=F-1;for(V=0;V<m;V++)for(var L=V*F,X=0;X<E;X++,L++)d(W,Q,K[L],K[L+1],K[L+F],ie[L],ie[L+1],ie[L+F]),d(W,Q,K[L+F+1],K[L+1],K[L+F],ie[L+F+1],ie[L+1],ie[L+F]);break;case"triangles":for(V=0,Y=K.length;V<Y;V+=3)d(W,Q,K[V],K[V+1],K[V+2],ie[V],ie[V+1],ie[V+2]);break;default:throw new Error("illegal figure")}}var y=function(W){h(Q,W);var H=w(Q);function Q(K){var ie;return P(this,Q),ie=H.call(this),ie._coords=K[2],ie._colors=K[3],ie._figures=K[4],ie._bounds=K[5],ie._bbox=K[7],ie._background=K[8],ie.matrix=null,ie}return D(Q,[{key:"_createMeshCanvas",value:function(ie,V,Y){var F=1.1,m=3e3,E=2,L=Math.floor(this._bounds[0]),X=Math.floor(this._bounds[1]),re=Math.ceil(this._bounds[2])-L,q=Math.ceil(this._bounds[3])-X,be=Math.min(Math.ceil(Math.abs(re*ie[0]*F)),m),Ce=Math.min(Math.ceil(Math.abs(q*ie[1]*F)),m),Ee=re/be,G=q/Ce,M={coords:this._coords,colors:this._colors,offsetX:-L,offsetY:-X,scaleX:1/Ee,scaleY:1/G},g=be+E*2,c=Ce+E*2,_=Y.getCanvas("mesh",g,c,!1),B=_.context,U=B.createImageData(be,Ce);if(V)for(var ee=U.data,ue=0,pe=ee.length;ue<pe;ue+=4)ee[ue]=V[0],ee[ue+1]=V[1],ee[ue+2]=V[2],ee[ue+3]=255;var ge=o(this._figures),ve;try{for(ge.s();!(ve=ge.n()).done;){var _e=ve.value;b(U,_e,M)}}catch(we){ge.e(we)}finally{ge.f()}B.putImageData(U,E,E);var Re=_.canvas;return{canvas:Re,offsetX:L-E*Ee,offsetY:X-E*G,scaleX:Ee,scaleY:G}}},{key:"getPattern",value:function(ie,V,Y,F){z(ie,this._bbox);var m;if(F===k.SHADING)m=a.Util.singularValueDecompose2dScale(ie.mozCurrentTransform);else if(m=a.Util.singularValueDecompose2dScale(V.baseTransform),this.matrix){var E=a.Util.singularValueDecompose2dScale(this.matrix);m=[m[0]*E[0],m[1]*E[1]]}var L=this._createMeshCanvas(m,F===k.SHADING?null:this._background,V.cachedCanvases);return F!==k.SHADING&&(ie.setTransform.apply(ie,V.baseTransform),this.matrix&&ie.transform.apply(ie,this.matrix)),ie.translate(L.offsetX,L.offsetY),ie.scale(L.scaleX,L.scaleY),ie.createPattern(L.canvas,"no-repeat")}}]),Q}(v),p=function(W){h(Q,W);var H=w(Q);function Q(){return P(this,Q),H.apply(this,arguments)}return D(Q,[{key:"getPattern",value:function(){return"hotpink"}}]),Q}(v);function C(W){switch(W[0]){case"RadialAxial":return new f(W);case"Mesh":return new y(W);case"Dummy":return new p}throw new Error("Unknown IR type: ".concat(W[0]))}var I={COLORED:1,UNCOLORED:2},j=function(){function W(H,Q,K,ie,V){P(this,W),this.operatorList=H[2],this.matrix=H[3]||[1,0,0,1,0,0],this.bbox=H[4],this.xstep=H[5],this.ystep=H[6],this.paintType=H[7],this.tilingType=H[8],this.color=Q,this.ctx=K,this.canvasGraphicsFactory=ie,this.baseTransform=V}return D(W,[{key:"createPatternCanvas",value:function(Q){var K=this.operatorList,ie=this.bbox,V=this.xstep,Y=this.ystep,F=this.paintType,m=this.tilingType,E=this.color,L=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+m);var X=ie[0],re=ie[1],q=ie[2],be=ie[3],Ce=a.Util.singularValueDecompose2dScale(this.matrix),Ee=a.Util.singularValueDecompose2dScale(this.baseTransform),G=[Ce[0]*Ee[0],Ce[1]*Ee[1]],M=this.getSizeAndScale(V,this.ctx.canvas.width,G[0]),g=this.getSizeAndScale(Y,this.ctx.canvas.height,G[1]),c=Q.cachedCanvases.getCanvas("pattern",M.size,g.size,!0),_=c.context,B=L.createCanvasGraphics(_);B.groupLevel=Q.groupLevel,this.setFillAndStrokeStyleToContext(B,F,E);var U=X,ee=re,ue=q,pe=be;return X<0&&(U=0,ue+=Math.abs(X)),re<0&&(ee=0,pe+=Math.abs(re)),_.translate(-(M.scale*U),-(g.scale*ee)),B.transform(M.scale,0,0,g.scale,0,0),this.clipBbox(B,U,ee,ue,pe),B.baseTransform=B.ctx.mozCurrentTransform.slice(),B.executeOperatorList(K),B.endDrawing(),{canvas:c.canvas,scaleX:M.scale,scaleY:g.scale,offsetX:U,offsetY:ee}}},{key:"getSizeAndScale",value:function(Q,K,ie){Q=Math.abs(Q);var V=Math.max(W.MAX_PATTERN_SIZE,K),Y=Math.ceil(Q*ie);return Y>=V?Y=V:ie=Y/Q,{scale:ie,size:Y}}},{key:"clipBbox",value:function(Q,K,ie,V,Y){var F=V-K,m=Y-ie;Q.ctx.rect(K,ie,F,m),Q.clip(),Q.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(Q,K,ie){var V=Q.ctx,Y=Q.current;switch(K){case I.COLORED:var F=this.ctx;V.fillStyle=F.fillStyle,V.strokeStyle=F.strokeStyle,Y.fillColor=F.fillStyle,Y.strokeColor=F.strokeStyle;break;case I.UNCOLORED:var m=a.Util.makeHexColor(ie[0],ie[1],ie[2]);V.fillStyle=m,V.strokeStyle=m,Y.fillColor=m,Y.strokeColor=m;break;default:throw new a.FormatError("Unsupported paint type: ".concat(K))}}},{key:"getPattern",value:function(Q,K,ie,V){var Y=ie;V!==k.SHADING&&(Y=a.Util.transform(Y,K.baseTransform),this.matrix&&(Y=a.Util.transform(Y,this.matrix)));var F=this.createPatternCanvas(K),m=new DOMMatrix(Y);m=m.translate(F.offsetX,F.offsetY),m=m.scale(1/F.scaleX,1/F.scaleY);var E=Q.createPattern(F.canvas,"repeat");try{E.setTransform(m)}catch(L){(0,a.warn)('TilingPattern.getPattern: "'.concat(L==null?void 0:L.message,'".'))}return E}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),W}();n.TilingPattern=j},(i,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;var e=Object.create(null);n.GlobalWorkerOptions=e,e.workerPort=e.workerPort===void 0?null:e.workerPort,e.workerSrc=e.workerSrc===void 0?"":e.workerSrc},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var t=o(e(2)),a=e(4);function o(A){return A&&A.__esModule?A:{default:A}}function u(A,D,k,z,v,f,d){try{var b=A[f](d),y=b.value}catch(p){k(p);return}b.done?D(y):Promise.resolve(y).then(z,v)}function l(A){return function(){var D=this,k=arguments;return new Promise(function(z,v){var f=A.apply(D,k);function d(y){u(f,z,v,d,b,"next",y)}function b(y){u(f,z,v,d,b,"throw",y)}d(void 0)})}}function h(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function S(A,D){for(var k=0;k<D.length;k++){var z=D[k];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(A,z.key,z)}}function w(A,D,k){return D&&S(A.prototype,D),k&&S(A,k),A}function x(A){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x=function(k){return typeof k}:x=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},x(A)}var N={UNKNOWN:0,DATA:1,ERROR:2},T={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function R(A){if(!(A instanceof Error||x(A)==="object"&&A!==null))return(0,a.warn)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A;switch(A.name){case"AbortException":return new a.AbortException(A.message);case"MissingPDFException":return new a.MissingPDFException(A.message);case"PasswordException":return new a.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new a.UnknownErrorException(A.message,A.details);default:return new a.UnknownErrorException(A.message,A.toString())}}var P=function(){function A(D,k,z){var v=this;h(this,A),this.sourceName=D,this.targetName=k,this.comObj=z,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(f){var d=f.data;if(d.targetName===v.sourceName){if(d.stream){v._processStreamMessage(d);return}if(d.callback){var b=d.callbackId,y=v.callbackCapabilities[b];if(!y)throw new Error("Cannot resolve callback ".concat(b));if(delete v.callbackCapabilities[b],d.callback===N.DATA)y.resolve(d.data);else if(d.callback===N.ERROR)y.reject(R(d.reason));else throw new Error("Unexpected callback case");return}var p=v.actionHandler[d.action];if(!p)throw new Error("Unknown action from worker: ".concat(d.action));if(d.callbackId){var C=v.sourceName,I=d.sourceName;new Promise(function(j){j(p(d.data))}).then(function(j){z.postMessage({sourceName:C,targetName:I,callback:N.DATA,callbackId:d.callbackId,data:j})},function(j){z.postMessage({sourceName:C,targetName:I,callback:N.ERROR,callbackId:d.callbackId,reason:R(j)})});return}if(d.streamId){v._createStreamSink(d);return}p(d.data)}},z.addEventListener("message",this._onComObjOnMessage)}return w(A,[{key:"on",value:function(k,z){var v=this.actionHandler;if(v[k])throw new Error('There is already an actionName called "'.concat(k,'"'));v[k]=z}},{key:"send",value:function(k,z,v){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:k,data:z},v)}},{key:"sendWithPromise",value:function(k,z,v){var f=this.callbackId++,d=(0,a.createPromiseCapability)();this.callbackCapabilities[f]=d;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:k,callbackId:f,data:z},v)}catch(b){d.reject(b)}return d.promise}},{key:"sendWithStream",value:function(k,z,v,f){var d=this,b=this.streamId++,y=this.sourceName,p=this.targetName,C=this.comObj;return new ReadableStream({start:function(j){var W=(0,a.createPromiseCapability)();return d.streamControllers[b]={controller:j,startCall:W,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:y,targetName:p,action:k,streamId:b,data:z,desiredSize:j.desiredSize},f),W.promise},pull:function(j){var W=(0,a.createPromiseCapability)();return d.streamControllers[b].pullCall=W,C.postMessage({sourceName:y,targetName:p,stream:T.PULL,streamId:b,desiredSize:j.desiredSize}),W.promise},cancel:function(j){(0,a.assert)(j instanceof Error,"cancel must have a valid reason");var W=(0,a.createPromiseCapability)();return d.streamControllers[b].cancelCall=W,d.streamControllers[b].isClosed=!0,C.postMessage({sourceName:y,targetName:p,stream:T.CANCEL,streamId:b,reason:R(j)}),W.promise}},v)}},{key:"_createStreamSink",value:function(k){var z=k.streamId,v=this.sourceName,f=k.sourceName,d=this.comObj,b=this,y=this.actionHandler[k.action],p={enqueue:function(I){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var H=this.desiredSize;this.desiredSize-=j,H>0&&this.desiredSize<=0&&(this.sinkCapability=(0,a.createPromiseCapability)(),this.ready=this.sinkCapability.promise),d.postMessage({sourceName:v,targetName:f,stream:T.ENQUEUE,streamId:z,chunk:I},W)}},close:function(){this.isCancelled||(this.isCancelled=!0,d.postMessage({sourceName:v,targetName:f,stream:T.CLOSE,streamId:z}),delete b.streamSinks[z])},error:function(I){(0,a.assert)(I instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,d.postMessage({sourceName:v,targetName:f,stream:T.ERROR,streamId:z,reason:R(I)}))},sinkCapability:(0,a.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:k.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[z]=p,new Promise(function(C){C(y(k.data,p))}).then(function(){d.postMessage({sourceName:v,targetName:f,stream:T.START_COMPLETE,streamId:z,success:!0})},function(C){d.postMessage({sourceName:v,targetName:f,stream:T.START_COMPLETE,streamId:z,reason:R(C)})})}},{key:"_processStreamMessage",value:function(k){var z=k.streamId,v=this.sourceName,f=k.sourceName,d=this.comObj,b=this.streamControllers[z],y=this.streamSinks[z];switch(k.stream){case T.START_COMPLETE:k.success?b.startCall.resolve():b.startCall.reject(R(k.reason));break;case T.PULL_COMPLETE:k.success?b.pullCall.resolve():b.pullCall.reject(R(k.reason));break;case T.PULL:if(!y){d.postMessage({sourceName:v,targetName:f,stream:T.PULL_COMPLETE,streamId:z,success:!0});break}y.desiredSize<=0&&k.desiredSize>0&&y.sinkCapability.resolve(),y.desiredSize=k.desiredSize,new Promise(function(p){p(y.onPull&&y.onPull())}).then(function(){d.postMessage({sourceName:v,targetName:f,stream:T.PULL_COMPLETE,streamId:z,success:!0})},function(p){d.postMessage({sourceName:v,targetName:f,stream:T.PULL_COMPLETE,streamId:z,reason:R(p)})});break;case T.ENQUEUE:if((0,a.assert)(b,"enqueue should have stream controller"),b.isClosed)break;b.controller.enqueue(k.chunk);break;case T.CLOSE:if((0,a.assert)(b,"close should have stream controller"),b.isClosed)break;b.isClosed=!0,b.controller.close(),this._deleteStreamController(b,z);break;case T.ERROR:(0,a.assert)(b,"error should have stream controller"),b.controller.error(R(k.reason)),this._deleteStreamController(b,z);break;case T.CANCEL_COMPLETE:k.success?b.cancelCall.resolve():b.cancelCall.reject(R(k.reason)),this._deleteStreamController(b,z);break;case T.CANCEL:if(!y)break;new Promise(function(p){p(y.onCancel&&y.onCancel(R(k.reason)))}).then(function(){d.postMessage({sourceName:v,targetName:f,stream:T.CANCEL_COMPLETE,streamId:z,success:!0})},function(p){d.postMessage({sourceName:v,targetName:f,stream:T.CANCEL_COMPLETE,streamId:z,reason:R(p)})}),y.sinkCapability.reject(R(k.reason)),y.isCancelled=!0,delete this.streamSinks[z];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:function(){var D=l(t.default.mark(function z(v,f){return t.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Promise.allSettled([v.startCall&&v.startCall.promise,v.pullCall&&v.pullCall.promise,v.cancelCall&&v.cancelCall.promise]);case 2:delete this.streamControllers[f];case 3:case"end":return b.stop()}},z,this)}));function k(z,v){return D.apply(this,arguments)}return k}()},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),A}();n.MessageHandler=P},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var t=e(4);function a(D,k){if(!(D instanceof k))throw new TypeError("Cannot call a class as a function")}function o(D,k){for(var z=0;z<k.length;z++){var v=k[z];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(D,v.key,v)}}function u(D,k,z){return k&&o(D.prototype,k),z&&o(D,z),D}function l(D,k,z){h(D,k),k.set(D,z)}function h(D,k){if(k.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(D,k){var z=N(D,k,"get");return w(D,z)}function w(D,k){return k.get?k.get.call(D):k.value}function x(D,k,z){var v=N(D,k,"set");return T(D,v,z),z}function N(D,k,z){if(!k.has(D))throw new TypeError("attempted to "+z+" private field on non-instance");return k.get(D)}function T(D,k,z){if(k.set)k.set.call(D,z);else{if(!k.writable)throw new TypeError("attempted to set read only private field");k.value=z}}var R=new WeakMap,P=new WeakMap,A=function(){function D(k){var z=k.parsedData,v=k.rawData;a(this,D),l(this,R,{writable:!0,value:void 0}),l(this,P,{writable:!0,value:void 0}),x(this,R,z),x(this,P,v)}return u(D,[{key:"getRaw",value:function(){return S(this,P)}},{key:"get",value:function(z){var v;return(v=S(this,R).get(z))!==null&&v!==void 0?v:null}},{key:"getAll",value:function(){return(0,t.objectFromMap)(S(this,R))}},{key:"has",value:function(z){return S(this,R).has(z)}}]),D}();n.Metadata=A},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var t=e(4);function a(N,T){var R=typeof Symbol!="undefined"&&N[Symbol.iterator]||N["@@iterator"];if(!R){if(Array.isArray(N)||(R=o(N))||T&&N&&typeof N.length=="number"){R&&(N=R);var P=0,A=function(){};return{s:A,n:function(){return P>=N.length?{done:!0}:{done:!1,value:N[P++]}},e:function(f){throw f},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,k=!1,z;return{s:function(){R=R.call(N)},n:function(){var f=R.next();return D=f.done,f},e:function(f){k=!0,z=f},f:function(){try{!D&&R.return!=null&&R.return()}finally{if(k)throw z}}}}function o(N,T){if(!!N){if(typeof N=="string")return u(N,T);var R=Object.prototype.toString.call(N).slice(8,-1);if(R==="Object"&&N.constructor&&(R=N.constructor.name),R==="Map"||R==="Set")return Array.from(N);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return u(N,T)}}function u(N,T){(T==null||T>N.length)&&(T=N.length);for(var R=0,P=new Array(T);R<T;R++)P[R]=N[R];return P}function l(N,T){for(var R=0;R<T.length;R++){var P=T[R];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(N,P.key,P)}}function h(N,T,R){return T&&l(N.prototype,T),R&&l(N,R),N}function S(N,T){if(!(N instanceof T))throw new TypeError("Cannot call a class as a function")}var w=function N(T,R){S(this,N),this.visible=!0,this.name=T,this.intent=R},x=function(){function N(T){if(S(this,N),this.name=null,this.creator=null,this._order=null,this._groups=new Map,T!==null){this.name=T.name,this.creator=T.creator,this._order=T.order;var R=a(T.groups),P;try{for(R.s();!(P=R.n()).done;){var A=P.value;this._groups.set(A.id,new w(A.name,A.intent))}}catch(C){R.e(C)}finally{R.f()}if(T.baseState==="OFF"){var D=a(this._groups),k;try{for(D.s();!(k=D.n()).done;){var z=k.value;z.visible=!1}}catch(C){D.e(C)}finally{D.f()}}var v=a(T.on),f;try{for(v.s();!(f=v.n()).done;){var d=f.value;this._groups.get(d).visible=!0}}catch(C){v.e(C)}finally{v.f()}var b=a(T.off),y;try{for(b.s();!(y=b.n()).done;){var p=y.value;this._groups.get(p).visible=!1}}catch(C){b.e(C)}finally{b.f()}}}return h(N,[{key:"_evaluateVisibilityExpression",value:function(R){var P=R.length;if(P<2)return!0;for(var A=R[0],D=1;D<P;D++){var k=R[D],z=void 0;if(Array.isArray(k))z=this._evaluateVisibilityExpression(k);else if(this._groups.has(k))z=this._groups.get(k).visible;else return(0,t.warn)("Optional content group not found: ".concat(k)),!0;switch(A){case"And":if(!z)return!1;break;case"Or":if(z)return!0;break;case"Not":return!z;default:return!0}}return A==="And"}},{key:"isVisible",value:function(R){if(this._groups.size===0)return!0;if(!R)return(0,t.warn)("Optional content group not defined."),!0;if(R.type==="OCG")return this._groups.has(R.id)?this._groups.get(R.id).visible:((0,t.warn)("Optional content group not found: ".concat(R.id)),!0);if(R.type==="OCMD"){if(R.expression)return this._evaluateVisibilityExpression(R.expression);if(!R.policy||R.policy==="AnyOn"){var P=a(R.ids),A;try{for(P.s();!(A=P.n()).done;){var D=A.value;if(!this._groups.has(D))return(0,t.warn)("Optional content group not found: ".concat(D)),!0;if(this._groups.get(D).visible)return!0}}catch(I){P.e(I)}finally{P.f()}return!1}else if(R.policy==="AllOn"){var k=a(R.ids),z;try{for(k.s();!(z=k.n()).done;){var v=z.value;if(!this._groups.has(v))return(0,t.warn)("Optional content group not found: ".concat(v)),!0;if(!this._groups.get(v).visible)return!1}}catch(I){k.e(I)}finally{k.f()}return!0}else if(R.policy==="AnyOff"){var f=a(R.ids),d;try{for(f.s();!(d=f.n()).done;){var b=d.value;if(!this._groups.has(b))return(0,t.warn)("Optional content group not found: ".concat(b)),!0;if(!this._groups.get(b).visible)return!0}}catch(I){f.e(I)}finally{f.f()}return!1}else if(R.policy==="AllOff"){var y=a(R.ids),p;try{for(y.s();!(p=y.n()).done;){var C=p.value;if(!this._groups.has(C))return(0,t.warn)("Optional content group not found: ".concat(C)),!0;if(this._groups.get(C).visible)return!1}}catch(I){y.e(I)}finally{y.f()}return!0}return(0,t.warn)("Unknown optional content policy ".concat(R.policy,".")),!0}return(0,t.warn)("Unknown group type ".concat(R.type,".")),!0}},{key:"setVisibility",value:function(R){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this._groups.has(R)){(0,t.warn)("Optional content group not found: ".concat(R));return}this._groups.get(R).visible=!!P}},{key:"getOrder",value:function(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function(){return this._groups.size>0?(0,t.objectFromMap)(this._groups):null}},{key:"getGroup",value:function(R){return this._groups.get(R)||null}}]),N}();n.OptionalContentConfig=x},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var t=u(e(2)),a=e(4),o=e(1);function u(k){return k&&k.__esModule?k:{default:k}}function l(k,z,v,f,d,b,y){try{var p=k[b](y),C=p.value}catch(I){v(I);return}p.done?z(C):Promise.resolve(C).then(f,d)}function h(k){return function(){var z=this,v=arguments;return new Promise(function(f,d){var b=k.apply(z,v);function y(C){l(b,f,d,y,p,"next",C)}function p(C){l(b,f,d,y,p,"throw",C)}y(void 0)})}}function S(k,z){var v=typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(!v){if(Array.isArray(k)||(v=w(k))||z&&k&&typeof k.length=="number"){v&&(k=v);var f=0,d=function(){};return{s:d,n:function(){return f>=k.length?{done:!0}:{done:!1,value:k[f++]}},e:function(I){throw I},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b=!0,y=!1,p;return{s:function(){v=v.call(k)},n:function(){var I=v.next();return b=I.done,I},e:function(I){y=!0,p=I},f:function(){try{!b&&v.return!=null&&v.return()}finally{if(y)throw p}}}}function w(k,z){if(!!k){if(typeof k=="string")return x(k,z);var v=Object.prototype.toString.call(k).slice(8,-1);if(v==="Object"&&k.constructor&&(v=k.constructor.name),v==="Map"||v==="Set")return Array.from(k);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return x(k,z)}}function x(k,z){(z==null||z>k.length)&&(z=k.length);for(var v=0,f=new Array(z);v<z;v++)f[v]=k[v];return f}function N(k,z){if(!(k instanceof z))throw new TypeError("Cannot call a class as a function")}function T(k,z){for(var v=0;v<z.length;v++){var f=z[v];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(k,f.key,f)}}function R(k,z,v){return z&&T(k.prototype,z),v&&T(k,v),k}var P=function(){function k(z,v){var f=this;N(this,k),(0,a.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=z.progressiveDone||!1,this._contentDispositionFilename=z.contentDispositionFilename||null;var d=z.initialData;if((d==null?void 0:d.length)>0){var b=new Uint8Array(d).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!z.disableStream,this._isRangeSupported=!z.disableRange,this._contentLength=z.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(y,p){f._onReceiveData({begin:y,chunk:p})}),this._pdfDataRangeTransport.addProgressListener(function(y,p){f._onProgress({loaded:y,total:p})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(y){f._onReceiveData({chunk:y})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){f._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}return R(k,[{key:"_onReceiveData",value:function(v){var f=new Uint8Array(v.chunk).buffer;if(v.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{var d=this._rangeReaders.some(function(b){return b._begin!==v.begin?!1:(b._enqueue(f),!0)});(0,a.assert)(d,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var v,f;return(v=(f=this._fullRequestReader)===null||f===void 0?void 0:f._loaded)!==null&&v!==void 0?v:0}},{key:"_onProgress",value:function(v){if(v.total===void 0){var f=this._rangeReaders[0];f!=null&&f.onProgress&&f.onProgress({loaded:v.loaded})}else{var d=this._fullRequestReader;d!=null&&d.onProgress&&d.onProgress({loaded:v.loaded,total:v.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(v){var f=this._rangeReaders.indexOf(v);f>=0&&this._rangeReaders.splice(f,1)}},{key:"getFullReader",value:function(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var v=this._queuedChunks;return this._queuedChunks=null,new A(this,v,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(v,f){if(f<=this._progressiveDataLength)return null;var d=new D(this,v,f);return this._pdfDataRangeTransport.requestDataRange(v,f),this._rangeReaders.push(d),d}},{key:"cancelAllRequests",value:function(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);var f=S(this._rangeReaders.slice(0)),d;try{for(f.s();!(d=f.n()).done;){var b=d.value;b.cancel(v)}}catch(y){f.e(y)}finally{f.f()}this._pdfDataRangeTransport.abort()}}]),k}();n.PDFDataTransportStream=P;var A=function(){function k(z,v){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;N(this,k),this._stream=z,this._done=f||!1,this._filename=(0,o.isPdfFile)(d)?d:null,this._queuedChunks=v||[],this._loaded=0;var b=S(this._queuedChunks),y;try{for(b.s();!(y=b.n()).done;){var p=y.value;this._loaded+=p.byteLength}}catch(C){b.e(C)}finally{b.f()}this._requests=[],this._headersReady=Promise.resolve(),z._fullRequestReader=this,this.onProgress=null}return R(k,[{key:"_enqueue",value:function(v){if(!this._done){if(this._requests.length>0){var f=this._requests.shift();f.resolve({value:v,done:!1})}else this._queuedChunks.push(v);this._loaded+=v.byteLength}}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:function(){var z=h(t.default.mark(function f(){var d,b;return t.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(this._queuedChunks.length>0)){p.next=3;break}return d=this._queuedChunks.shift(),p.abrupt("return",{value:d,done:!1});case 3:if(!this._done){p.next=5;break}return p.abrupt("return",{value:void 0,done:!0});case 5:return b=(0,a.createPromiseCapability)(),this._requests.push(b),p.abrupt("return",b.promise);case 8:case"end":return p.stop()}},f,this)}));function v(){return z.apply(this,arguments)}return v}()},{key:"cancel",value:function(v){this._done=!0;var f=S(this._requests),d;try{for(f.s();!(d=f.n()).done;){var b=d.value;b.resolve({value:void 0,done:!0})}}catch(y){f.e(y)}finally{f.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),k}(),D=function(){function k(z,v,f){N(this,k),this._stream=z,this._begin=v,this._end=f,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return R(k,[{key:"_enqueue",value:function(v){if(!this._done){if(this._requests.length===0)this._queuedChunk=v;else{var f=this._requests.shift();f.resolve({value:v,done:!1});var d=S(this._requests),b;try{for(d.s();!(b=d.n()).done;){var y=b.value;y.resolve({value:void 0,done:!0})}}catch(p){d.e(p)}finally{d.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var z=h(t.default.mark(function f(){var d,b;return t.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this._queuedChunk){p.next=4;break}return d=this._queuedChunk,this._queuedChunk=null,p.abrupt("return",{value:d,done:!1});case 4:if(!this._done){p.next=6;break}return p.abrupt("return",{value:void 0,done:!0});case 6:return b=(0,a.createPromiseCapability)(),this._requests.push(b),p.abrupt("return",b.promise);case 9:case"end":return p.stop()}},f,this)}));function v(){return z.apply(this,arguments)}return v}()},{key:"cancel",value:function(v){this._done=!0;var f=S(this._requests),d;try{for(f.s();!(d=f.n()).done;){var b=d.value;b.resolve({value:void 0,done:!0})}}catch(y){f.e(y)}finally{f.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),k}()},(i,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;function e(S,w){var x=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!x){if(Array.isArray(S)||(x=t(S))||w&&S&&typeof S.length=="number"){x&&(S=x);var N=0,T=function(){};return{s:T,n:function(){return N>=S.length?{done:!0}:{done:!1,value:S[N++]}},e:function(k){throw k},f:T}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,P=!1,A;return{s:function(){x=x.call(S)},n:function(){var k=x.next();return R=k.done,k},e:function(k){P=!0,A=k},f:function(){try{!R&&x.return!=null&&x.return()}finally{if(P)throw A}}}}function t(S,w){if(!!S){if(typeof S=="string")return a(S,w);var x=Object.prototype.toString.call(S).slice(8,-1);if(x==="Object"&&S.constructor&&(x=S.constructor.name),x==="Map"||x==="Set")return Array.from(S);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return a(S,w)}}function a(S,w){(w==null||w>S.length)&&(w=S.length);for(var x=0,N=new Array(w);x<w;x++)N[x]=S[x];return N}function o(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function u(S,w){for(var x=0;x<w.length;x++){var N=w[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(S,N.key,N)}}function l(S,w,x){return w&&u(S.prototype,w),x&&u(S,x),S}var h=function(){function S(){o(this,S)}return l(S,null,[{key:"textContent",value:function(x){var N=[],T={items:N,styles:Object.create(null)};function R(P){var A;if(!!P){var D=null,k=P.name;if(k==="#text")D=P.value;else if(S.shouldBuildText(k))P!=null&&(A=P.attributes)!==null&&A!==void 0&&A.textContent?D=P.attributes.textContent:P.value&&(D=P.value);else return;if(D!==null&&N.push({str:D}),!!P.children){var z=e(P.children),v;try{for(z.s();!(v=z.n()).done;){var f=v.value;R(f)}}catch(d){z.e(d)}finally{z.f()}}}}return R(x),T}},{key:"shouldBuildText",value:function(x){return!(x==="textarea"||x==="input"||x==="option"||x==="select")}}]),S}();n.XfaText=h},(i,n,e)=>{function t(fe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function($){return typeof $}:t=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},t(fe)}Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var a=e(4),o=e(1),u=e(139),l=e(149),h=e(150);function S(fe,de,$){return w(fe,de),$}function w(fe,de){if(fe!==de)throw new TypeError("Private static access of wrong provenance")}function x(fe,de,$){return typeof Reflect!="undefined"&&Reflect.get?x=Reflect.get:x=function(Z,oe,ne){var J=N(Z,oe);if(!!J){var he=Object.getOwnPropertyDescriptor(J,oe);return he.get?he.get.call(ne):he.value}},x(fe,de,$||fe)}function N(fe,de){for(;!Object.prototype.hasOwnProperty.call(fe,de)&&(fe=y(fe),fe!==null););return fe}function T(fe,de,$){return de in fe?Object.defineProperty(fe,de,{value:$,enumerable:!0,configurable:!0,writable:!0}):fe[de]=$,fe}function R(fe){return D(fe)||A(fe)||j(fe)||P()}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(fe){if(typeof Symbol!="undefined"&&fe[Symbol.iterator]!=null||fe["@@iterator"]!=null)return Array.from(fe)}function D(fe){if(Array.isArray(fe))return W(fe)}function k(fe,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(de&&de.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),de&&z(fe,de)}function z(fe,de){return z=Object.setPrototypeOf||function(te,Z){return te.__proto__=Z,te},z(fe,de)}function v(fe){var de=b();return function(){var te=y(fe),Z;if(de){var oe=y(this).constructor;Z=Reflect.construct(te,arguments,oe)}else Z=te.apply(this,arguments);return f(this,Z)}}function f(fe,de){if(de&&(t(de)==="object"||typeof de=="function"))return de;if(de!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(fe)}function d(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function b(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(fe){return y=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)},y(fe)}function p(fe,de){var $=typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if(!$){if(Array.isArray(fe)||($=j(fe))||de&&fe&&typeof fe.length=="number"){$&&(fe=$);var te=0,Z=function(){};return{s:Z,n:function(){return te>=fe.length?{done:!0}:{done:!1,value:fe[te++]}},e:function(ce){throw ce},f:Z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe=!0,ne=!1,J;return{s:function(){$=$.call(fe)},n:function(){var ce=$.next();return oe=ce.done,ce},e:function(ce){ne=!0,J=ce},f:function(){try{!oe&&$.return!=null&&$.return()}finally{if(ne)throw J}}}}function C(fe,de){return Q(fe)||H(fe,de)||j(fe,de)||I()}function I(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(fe,de){if(!!fe){if(typeof fe=="string")return W(fe,de);var $=Object.prototype.toString.call(fe).slice(8,-1);if($==="Object"&&fe.constructor&&($=fe.constructor.name),$==="Map"||$==="Set")return Array.from(fe);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return W(fe,de)}}function W(fe,de){(de==null||de>fe.length)&&(de=fe.length);for(var $=0,te=new Array(de);$<de;$++)te[$]=fe[$];return te}function H(fe,de){var $=fe==null?null:typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if($!=null){var te=[],Z=!0,oe=!1,ne,J;try{for($=$.call(fe);!(Z=(ne=$.next()).done)&&(te.push(ne.value),!(de&&te.length===de));Z=!0);}catch(he){oe=!0,J=he}finally{try{!Z&&$.return!=null&&$.return()}finally{if(oe)throw J}}return te}}function Q(fe){if(Array.isArray(fe))return fe}function K(fe,de){if(!(fe instanceof de))throw new TypeError("Cannot call a class as a function")}function ie(fe,de){for(var $=0;$<de.length;$++){var te=de[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(fe,te.key,te)}}function V(fe,de,$){return de&&ie(fe.prototype,de),$&&ie(fe,$),fe}var Y=1e3,F=new WeakSet,m=function(){function fe(){K(this,fe)}return V(fe,null,[{key:"create",value:function($){var te=$.data.annotationType;switch(te){case a.AnnotationType.LINK:return new L($);case a.AnnotationType.TEXT:return new X($);case a.AnnotationType.WIDGET:var Z=$.data.fieldType;switch(Z){case"Tx":return new q($);case"Btn":return $.data.radioButton?new Ce($):$.data.checkBox?new be($):new Ee($);case"Ch":return new G($)}return new re($);case a.AnnotationType.POPUP:return new M($);case a.AnnotationType.FREETEXT:return new c($);case a.AnnotationType.LINE:return new _($);case a.AnnotationType.SQUARE:return new B($);case a.AnnotationType.CIRCLE:return new U($);case a.AnnotationType.POLYLINE:return new ee($);case a.AnnotationType.CARET:return new pe($);case a.AnnotationType.INK:return new ge($);case a.AnnotationType.POLYGON:return new ue($);case a.AnnotationType.HIGHLIGHT:return new ve($);case a.AnnotationType.UNDERLINE:return new _e($);case a.AnnotationType.SQUIGGLY:return new Re($);case a.AnnotationType.STRIKEOUT:return new we($);case a.AnnotationType.STAMP:return new Ie($);case a.AnnotationType.FILEATTACHMENT:return new Fe($);default:return new E($)}}}]),fe}(),E=function(){function fe(de){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=$.isRenderable,Z=te===void 0?!1:te,oe=$.ignoreBorder,ne=oe===void 0?!1:oe,J=$.createQuadrilaterals,he=J===void 0?!1:J;K(this,fe),this.isRenderable=Z,this.data=de.data,this.layer=de.layer,this.page=de.page,this.viewport=de.viewport,this.linkService=de.linkService,this.downloadManager=de.downloadManager,this.imageResourcesPath=de.imageResourcesPath,this.renderForms=de.renderForms,this.svgFactory=de.svgFactory,this.annotationStorage=de.annotationStorage,this.enableScripting=de.enableScripting,this.hasJSActions=de.hasJSActions,this._fieldObjects=de.fieldObjects,this._mouseState=de.mouseState,Z&&(this.container=this._createContainer(ne)),he&&(this.quadrilaterals=this._createQuadrilaterals(ne))}return V(fe,[{key:"_createContainer",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,te=this.data,Z=this.page,oe=this.viewport,ne=document.createElement("section"),J=te.rect[2]-te.rect[0],he=te.rect[3]-te.rect[1];ne.setAttribute("data-annotation-id",te.id);var ce=a.Util.normalizeRect([te.rect[0],Z.view[3]-te.rect[1]+Z.view[1],te.rect[2],Z.view[3]-te.rect[3]+Z.view[1]]);if(te.hasOwnCanvas){var Se=oe.transform.slice(),ke=a.Util.singularValueDecompose2dScale(Se),Le=C(ke,2),De=Le[0],Ae=Le[1];J=Math.ceil(J*De),he=Math.ceil(he*Ae),ce[0]*=De,ce[1]*=Ae;for(var $e=0;$e<4;$e++)Se[$e]=Math.sign(Se[$e]);ne.style.transform="matrix(".concat(Se.join(","),")")}else ne.style.transform="matrix(".concat(oe.transform.join(","),")");if(ne.style.transformOrigin="".concat(-ce[0],"px ").concat(-ce[1],"px"),!$&&te.borderStyle.width>0){ne.style.borderWidth="".concat(te.borderStyle.width,"px"),te.borderStyle.style!==a.AnnotationBorderStyleType.UNDERLINE&&(J-=2*te.borderStyle.width,he-=2*te.borderStyle.width);var xe=te.borderStyle.horizontalCornerRadius,Oe=te.borderStyle.verticalCornerRadius;if(xe>0||Oe>0){var Be="".concat(xe,"px / ").concat(Oe,"px");ne.style.borderRadius=Be}switch(te.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:ne.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:ne.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:ne.style.borderBottomStyle="solid";break}var Ne=te.borderColor||te.color||null;Ne?ne.style.borderColor=a.Util.makeHexColor(te.color[0]|0,te.color[1]|0,te.color[2]|0):ne.style.borderWidth=0}return ne.style.left="".concat(ce[0],"px"),ne.style.top="".concat(ce[1],"px"),te.hasOwnCanvas?ne.style.width=ne.style.height="auto":(ne.style.width="".concat(J,"px"),ne.style.height="".concat(he,"px")),ne}},{key:"_createQuadrilaterals",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;var te=[],Z=this.data.rect,oe=p(this.data.quadPoints),ne;try{for(oe.s();!(ne=oe.n()).done;){var J=ne.value;this.data.rect=[J[2].x,J[2].y,J[1].x,J[1].y],te.push(this._createContainer($))}}catch(he){oe.e(he)}finally{oe.f()}return this.data.rect=Z,te}},{key:"_createPopup",value:function($,te){var Z=this.container;this.quadrilaterals&&($=$||this.quadrilaterals,Z=this.quadrilaterals[0]),$||($=document.createElement("div"),$.style.height=Z.style.height,$.style.width=Z.style.width,Z.appendChild($));var oe=new g({container:Z,trigger:$,color:te.color,titleObj:te.titleObj,modificationDate:te.modificationDate,contentsObj:te.contentsObj,richText:te.richText,hideWrapper:!0}),ne=oe.render();ne.style.left=Z.style.width,Z.appendChild(ne)}},{key:"_renderQuadrilaterals",value:function($){var te=p(this.quadrilaterals),Z;try{for(te.s();!(Z=te.n()).done;){var oe=Z.value;oe.className=$}}catch(ne){te.e(ne)}finally{te.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function($){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Z=[];if(this._fieldObjects){var oe=this._fieldObjects[$];if(oe){var ne=p(oe),J;try{for(ne.s();!(J=ne.n()).done;){var he=J.value,ce=he.page,Se=he.id,ke=he.exportValues;if(ce!==-1&&Se!==te){var Le=typeof ke=="string"?ke:null,De=document.getElementById(Se);if(De&&!F.has(De)){(0,a.warn)("_getElementsByName - element not allowed: ".concat(Se));continue}Z.push({id:Se,exportValue:Le,domElement:De})}}}catch(Ne){ne.e(Ne)}finally{ne.f()}}return Z}var Ae=p(document.getElementsByName($)),$e;try{for(Ae.s();!($e=Ae.n()).done;){var xe=$e.value,Oe=xe.id,Be=xe.exportValue;Oe!==te&&(!F.has(xe)||Z.push({id:Oe,exportValue:Be,domElement:xe}))}}catch(Ne){Ae.e(Ne)}finally{Ae.f()}return Z}}],[{key:"platform",get:function(){var $=typeof navigator!="undefined"?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:$.includes("Win"),isMac:$.includes("Mac")})}}]),fe}(),L=function(fe){k($,fe);var de=v($);function $(te){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;K(this,$);var oe=!!(te.data.url||te.data.dest||te.data.action||te.data.isTooltipOnly||te.data.resetForm||te.data.actions&&(te.data.actions.Action||te.data.actions["Mouse Up"]||te.data.actions["Mouse Down"]));return de.call(this,te,{isRenderable:oe,ignoreBorder:!!(Z!=null&&Z.ignoreBorder),createQuadrilaterals:!0})}return V($,[{key:"render",value:function(){var Z=this.data,oe=this.linkService,ne=document.createElement("a");if(Z.url){var J;oe.addLinkAttributes||(0,a.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(J=oe.addLinkAttributes)===null||J===void 0||J.call(oe,ne,Z.url,Z.newWindow)}else if(Z.action)this._bindNamedAction(ne,Z.action);else if(Z.dest)this._bindLink(ne,Z.dest);else{var he=!1;Z.actions&&(Z.actions.Action||Z.actions["Mouse Up"]||Z.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(he=!0,this._bindJSAction(ne,Z)),Z.resetForm?this._bindResetFormAction(ne,Z.resetForm):he||this._bindLink(ne,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(ce,Se){var ke=Se===0?ne:ne.cloneNode();return ce.appendChild(ke),ce}):(this.container.className="linkAnnotation",this.container.appendChild(ne),this.container)}},{key:"_bindLink",value:function(Z,oe){var ne=this;Z.href=this.linkService.getDestinationHash(oe),Z.onclick=function(){return oe&&ne.linkService.goToDestination(oe),!1},(oe||oe==="")&&(Z.className="internalLink")}},{key:"_bindNamedAction",value:function(Z,oe){var ne=this;Z.href=this.linkService.getAnchorUrl(""),Z.onclick=function(){return ne.linkService.executeNamedAction(oe),!1},Z.className="internalLink"}},{key:"_bindJSAction",value:function(Z,oe){var ne=this;Z.href=this.linkService.getAnchorUrl("");for(var J=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),he=function(){var De=Se[ce],Ae=J.get(De);if(!Ae)return"continue";Z[Ae]=function(){var $e;return($e=ne.linkService.eventBus)===null||$e===void 0||$e.dispatch("dispatcheventinsandbox",{source:ne,detail:{id:oe.id,name:De}}),!1}},ce=0,Se=Object.keys(oe.actions);ce<Se.length;ce++)var ke=he();Z.onclick||(Z.onclick=function(){return!1}),Z.className="internalLink"}},{key:"_bindResetFormAction",value:function(Z,oe){var ne=this,J=Z.onclick;if(J||(Z.href=this.linkService.getAnchorUrl("")),Z.className="internalLink",!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),J||(Z.onclick=function(){return!1});return}Z.onclick=function(){J&&J();var he=oe.fields,ce=oe.refs,Se=oe.include,ke=[];if(he.length!==0||ce.length!==0){var Le=new Set(ce),De=p(he),Ae;try{for(De.s();!(Ae=De.n()).done;){var $e=Ae.value,xe=ne._fieldObjects[$e]||[],Oe=p(xe),Be;try{for(Oe.s();!(Be=Oe.n()).done;){var Ne=Be.value.id;Le.add(Ne)}}catch(je){Oe.e(je)}finally{Oe.f()}}}catch(je){De.e(je)}finally{De.f()}for(var Ve=0,qe=Object.values(ne._fieldObjects);Ve<qe.length;Ve++){var Ze=qe[Ve],nt=p(Ze),ot;try{for(nt.s();!(ot=nt.n()).done;){var bt=ot.value;Le.has(bt.id)===Se&&ke.push(bt)}}catch(je){nt.e(je)}finally{nt.f()}}}else for(var vt=0,xt=Object.values(ne._fieldObjects);vt<xt.length;vt++){var Xt=xt[vt];ke.push.apply(ke,R(Xt))}for(var Ft=ne.annotationStorage,Mt=[],Lt=0,Kt=ke;Lt<Kt.length;Lt++){var Rt=Kt[Lt],Ot=Rt.id;switch(Mt.push(Ot),Rt.type){case"text":{var le=Rt.defaultValue||"";Ft.setValue(Ot,{value:le,valueAsString:le});break}case"checkbox":case"radiobutton":{var Te=Rt.defaultValue===Rt.exportValues;Ft.setValue(Ot,{value:Te});break}case"combobox":case"listbox":{var se=Rt.defaultValue||"";Ft.setValue(Ot,{value:se});break}default:continue}var me=document.getElementById(Ot);!me||!F.has(me)||me.dispatchEvent(new Event("resetform"))}if(ne.enableScripting){var ze;(ze=ne.linkService.eventBus)===null||ze===void 0||ze.dispatch("dispatcheventinsandbox",{source:ne,detail:{id:"app",ids:Mt,name:"ResetForm"}})}return!1}}}]),$}(E),X=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J})}return V($,[{key:"render",value:function(){this.container.className="textAnnotation";var Z=document.createElement("img");return Z.style.height=this.container.style.height,Z.style.width=this.container.style.width,Z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Z.alt="[{{type}} Annotation]",Z.dataset.l10nId="text_annotation_type",Z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(Z,this.data),this.container.appendChild(Z),this.container}}]),$}(E),re=function(fe){k($,fe);var de=v($);function $(){return K(this,$),de.apply(this,arguments)}return V($,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(Z){var oe=E.platform,ne=oe.isWin,J=oe.isMac;return ne&&Z.ctrlKey||J&&Z.metaKey}},{key:"_setEventListener",value:function(Z,oe,ne,J){var he=this;oe.includes("mouse")?Z.addEventListener(oe,function(ce){var Se;(Se=he.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:he,detail:{id:he.data.id,name:ne,value:J(ce),shift:ce.shiftKey,modifier:he._getKeyModifier(ce)}})}):Z.addEventListener(oe,function(ce){var Se;(Se=he.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:he,detail:{id:he.data.id,name:ne,value:ce.target.checked}})})}},{key:"_setEventListeners",value:function(Z,oe,ne){var J=p(oe),he;try{for(J.s();!(he=J.n()).done;){var ce,Se=C(he.value,2),ke=Se[0],Le=Se[1];(Le==="Action"||(ce=this.data.actions)!==null&&ce!==void 0&&ce[Le])&&this._setEventListener(Z,ke,Le,ne)}}catch(De){J.e(De)}finally{J.f()}}},{key:"_setBackgroundColor",value:function(Z){var oe=this.data.backgroundColor||null;Z.style.backgroundColor=oe===null?"transparent":a.Util.makeHexColor(oe[0],oe[1],oe[2])}},{key:"_dispatchEventFromSandbox",value:function(Z,oe){for(var ne=this,J=function(Ae,$e,xe){var Oe=xe.detail[Ae];xe.target.style[$e]=l.ColorConverters["".concat(Oe[0],"_HTML")](Oe.slice(1))},he={display:function(Ae){var $e=Ae.detail.display%2===1;Ae.target.style.visibility=$e?"hidden":"visible",ne.annotationStorage.setValue(ne.data.id,{hidden:$e,print:Ae.detail.display===0||Ae.detail.display===3})},print:function(Ae){ne.annotationStorage.setValue(ne.data.id,{print:Ae.detail.print})},hidden:function(Ae){Ae.target.style.visibility=Ae.detail.hidden?"hidden":"visible",ne.annotationStorage.setValue(ne.data.id,{hidden:Ae.detail.hidden})},focus:function(Ae){setTimeout(function(){return Ae.target.focus({preventScroll:!1})},0)},userName:function(Ae){Ae.target.title=Ae.detail.userName},readonly:function(Ae){Ae.detail.readonly?Ae.target.setAttribute("readonly",""):Ae.target.removeAttribute("readonly")},required:function(Ae){Ae.detail.required?Ae.target.setAttribute("required",""):Ae.target.removeAttribute("required")},bgColor:function(Ae){J("bgColor","backgroundColor",Ae)},fillColor:function(Ae){J("fillColor","backgroundColor",Ae)},fgColor:function(Ae){J("fgColor","color",Ae)},textColor:function(Ae){J("textColor","color",Ae)},borderColor:function(Ae){J("borderColor","borderColor",Ae)},strokeColor:function(Ae){J("strokeColor","borderColor",Ae)}},ce=0,Se=Object.keys(oe.detail);ce<Se.length;ce++){var ke=Se[ce],Le=Z[ke]||he[ke];Le&&Le(oe)}}}]),$}(E),q=function(fe){k($,fe);var de=v($);function $(te){K(this,$);var Z=te.renderForms||!te.data.hasAppearance&&!!te.data.fieldValue;return de.call(this,te,{isRenderable:Z})}return V($,[{key:"setPropertyOnSiblings",value:function(Z,oe,ne,J){var he=this.annotationStorage,ce=p(this._getElementsByName(Z.name,Z.id)),Se;try{for(ce.s();!(Se=ce.n()).done;){var ke=Se.value;ke.domElement&&(ke.domElement[oe]=ne),he.setValue(ke.id,T({},J,ne))}}catch(Le){ce.e(Le)}finally{ce.f()}}},{key:"render",value:function(){var Z=this,oe=this.annotationStorage,ne=this.data.id;this.container.className="textWidgetAnnotation";var J=null;if(this.renderForms){var he=oe.getValue(ne,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),ce=he.valueAsString||he.value||"",Se={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(J=document.createElement("textarea"),J.textContent=ce):(J=document.createElement("input"),J.type="text",J.setAttribute("value",ce)),F.add(J),J.disabled=this.data.readOnly,J.name=this.data.fieldName,J.tabIndex=Y,Se.userValue=ce,J.setAttribute("id",ne),J.addEventListener("input",function(xe){oe.setValue(ne,{value:xe.target.value}),Z.setPropertyOnSiblings(J,"value",xe.target.value,"value")}),J.addEventListener("resetform",function(xe){var Oe=Z.data.defaultFieldValue||"";J.value=Se.userValue=Oe,delete Se.formattedValue});var ke=function(Oe){Se.formattedValue&&(Oe.target.value=Se.formattedValue),Oe.target.scrollLeft=0,Se.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){var Le;J.addEventListener("focus",function(xe){Se.userValue&&(xe.target.value=Se.userValue)}),J.addEventListener("updatefromsandbox",function(xe){var Oe={value:function(Ne){Se.userValue=Ne.detail.value||"",oe.setValue(ne,{value:Se.userValue.toString()}),Se.formattedValue||(Ne.target.value=Se.userValue)},valueAsString:function(Ne){Se.formattedValue=Ne.detail.valueAsString||"",Ne.target!==document.activeElement&&(Ne.target.value=Se.formattedValue),oe.setValue(ne,{formattedValue:Se.formattedValue})},selRange:function(Ne){var Ve=C(Ne.detail.selRange,2),qe=Ve[0],Ze=Ve[1];qe>=0&&Ze<Ne.target.value.length&&Ne.target.setSelectionRange(qe,Ze)}};Z._dispatchEventFromSandbox(Oe,xe)}),J.addEventListener("keydown",function(xe){var Oe;Se.beforeInputValue=xe.target.value;var Be=-1;xe.key==="Escape"?Be=0:xe.key==="Enter"?Be=2:xe.key==="Tab"&&(Be=3),Be!==-1&&(Se.userValue=xe.target.value,(Oe=Z.linkService.eventBus)===null||Oe===void 0||Oe.dispatch("dispatcheventinsandbox",{source:Z,detail:{id:ne,name:"Keystroke",value:xe.target.value,willCommit:!0,commitKey:Be,selStart:xe.target.selectionStart,selEnd:xe.target.selectionEnd}}))});var De=ke;ke=null,J.addEventListener("blur",function(xe){if(Z._mouseState.isDown){var Oe;Se.userValue=xe.target.value,(Oe=Z.linkService.eventBus)===null||Oe===void 0||Oe.dispatch("dispatcheventinsandbox",{source:Z,detail:{id:ne,name:"Keystroke",value:xe.target.value,willCommit:!0,commitKey:1,selStart:xe.target.selectionStart,selEnd:xe.target.selectionEnd}})}De(xe)}),J.addEventListener("mousedown",function(xe){Se.beforeInputValue=xe.target.value,Se.beforeInputSelectionRange=null}),J.addEventListener("keyup",function(xe){xe.target.selectionStart===xe.target.selectionEnd&&(Se.beforeInputSelectionRange=null)}),J.addEventListener("select",function(xe){Se.beforeInputSelectionRange=[xe.target.selectionStart,xe.target.selectionEnd]}),(Le=this.data.actions)!==null&&Le!==void 0&&Le.Keystroke&&J.addEventListener("input",function(xe){var Oe,Be=-1,Ne=-1;if(Se.beforeInputSelectionRange){var Ve=C(Se.beforeInputSelectionRange,2);Be=Ve[0],Ne=Ve[1]}(Oe=Z.linkService.eventBus)===null||Oe===void 0||Oe.dispatch("dispatcheventinsandbox",{source:Z,detail:{id:ne,name:"Keystroke",value:Se.beforeInputValue,change:xe.data,willCommit:!1,selStart:Be,selEnd:Ne}})}),this._setEventListeners(J,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(xe){return xe.target.value})}if(ke&&J.addEventListener("blur",ke),this.data.maxLen!==null&&(J.maxLength=this.data.maxLen),this.data.comb){var Ae=this.data.rect[2]-this.data.rect[0],$e=Ae/this.data.maxLen;J.classList.add("comb"),J.style.letterSpacing="calc(".concat($e,"px - 1ch)")}}else J=document.createElement("div"),J.textContent=this.data.fieldValue,J.style.verticalAlign="middle",J.style.display="table-cell";return this._setTextStyle(J),this._setBackgroundColor(J),this.container.appendChild(J),this.container}},{key:"_setTextStyle",value:function(Z){var oe=["left","center","right"],ne=this.data.defaultAppearanceData,J=ne.fontSize,he=ne.fontColor,ce=Z.style;J&&(ce.fontSize="".concat(J,"px")),ce.color=a.Util.makeHexColor(he[0],he[1],he[2]),this.data.textAlignment!==null&&(ce.textAlign=oe[this.data.textAlignment])}}]),$}(re),be=function(fe){k($,fe);var de=v($);function $(te){return K(this,$),de.call(this,te,{isRenderable:te.renderForms})}return V($,[{key:"render",value:function(){var Z=this,oe=this.annotationStorage,ne=this.data,J=ne.id,he=oe.getValue(J,{value:ne.exportValue===ne.fieldValue}).value;typeof he=="string"&&(he=he!=="Off",oe.setValue(J,{value:he})),this.container.className="buttonWidgetAnnotation checkBox";var ce=document.createElement("input");return F.add(ce),ce.disabled=ne.readOnly,ce.type="checkbox",ce.name=ne.fieldName,he&&ce.setAttribute("checked",!0),ce.setAttribute("id",J),ce.setAttribute("exportValue",ne.exportValue),ce.tabIndex=Y,ce.addEventListener("change",function(Se){var ke=Se.target,Le=ke.name,De=ke.checked,Ae=p(Z._getElementsByName(Le,J)),$e;try{for(Ae.s();!($e=Ae.n()).done;){var xe=$e.value,Oe=De&&xe.exportValue===ne.exportValue;xe.domElement&&(xe.domElement.checked=Oe),oe.setValue(xe.id,{value:Oe})}}catch(Be){Ae.e(Be)}finally{Ae.f()}oe.setValue(J,{value:De})}),ce.addEventListener("resetform",function(Se){var ke=ne.defaultFieldValue||"Off";Se.target.checked=ke===ne.exportValue}),this.enableScripting&&this.hasJSActions&&(ce.addEventListener("updatefromsandbox",function(Se){var ke={value:function(De){De.target.checked=De.detail.value!=="Off",oe.setValue(J,{value:De.target.checked})}};Z._dispatchEventFromSandbox(ke,Se)}),this._setEventListeners(ce,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Se){return Se.target.checked})),this._setBackgroundColor(ce),this.container.appendChild(ce),this.container}}]),$}(re),Ce=function(fe){k($,fe);var de=v($);function $(te){return K(this,$),de.call(this,te,{isRenderable:te.renderForms})}return V($,[{key:"render",value:function(){var Z=this;this.container.className="buttonWidgetAnnotation radioButton";var oe=this.annotationStorage,ne=this.data,J=ne.id,he=oe.getValue(J,{value:ne.fieldValue===ne.buttonValue}).value;typeof he=="string"&&(he=he!==ne.buttonValue,oe.setValue(J,{value:he}));var ce=document.createElement("input");if(F.add(ce),ce.disabled=ne.readOnly,ce.type="radio",ce.name=ne.fieldName,he&&ce.setAttribute("checked",!0),ce.setAttribute("id",J),ce.tabIndex=Y,ce.addEventListener("change",function(ke){var Le=ke.target,De=Le.name,Ae=Le.checked,$e=p(Z._getElementsByName(De,J)),xe;try{for($e.s();!(xe=$e.n()).done;){var Oe=xe.value;oe.setValue(Oe.id,{value:!1})}}catch(Be){$e.e(Be)}finally{$e.f()}oe.setValue(J,{value:Ae})}),ce.addEventListener("resetform",function(ke){var Le=ne.defaultFieldValue;ke.target.checked=Le!=null&&Le===ne.buttonValue}),this.enableScripting&&this.hasJSActions){var Se=ne.buttonValue;ce.addEventListener("updatefromsandbox",function(ke){var Le={value:function(Ae){var $e=Se===Ae.detail.value,xe=p(Z._getElementsByName(Ae.target.name)),Oe;try{for(xe.s();!(Oe=xe.n()).done;){var Be=Oe.value,Ne=$e&&Be.id===J;Be.domElement&&(Be.domElement.checked=Ne),oe.setValue(Be.id,{value:Ne})}}catch(Ve){xe.e(Ve)}finally{xe.f()}}};Z._dispatchEventFromSandbox(Le,ke)}),this._setEventListeners(ce,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(ke){return ke.target.checked})}return this._setBackgroundColor(ce),this.container.appendChild(ce),this.container}}]),$}(re),Ee=function(fe){k($,fe);var de=v($);function $(te){return K(this,$),de.call(this,te,{ignoreBorder:te.data.hasAppearance})}return V($,[{key:"render",value:function(){var Z=x(y($.prototype),"render",this).call(this);return Z.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(Z.title=this.data.alternativeText),Z}}]),$}(L),G=function(fe){k($,fe);var de=v($);function $(te){return K(this,$),de.call(this,te,{isRenderable:te.renderForms})}return V($,[{key:"render",value:function(){var Z=this;this.container.className="choiceWidgetAnnotation";var oe=this.annotationStorage,ne=this.data.id;oe.getValue(ne,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var J=this.data.defaultAppearanceData.fontSize;J||(J=9);var he="calc(".concat(J,"px * var(--zoom-factor))"),ce=document.createElement("select");F.add(ce),ce.disabled=this.data.readOnly,ce.name=this.data.fieldName,ce.setAttribute("id",ne),ce.tabIndex=Y,ce.style.fontSize="".concat(J,"px"),this.data.combo||(ce.size=this.data.options.length,this.data.multiSelect&&(ce.multiple=!0)),ce.addEventListener("resetform",function(xe){var Oe=Z.data.defaultFieldValue,Be=p(ce.options),Ne;try{for(Be.s();!(Ne=Be.n()).done;){var Ve=Ne.value;Ve.selected=Ve.value===Oe}}catch(qe){Be.e(qe)}finally{Be.f()}});var Se=p(this.data.options),ke;try{for(Se.s();!(ke=Se.n()).done;){var Le=ke.value,De=document.createElement("option");De.textContent=Le.displayValue,De.value=Le.exportValue,this.data.combo&&(De.style.fontSize=he),this.data.fieldValue.includes(Le.exportValue)&&De.setAttribute("selected",!0),ce.appendChild(De)}}catch(xe){Se.e(xe)}finally{Se.f()}var Ae=function(Oe,Be){var Ne=Be?"value":"textContent",Ve=Oe.target.options;return Oe.target.multiple?Array.prototype.filter.call(Ve,function(qe){return qe.selected}).map(function(qe){return qe[Ne]}):Ve.selectedIndex===-1?null:Ve[Ve.selectedIndex][Ne]},$e=function(Oe){var Be=Oe.target.options;return Array.prototype.map.call(Be,function(Ne){return{displayValue:Ne.textContent,exportValue:Ne.value}})};return this.enableScripting&&this.hasJSActions?(ce.addEventListener("updatefromsandbox",function(xe){var Oe={value:function(Ne){var Ve=Ne.detail.value,qe=new Set(Array.isArray(Ve)?Ve:[Ve]),Ze=p(ce.options),nt;try{for(Ze.s();!(nt=Ze.n()).done;){var ot=nt.value;ot.selected=qe.has(ot.value)}}catch(bt){Ze.e(bt)}finally{Ze.f()}oe.setValue(ne,{value:Ae(Ne,!0)})},multipleSelection:function(Ne){ce.multiple=!0},remove:function(Ne){var Ve=ce.options,qe=Ne.detail.remove;if(Ve[qe].selected=!1,ce.remove(qe),Ve.length>0){var Ze=Array.prototype.findIndex.call(Ve,function(nt){return nt.selected});Ze===-1&&(Ve[0].selected=!0)}oe.setValue(ne,{value:Ae(Ne,!0),items:$e(Ne)})},clear:function(Ne){for(;ce.length!==0;)ce.remove(0);oe.setValue(ne,{value:null,items:[]})},insert:function(Ne){var Ve=Ne.detail.insert,qe=Ve.index,Ze=Ve.displayValue,nt=Ve.exportValue,ot=document.createElement("option");ot.textContent=Ze,ot.value=nt,ce.insertBefore(ot,ce.children[qe]),oe.setValue(ne,{value:Ae(Ne,!0),items:$e(Ne)})},items:function(Ne){for(var Ve=Ne.detail.items;ce.length!==0;)ce.remove(0);var qe=p(Ve),Ze;try{for(qe.s();!(Ze=qe.n()).done;){var nt=Ze.value,ot=nt.displayValue,bt=nt.exportValue,vt=document.createElement("option");vt.textContent=ot,vt.value=bt,ce.appendChild(vt)}}catch(xt){qe.e(xt)}finally{qe.f()}ce.options.length>0&&(ce.options[0].selected=!0),oe.setValue(ne,{value:Ae(Ne,!0),items:$e(Ne)})},indices:function(Ne){var Ve=new Set(Ne.detail.indices),qe=p(Ne.target.options),Ze;try{for(qe.s();!(Ze=qe.n()).done;){var nt=Ze.value;nt.selected=Ve.has(nt.index)}}catch(ot){qe.e(ot)}finally{qe.f()}oe.setValue(ne,{value:Ae(Ne,!0)})},editable:function(Ne){Ne.target.disabled=!Ne.detail.editable}};Z._dispatchEventFromSandbox(Oe,xe)}),ce.addEventListener("input",function(xe){var Oe,Be=Ae(xe,!0),Ne=Ae(xe,!1);oe.setValue(ne,{value:Be}),(Oe=Z.linkService.eventBus)===null||Oe===void 0||Oe.dispatch("dispatcheventinsandbox",{source:Z,detail:{id:ne,name:"Keystroke",value:Ne,changeEx:Be,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ce,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],function(xe){return xe.target.checked})):ce.addEventListener("input",function(xe){oe.setValue(ne,{value:Ae(xe)})}),this._setBackgroundColor(ce),this.container.appendChild(ce),this.container}}]),$}(re),M=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!((Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J})}return V($,[{key:"render",value:function(){var Z=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",Z.includes(this.data.parentType))return this.container;var oe='[data-annotation-id="'.concat(this.data.parentId,'"]'),ne=this.layer.querySelectorAll(oe);if(ne.length===0)return this.container;var J=new g({container:this.container,trigger:Array.from(ne),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),he=this.page,ce=a.Util.normalizeRect([this.data.parentRect[0],he.view[3]-this.data.parentRect[1]+he.view[1],this.data.parentRect[2],he.view[3]-this.data.parentRect[3]+he.view[1]]),Se=ce[0]+this.data.parentRect[2]-this.data.parentRect[0],ke=ce[1];return this.container.style.transformOrigin="".concat(-Se,"px ").concat(-ke,"px"),this.container.style.left="".concat(Se,"px"),this.container.style.top="".concat(ke,"px"),this.container.appendChild(J.render()),this.container}}]),$}(E),g=function(){function fe(de){K(this,fe),this.container=de.container,this.trigger=de.trigger,this.color=de.color,this.titleObj=de.titleObj,this.modificationDate=de.modificationDate,this.contentsObj=de.contentsObj,this.richText=de.richText,this.hideWrapper=de.hideWrapper||!1,this.pinned=!1}return V(fe,[{key:"render",value:function(){var $,te,Z=.7,oe=document.createElement("div");oe.className="popupWrapper",this.hideElement=this.hideWrapper?oe:this.container,this.hideElement.hidden=!0;var ne=document.createElement("div");ne.className="popup";var J=this.color;if(J){var he=Z*(255-J[0])+J[0],ce=Z*(255-J[1])+J[1],Se=Z*(255-J[2])+J[2];ne.style.backgroundColor=a.Util.makeHexColor(he|0,ce|0,Se|0)}var ke=document.createElement("h1");ke.dir=this.titleObj.dir,ke.textContent=this.titleObj.str,ne.appendChild(ke);var Le=o.PDFDateString.toDateObject(this.modificationDate);if(Le){var De=document.createElement("span");De.className="popupDate",De.textContent="{{date}}, {{time}}",De.dataset.l10nId="annotation_date_string",De.dataset.l10nArgs=JSON.stringify({date:Le.toLocaleDateString(),time:Le.toLocaleTimeString()}),ne.appendChild(De)}if(($=this.richText)!==null&&$!==void 0&&$.str&&(!((te=this.contentsObj)!==null&&te!==void 0&&te.str)||this.contentsObj.str===this.richText.str))h.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:ne}),ne.lastChild.className="richText popupContent";else{var Ae=this._formatContents(this.contentsObj);ne.appendChild(Ae)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var $e=p(this.trigger),xe;try{for($e.s();!(xe=$e.n()).done;){var Oe=xe.value;Oe.addEventListener("click",this._toggle.bind(this)),Oe.addEventListener("mouseover",this._show.bind(this,!1)),Oe.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(Be){$e.e(Be)}finally{$e.f()}return ne.addEventListener("click",this._hide.bind(this,!0)),oe.appendChild(ne),oe}},{key:"_formatContents",value:function($){var te=$.str,Z=$.dir,oe=document.createElement("p");oe.className="popupContent",oe.dir=Z;for(var ne=te.split(/(?:\r\n?|\n)/),J=0,he=ne.length;J<he;++J){var ce=ne[J];oe.appendChild(document.createTextNode(ce)),J<he-1&&oe.appendChild(document.createElement("br"))}return oe}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;$&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;$&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),fe}(),c=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0})}return V($,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),$}(E),_=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0})}return V($,[{key:"render",value:function(){this.container.className="lineAnnotation";var Z=this.data,oe=Z.rect[2]-Z.rect[0],ne=Z.rect[3]-Z.rect[1],J=this.svgFactory.create(oe,ne),he=this.svgFactory.createElement("svg:line");return he.setAttribute("x1",Z.rect[2]-Z.lineCoordinates[0]),he.setAttribute("y1",Z.rect[3]-Z.lineCoordinates[1]),he.setAttribute("x2",Z.rect[2]-Z.lineCoordinates[2]),he.setAttribute("y2",Z.rect[3]-Z.lineCoordinates[3]),he.setAttribute("stroke-width",Z.borderStyle.width||1),he.setAttribute("stroke","transparent"),he.setAttribute("fill","transparent"),J.appendChild(he),this.container.append(J),this._createPopup(he,Z),this.container}}]),$}(E),B=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0})}return V($,[{key:"render",value:function(){this.container.className="squareAnnotation";var Z=this.data,oe=Z.rect[2]-Z.rect[0],ne=Z.rect[3]-Z.rect[1],J=this.svgFactory.create(oe,ne),he=Z.borderStyle.width,ce=this.svgFactory.createElement("svg:rect");return ce.setAttribute("x",he/2),ce.setAttribute("y",he/2),ce.setAttribute("width",oe-he),ce.setAttribute("height",ne-he),ce.setAttribute("stroke-width",he||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),J.appendChild(ce),this.container.append(J),this._createPopup(ce,Z),this.container}}]),$}(E),U=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0})}return V($,[{key:"render",value:function(){this.container.className="circleAnnotation";var Z=this.data,oe=Z.rect[2]-Z.rect[0],ne=Z.rect[3]-Z.rect[1],J=this.svgFactory.create(oe,ne),he=Z.borderStyle.width,ce=this.svgFactory.createElement("svg:ellipse");return ce.setAttribute("cx",oe/2),ce.setAttribute("cy",ne/2),ce.setAttribute("rx",oe/2-he/2),ce.setAttribute("ry",ne/2-he/2),ce.setAttribute("stroke-width",he||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),J.appendChild(ce),this.container.append(J),this._createPopup(ce,Z),this.container}}]),$}(E),ee=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne,J;K(this,$);var he=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return J=de.call(this,te,{isRenderable:he,ignoreBorder:!0}),J.containerClassName="polylineAnnotation",J.svgElementName="svg:polyline",J}return V($,[{key:"render",value:function(){this.container.className=this.containerClassName;var Z=this.data,oe=Z.rect[2]-Z.rect[0],ne=Z.rect[3]-Z.rect[1],J=this.svgFactory.create(oe,ne),he=[],ce=p(Z.vertices),Se;try{for(ce.s();!(Se=ce.n()).done;){var ke=Se.value,Le=ke.x-Z.rect[0],De=Z.rect[3]-ke.y;he.push(Le+","+De)}}catch($e){ce.e($e)}finally{ce.f()}he=he.join(" ");var Ae=this.svgFactory.createElement(this.svgElementName);return Ae.setAttribute("points",he),Ae.setAttribute("stroke-width",Z.borderStyle.width||1),Ae.setAttribute("stroke","transparent"),Ae.setAttribute("fill","transparent"),J.appendChild(Ae),this.container.append(J),this._createPopup(Ae,Z),this.container}}]),$}(E),ue=function(fe){k($,fe);var de=v($);function $(te){var Z;return K(this,$),Z=de.call(this,te),Z.containerClassName="polygonAnnotation",Z.svgElementName="svg:polygon",Z}return $}(ee),pe=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0})}return V($,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),$}(E),ge=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne,J;K(this,$);var he=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return J=de.call(this,te,{isRenderable:he,ignoreBorder:!0}),J.containerClassName="inkAnnotation",J.svgElementName="svg:polyline",J}return V($,[{key:"render",value:function(){this.container.className=this.containerClassName;var Z=this.data,oe=Z.rect[2]-Z.rect[0],ne=Z.rect[3]-Z.rect[1],J=this.svgFactory.create(oe,ne),he=p(Z.inkLists),ce;try{for(he.s();!(ce=he.n()).done;){var Se=ce.value,ke=[],Le=p(Se),De;try{for(Le.s();!(De=Le.n()).done;){var Ae=De.value,$e=Ae.x-Z.rect[0],xe=Z.rect[3]-Ae.y;ke.push("".concat($e,",").concat(xe))}}catch(Be){Le.e(Be)}finally{Le.f()}ke=ke.join(" ");var Oe=this.svgFactory.createElement(this.svgElementName);Oe.setAttribute("points",ke),Oe.setAttribute("stroke-width",Z.borderStyle.width||1),Oe.setAttribute("stroke","transparent"),Oe.setAttribute("fill","transparent"),this._createPopup(Oe,Z),J.appendChild(Oe)}}catch(Be){he.e(Be)}finally{he.f()}return this.container.append(J),this.container}}]),$}(E),ve=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0,createQuadrilaterals:!0})}return V($,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),$}(E),_e=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0,createQuadrilaterals:!0})}return V($,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),$}(E),Re=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0,createQuadrilaterals:!0})}return V($,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),$}(E),we=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0,createQuadrilaterals:!0})}return V($,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),$}(E),Ie=function(fe){k($,fe);var de=v($);function $(te){var Z,oe,ne;K(this,$);var J=!!(te.data.hasPopup||(Z=te.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:J,ignoreBorder:!0})}return V($,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),$}(E),Fe=function(fe){k($,fe);var de=v($);function $(te){var Z,oe;K(this,$),oe=de.call(this,te,{isRenderable:!0});var ne=oe.data.file,J=ne.filename,he=ne.content;return oe.filename=(0,o.getFilenameFromUrl)(J),oe.content=he,(Z=oe.linkService.eventBus)===null||Z===void 0||Z.dispatch("fileattachmentannotation",{source:d(oe),id:(0,a.stringToPDFString)(J),filename:J,content:he}),oe}return V($,[{key:"render",value:function(){var Z,oe;this.container.className="fileAttachmentAnnotation";var ne=document.createElement("div");return ne.style.height=this.container.style.height,ne.style.width=this.container.style.width,ne.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((Z=this.data.titleObj)!==null&&Z!==void 0&&Z.str||(oe=this.data.contentsObj)!==null&&oe!==void 0&&oe.str||this.data.richText)&&this._createPopup(ne,this.data),this.container.appendChild(ne),this.container}},{key:"_download",value:function(){var Z;(Z=this.downloadManager)===null||Z===void 0||Z.openOrDownloadData(this.container,this.content,this.filename)}}]),$}(E),We=function(){function fe(){K(this,fe)}return V(fe,null,[{key:"render",value:function($){var te=[],Z=[],oe=p($.annotations),ne;try{for(oe.s();!(ne=oe.n()).done;){var J=ne.value;if(!!J){if(J.annotationType===a.AnnotationType.POPUP){Z.push(J);continue}te.push(J)}}}catch(Oe){oe.e(Oe)}finally{oe.f()}Z.length&&te.push.apply(te,Z);for(var he=$.div,ce=0,Se=te;ce<Se.length;ce++){var ke=Se[ce],Le=m.create({data:ke,layer:he,page:$.page,viewport:$.viewport,linkService:$.linkService,downloadManager:$.downloadManager,imageResourcesPath:$.imageResourcesPath||"",renderForms:$.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:$.annotationStorage||new u.AnnotationStorage,enableScripting:$.enableScripting,hasJSActions:$.hasJSActions,fieldObjects:$.fieldObjects,mouseState:$.mouseState||{isDown:!1}});if(Le.isRenderable){var De=Le.render();if(ke.hidden&&(De.style.visibility="hidden"),Array.isArray(De)){var Ae=p(De),$e;try{for(Ae.s();!($e=Ae.n()).done;){var xe=$e.value;he.appendChild(xe)}}catch(Oe){Ae.e(Oe)}finally{Ae.f()}}else Le instanceof M?he.prepend(De):he.appendChild(De)}}S(this,fe,Ue).call(this,he,$.annotationCanvasMap)}},{key:"update",value:function($){var te=$.page,Z=$.viewport,oe=$.annotations,ne=$.annotationCanvasMap,J=$.div,he=Z.transform,ce="matrix(".concat(he.join(","),")"),Se,ke,Le=p(oe),De;try{for(Le.s();!(De=Le.n()).done;){var Ae=De.value,$e=J.querySelectorAll('[data-annotation-id="'.concat(Ae.id,'"]'));if($e){var xe=p($e),Oe;try{for(xe.s();!(Oe=xe.n()).done;){var Be=Oe.value;if(Ae.hasOwnCanvas){var Ne=a.Util.normalizeRect([Ae.rect[0],te.view[3]-Ae.rect[1]+te.view[1],Ae.rect[2],te.view[3]-Ae.rect[3]+te.view[1]]);if(!ke){Se=Math.abs(he[0]||he[1]);for(var Ve=he.slice(),qe=0;qe<4;qe++)Ve[qe]=Math.sign(Ve[qe]);ke="matrix(".concat(Ve.join(","),")")}var Ze=Ne[0]*Se,nt=Ne[1]*Se;Be.style.left="".concat(Ze,"px"),Be.style.top="".concat(nt,"px"),Be.style.transformOrigin="".concat(-Ze,"px ").concat(-nt,"px"),Be.style.transform=ke}else Be.style.transform=ce}}catch(ot){xe.e(ot)}finally{xe.f()}}}}catch(ot){Le.e(ot)}finally{Le.f()}S(this,fe,Ue).call(this,J,ne),J.hidden=!1}}]),fe}();n.AnnotationLayer=We;function Ue(fe,de){if(!!de){var $=p(de),te;try{for($.s();!(te=$.n()).done;){var Z=C(te.value,2),oe=Z[0],ne=Z[1],J=fe.querySelector('[data-annotation-id="'.concat(oe,'"]'));if(!!J){var he=J.firstChild;he.nodeName==="CANVAS"?J.replaceChild(ne,he):J.insertBefore(ne,he)}}}catch(ce){$.e(ce)}finally{$.f()}de.clear()}}},(i,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function e(T,R){return l(T)||u(T,R)||a(T,R)||t()}function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(T,R){if(!!T){if(typeof T=="string")return o(T,R);var P=Object.prototype.toString.call(T).slice(8,-1);if(P==="Object"&&T.constructor&&(P=T.constructor.name),P==="Map"||P==="Set")return Array.from(T);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return o(T,R)}}function o(T,R){(R==null||R>T.length)&&(R=T.length);for(var P=0,A=new Array(R);P<R;P++)A[P]=T[P];return A}function u(T,R){var P=T==null?null:typeof Symbol!="undefined"&&T[Symbol.iterator]||T["@@iterator"];if(P!=null){var A=[],D=!0,k=!1,z,v;try{for(P=P.call(T);!(D=(z=P.next()).done)&&(A.push(z.value),!(R&&A.length===R));D=!0);}catch(f){k=!0,v=f}finally{try{!D&&P.return!=null&&P.return()}finally{if(k)throw v}}return A}}function l(T){if(Array.isArray(T))return T}function h(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")}function S(T,R){for(var P=0;P<R.length;P++){var A=R[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(T,A.key,A)}}function w(T,R,P){return R&&S(T.prototype,R),P&&S(T,P),T}function x(T){return Math.floor(Math.max(0,Math.min(1,T))*255).toString(16).padStart(2,"0")}var N=function(){function T(){h(this,T)}return w(T,null,[{key:"CMYK_G",value:function(P){var A=e(P,4),D=A[0],k=A[1],z=A[2],v=A[3];return["G",1-Math.min(1,.3*D+.59*z+.11*k+v)]}},{key:"G_CMYK",value:function(P){var A=e(P,1),D=A[0];return["CMYK",0,0,0,1-D]}},{key:"G_RGB",value:function(P){var A=e(P,1),D=A[0];return["RGB",D,D,D]}},{key:"G_HTML",value:function(P){var A=e(P,1),D=A[0],k=x(D);return"#".concat(k).concat(k).concat(k)}},{key:"RGB_G",value:function(P){var A=e(P,3),D=A[0],k=A[1],z=A[2];return["G",.3*D+.59*k+.11*z]}},{key:"RGB_HTML",value:function(P){var A=e(P,3),D=A[0],k=A[1],z=A[2],v=x(D),f=x(k),d=x(z);return"#".concat(v).concat(f).concat(d)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(P){var A=e(P,4),D=A[0],k=A[1],z=A[2],v=A[3];return["RGB",1-Math.min(1,D+v),1-Math.min(1,z+v),1-Math.min(1,k+v)]}},{key:"CMYK_HTML",value:function(P){return this.RGB_HTML(this.CMYK_RGB(P))}},{key:"RGB_CMYK",value:function(P){var A=e(P,3),D=A[0],k=A[1],z=A[2],v=1-D,f=1-k,d=1-z,b=Math.min(v,f,d);return["CMYK",v,f,d,b]}}]),T}();n.ColorConverters=N},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var t=e(4),a=e(147);function o(A,D){return h(A)||l(A,D)||w(A,D)||u()}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(A,D){var k=A==null?null:typeof Symbol!="undefined"&&A[Symbol.iterator]||A["@@iterator"];if(k!=null){var z=[],v=!0,f=!1,d,b;try{for(k=k.call(A);!(v=(d=k.next()).done)&&(z.push(d.value),!(D&&z.length===D));v=!0);}catch(y){f=!0,b=y}finally{try{!v&&k.return!=null&&k.return()}finally{if(f)throw b}}return z}}function h(A){if(Array.isArray(A))return A}function S(A,D){var k=typeof Symbol!="undefined"&&A[Symbol.iterator]||A["@@iterator"];if(!k){if(Array.isArray(A)||(k=w(A))||D&&A&&typeof A.length=="number"){k&&(A=k);var z=0,v=function(){};return{s:v,n:function(){return z>=A.length?{done:!0}:{done:!1,value:A[z++]}},e:function(p){throw p},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,d=!1,b;return{s:function(){k=k.call(A)},n:function(){var p=k.next();return f=p.done,p},e:function(p){d=!0,b=p},f:function(){try{!f&&k.return!=null&&k.return()}finally{if(d)throw b}}}}function w(A,D){if(!!A){if(typeof A=="string")return x(A,D);var k=Object.prototype.toString.call(A).slice(8,-1);if(k==="Object"&&A.constructor&&(k=A.constructor.name),k==="Map"||k==="Set")return Array.from(A);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return x(A,D)}}function x(A,D){(D==null||D>A.length)&&(D=A.length);for(var k=0,z=new Array(D);k<D;k++)z[k]=A[k];return z}function N(A,D){if(!(A instanceof D))throw new TypeError("Cannot call a class as a function")}function T(A,D){for(var k=0;k<D.length;k++){var z=D[k];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(A,z.key,z)}}function R(A,D,k){return D&&T(A.prototype,D),k&&T(A,k),A}var P=function(){function A(){N(this,A)}return R(A,null,[{key:"setupStorage",value:function(k,z,v,f,d){var b=f.getValue(z,{value:null});switch(v.name){case"textarea":if(b.value!==null&&(k.textContent=b.value),d==="print")break;k.addEventListener("input",function(I){f.setValue(z,{value:I.target.value})});break;case"input":if(v.attributes.type==="radio"||v.attributes.type==="checkbox"){if(b.value===v.attributes.xfaOn?k.setAttribute("checked",!0):b.value===v.attributes.xfaOff&&k.removeAttribute("checked"),d==="print")break;k.addEventListener("change",function(I){f.setValue(z,{value:I.target.checked?I.target.getAttribute("xfaOn"):I.target.getAttribute("xfaOff")})})}else{if(b.value!==null&&k.setAttribute("value",b.value),d==="print")break;k.addEventListener("input",function(I){f.setValue(z,{value:I.target.value})})}break;case"select":if(b.value!==null){var y=S(v.children),p;try{for(y.s();!(p=y.n()).done;){var C=p.value;C.attributes.value===b.value&&(C.attributes.selected=!0)}}catch(I){y.e(I)}finally{y.f()}}k.addEventListener("input",function(I){var j=I.target.options,W=j.selectedIndex===-1?"":j[j.selectedIndex].value;f.setValue(z,{value:W})});break}}},{key:"setAttributes",value:function(k){var z=k.html,v=k.element,f=k.storage,d=f===void 0?null:f,b=k.intent,y=k.linkService,p=v.attributes,C=z instanceof HTMLAnchorElement;p.type==="radio"&&(p.name="".concat(p.name,"-").concat(b));for(var I=0,j=Object.entries(p);I<j.length;I++){var W=o(j[I],2),H=W[0],Q=W[1];if(!(Q==null||H==="dataId"))if(H!=="style")if(H==="textContent")z.textContent=Q;else if(H==="class")Q.length&&z.setAttribute(H,Q.join(" "));else{if(C&&(H==="href"||H==="newWindow"))continue;z.setAttribute(H,Q)}else Object.assign(z.style,Q)}if(C){var K;y.addLinkAttributes||(0,t.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(K=y.addLinkAttributes)===null||K===void 0||K.call(y,z,p.href,p.newWindow)}d&&p.dataId&&this.setupStorage(z,p.dataId,v,d)}},{key:"render",value:function(k){var z=k.annotationStorage,v=k.linkService,f=k.xfaHtml,d=k.intent||"display",b=document.createElement(f.name);f.attributes&&this.setAttributes({html:b,element:f,intent:d,linkService:v});var y=[[f,-1,b]],p=k.div;if(p.appendChild(b),k.viewport){var C="matrix(".concat(k.viewport.transform.join(","),")");p.style.transform=C}d!=="richText"&&p.setAttribute("class","xfaLayer xfaFont");for(var I=[];y.length>0;){var j,W=o(y[y.length-1],3),H=W[0],Q=W[1],K=W[2];if(Q+1===H.children.length){y.pop();continue}var ie=H.children[++y[y.length-1][1]];if(ie!==null){var V=ie.name;if(V==="#text"){var Y=document.createTextNode(ie.value);I.push(Y),K.appendChild(Y);continue}var F=void 0;if(ie!=null&&(j=ie.attributes)!==null&&j!==void 0&&j.xmlns?F=document.createElementNS(ie.attributes.xmlns,V):F=document.createElement(V),K.appendChild(F),ie.attributes&&this.setAttributes({html:F,element:ie,storage:z,intent:d,linkService:v}),ie.children&&ie.children.length>0)y.push([ie,-1,F]);else if(ie.value){var m=document.createTextNode(ie.value);a.XfaText.shouldBuildText(V)&&I.push(m),F.appendChild(m)}}}var E=S(p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")),L;try{for(E.s();!(L=E.n()).done;){var X=L.value;X.setAttribute("readOnly",!0)}}catch(re){E.e(re)}finally{E.f()}return{textDivs:I}}},{key:"update",value:function(k){var z="matrix(".concat(k.viewport.transform.join(","),")");k.div.style.transform=z,k.div.hidden=!1}}]),A}();n.XfaLayer=P},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.renderTextLayer=b;var t=e(4);function a(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")}function o(y,p){for(var C=0;C<p.length;C++){var I=p[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(y,I.key,I)}}function u(y,p,C){return p&&o(y.prototype,p),C&&o(y,C),y}function l(y,p){var C=typeof Symbol!="undefined"&&y[Symbol.iterator]||y["@@iterator"];if(!C){if(Array.isArray(y)||(C=h(y))||p&&y&&typeof y.length=="number"){C&&(y=C);var I=0,j=function(){};return{s:j,n:function(){return I>=y.length?{done:!0}:{done:!1,value:y[I++]}},e:function(ie){throw ie},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W=!0,H=!1,Q;return{s:function(){C=C.call(y)},n:function(){var ie=C.next();return W=ie.done,ie},e:function(ie){H=!0,Q=ie},f:function(){try{!W&&C.return!=null&&C.return()}finally{if(H)throw Q}}}}function h(y,p){if(!!y){if(typeof y=="string")return S(y,p);var C=Object.prototype.toString.call(y).slice(8,-1);if(C==="Object"&&y.constructor&&(C=y.constructor.name),C==="Map"||C==="Set")return Array.from(y);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return S(y,p)}}function S(y,p){(p==null||p>y.length)&&(p=y.length);for(var C=0,I=new Array(p);C<p;C++)I[C]=y[C];return I}var w=1e5,x=30,N=.8,T=new Map,R=/^\s+$/g;function P(y,p){var C=T.get(y);if(C)return C;p.save(),p.font="".concat(x,"px ").concat(y);var I=p.measureText(""),j=I.fontBoundingBoxAscent,W=Math.abs(I.fontBoundingBoxDescent);if(j){p.restore();var H=j/(j+W);return T.set(y,H),H}p.strokeStyle="red",p.clearRect(0,0,x,x),p.strokeText("g",0,0);var Q=p.getImageData(0,0,x,x).data;W=0;for(var K=Q.length-1-3;K>=0;K-=4)if(Q[K]>0){W=Math.ceil(K/4/x);break}p.clearRect(0,0,x,x),p.strokeText("A",0,x),Q=p.getImageData(0,0,x,x).data,j=0;for(var ie=0,V=Q.length;ie<V;ie+=4)if(Q[ie]>0){j=x-Math.floor(ie/4/x);break}if(p.restore(),j){var Y=j/(j+W);return T.set(y,Y),Y}return T.set(y,N),N}function A(y,p,C,I){var j=document.createElement("span"),W=y._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL};y._textDivs.push(j);var H=t.Util.transform(y._viewport.transform,p.transform),Q=Math.atan2(H[1],H[0]),K=C[p.fontName];K.vertical&&(Q+=Math.PI/2);var ie=Math.hypot(H[2],H[3]),V=ie*P(K.fontFamily,I),Y,F;Q===0?(Y=H[4],F=H[5]-V):(Y=H[4]+V*Math.sin(Q),F=H[5]-V*Math.cos(Q)),j.style.left="".concat(Y,"px"),j.style.top="".concat(F,"px"),j.style.fontSize="".concat(ie,"px"),j.style.fontFamily=K.fontFamily,j.setAttribute("role","presentation"),j.textContent=p.str,j.dir=p.dir,y._fontInspectorEnabled&&(j.dataset.fontName=p.fontName),Q!==0&&(W.angle=Q*(180/Math.PI));var m=!1;if(p.str.length>1||y._enhanceTextSelection&&R.test(p.str))m=!0;else if(p.str!==" "&&p.transform[0]!==p.transform[3]){var E=Math.abs(p.transform[0]),L=Math.abs(p.transform[3]);E!==L&&Math.max(E,L)/Math.min(E,L)>1.5&&(m=!0)}if(m&&(K.vertical?W.canvasWidth=p.height*y._viewport.scale:W.canvasWidth=p.width*y._viewport.scale),y._textDivProperties.set(j,W),y._textContentStream&&y._layoutText(j),y._enhanceTextSelection&&W.hasText){var X=1,re=0;Q!==0&&(X=Math.cos(Q),re=Math.sin(Q));var q=(K.vertical?p.height:p.width)*y._viewport.scale,be=ie,Ce,Ee;Q!==0?(Ce=[X,re,-re,X,Y,F],Ee=t.Util.getAxialAlignedBoundingBox([0,0,q,be],Ce)):Ee=[Y,F,Y+q,F+be],y._bounds.push({left:Ee[0],top:Ee[1],right:Ee[2],bottom:Ee[3],div:j,size:[q,be],m:Ce})}}function D(y){if(!y._canceled){var p=y._textDivs,C=y._capability,I=p.length;if(I>w){y._renderingDone=!0,C.resolve();return}if(!y._textContentStream)for(var j=0;j<I;j++)y._layoutText(p[j]);y._renderingDone=!0,C.resolve()}}function k(y,p,C){for(var I=0,j=0;j<C;j++){var W=y[p++];W>0&&(I=I?Math.min(W,I):W)}return I}function z(y){for(var p=y._bounds,C=y._viewport,I=v(C.width,C.height,p),j=0;j<I.length;j++){var W=p[j].div,H=y._textDivProperties.get(W);if(H.angle===0){H.paddingLeft=p[j].left-I[j].left,H.paddingTop=p[j].top-I[j].top,H.paddingRight=I[j].right-p[j].right,H.paddingBottom=I[j].bottom-p[j].bottom,y._textDivProperties.set(W,H);continue}for(var Q=I[j],K=p[j],ie=K.m,V=ie[0],Y=ie[1],F=[[0,0],[0,K.size[1]],[K.size[0],0],K.size],m=new Float64Array(64),E=0,L=F.length;E<L;E++){var X=t.Util.applyTransform(F[E],ie);m[E+0]=V&&(Q.left-X[0])/V,m[E+4]=Y&&(Q.top-X[1])/Y,m[E+8]=V&&(Q.right-X[0])/V,m[E+12]=Y&&(Q.bottom-X[1])/Y,m[E+16]=Y&&(Q.left-X[0])/-Y,m[E+20]=V&&(Q.top-X[1])/V,m[E+24]=Y&&(Q.right-X[0])/-Y,m[E+28]=V&&(Q.bottom-X[1])/V,m[E+32]=V&&(Q.left-X[0])/-V,m[E+36]=Y&&(Q.top-X[1])/-Y,m[E+40]=V&&(Q.right-X[0])/-V,m[E+44]=Y&&(Q.bottom-X[1])/-Y,m[E+48]=Y&&(Q.left-X[0])/Y,m[E+52]=V&&(Q.top-X[1])/-V,m[E+56]=Y&&(Q.right-X[0])/Y,m[E+60]=V&&(Q.bottom-X[1])/-V}var re=1+Math.min(Math.abs(V),Math.abs(Y));H.paddingLeft=k(m,32,16)/re,H.paddingTop=k(m,48,16)/re,H.paddingRight=k(m,0,16)/re,H.paddingBottom=k(m,16,16)/re,y._textDivProperties.set(W,H)}}function v(y,p,C){var I=C.map(function(m,E){return{x1:m.left,y1:m.top,x2:m.right,y2:m.bottom,index:E,x1New:void 0,x2New:void 0}});f(y,I);var j=new Array(C.length),W=l(I),H;try{for(W.s();!(H=W.n()).done;){var Q=H.value,K=Q.index;j[K]={left:Q.x1New,top:0,right:Q.x2New,bottom:0}}}catch(m){W.e(m)}finally{W.f()}C.map(function(m,E){var L=j[E],X=I[E];X.x1=m.top,X.y1=y-L.right,X.x2=m.bottom,X.y2=y-L.left,X.index=E,X.x1New=void 0,X.x2New=void 0}),f(p,I);var ie=l(I),V;try{for(ie.s();!(V=ie.n()).done;){var Y=V.value,F=Y.index;j[F].top=Y.x1New,j[F].bottom=Y.x2New}}catch(m){ie.e(m)}finally{ie.f()}return j}function f(y,p){p.sort(function(M,g){return M.x1-g.x1||M.index-g.index});var C={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},I=[{start:-1/0,end:1/0,boundary:C}],j=l(p),W;try{for(j.s();!(W=j.n()).done;){for(var H=W.value,Q=0;Q<I.length&&I[Q].end<=H.y1;)Q++;for(var K=I.length-1;K>=0&&I[K].start>=H.y2;)K--;var ie=void 0,V=void 0,Y=void 0,F=void 0,m=-1/0;for(Y=Q;Y<=K;Y++){ie=I[Y],V=ie.boundary;var E=void 0;V.x2>H.x1?E=V.index>H.index?V.x1New:H.x1:V.x2New===void 0?E=(V.x2+H.x1)/2:E=V.x2New,E>m&&(m=E)}for(H.x1New=m,Y=Q;Y<=K;Y++)ie=I[Y],V=ie.boundary,V.x2New===void 0?V.x2>H.x1?V.index>H.index&&(V.x2New=V.x2):V.x2New=m:V.x2New>m&&(V.x2New=Math.max(m,V.x2));var L=[],X=null;for(Y=Q;Y<=K;Y++){ie=I[Y],V=ie.boundary;var re=V.x2>H.x2?V:H;X===re?L[L.length-1].end=ie.end:(L.push({start:ie.start,end:ie.end,boundary:re}),X=re)}for(I[Q].start<H.y1&&(L[0].start=H.y1,L.unshift({start:I[Q].start,end:H.y1,boundary:I[Q].boundary})),H.y2<I[K].end&&(L[L.length-1].end=H.y2,L.push({start:H.y2,end:I[K].end,boundary:I[K].boundary})),Y=Q;Y<=K;Y++)if(ie=I[Y],V=ie.boundary,V.x2New===void 0){var q=!1;for(F=Q-1;!q&&F>=0&&I[F].start>=V.y1;F--)q=I[F].boundary===V;for(F=K+1;!q&&F<I.length&&I[F].end<=V.y2;F++)q=I[F].boundary===V;for(F=0;!q&&F<L.length;F++)q=L[F].boundary===V;q||(V.x2New=m)}Array.prototype.splice.apply(I,[Q,K-Q+1].concat(L))}}catch(M){j.e(M)}finally{j.f()}for(var be=0,Ce=I;be<Ce.length;be++){var Ee=Ce[be],G=Ee.boundary;G.x2New===void 0&&(G.x2New=Math.max(y,G.x2))}}var d=function(){function y(p){var C,I=this,j=p.textContent,W=p.textContentStream,H=p.container,Q=p.viewport,K=p.textDivs,ie=p.textContentItemsStr,V=p.enhanceTextSelection;a(this,y),this._textContent=j,this._textContentStream=W,this._container=H,this._document=H.ownerDocument,this._viewport=Q,this._textDivs=K||[],this._textContentItemsStr=ie||[],this._enhanceTextSelection=!!V,this._fontInspectorEnabled=!!((C=globalThis.FontInspector)!==null&&C!==void 0&&C.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(function(){I._enhanceTextSelection||(I._textDivProperties=null),I._layoutTextCtx&&(I._layoutTextCtx.canvas.width=0,I._layoutTextCtx.canvas.height=0,I._layoutTextCtx=null)}).catch(function(){})}return u(y,[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(C,I){for(var j=0,W=C.length;j<W;j++){if(C[j].str===void 0){if(C[j].type==="beginMarkedContentProps"||C[j].type==="beginMarkedContent"){var H=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),C[j].id!==null&&this._container.setAttribute("id","".concat(C[j].id)),H.appendChild(this._container)}else C[j].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(C[j].str),A(this,C[j],I,this._layoutTextCtx)}}},{key:"_layoutText",value:function(C){var I=this._textDivProperties.get(C),j="";if(I.canvasWidth!==0&&I.hasText){var W=C.style,H=W.fontSize,Q=W.fontFamily;(H!==this._layoutTextLastFontSize||Q!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font="".concat(H," ").concat(Q),this._layoutTextLastFontSize=H,this._layoutTextLastFontFamily=Q);var K=this._layoutTextCtx.measureText(C.textContent),ie=K.width;if(ie>0){var V=I.canvasWidth/ie;this._enhanceTextSelection&&(I.scale=V),j="scaleX(".concat(V,")")}}if(I.angle!==0&&(j="rotate(".concat(I.angle,"deg) ").concat(j)),j.length>0&&(this._enhanceTextSelection&&(I.originalTransform=j),C.style.transform=j),I.hasText&&this._container.appendChild(C),I.hasEOL){var Y=document.createElement("br");Y.setAttribute("role","presentation"),this._container.appendChild(Y)}}},{key:"_render",value:function(){var C=this,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=(0,t.createPromiseCapability)(),W=Object.create(null),H=this._document.createElement("canvas");if(H.height=H.width=x,H.mozOpaque=!0,this._layoutTextCtx=H.getContext("2d",{alpha:!1}),this._textContent){var Q=this._textContent.items,K=this._textContent.styles;this._processItems(Q,K),j.resolve()}else if(this._textContentStream){var ie=function V(){C._reader.read().then(function(Y){var F=Y.value,m=Y.done;if(m){j.resolve();return}Object.assign(W,F.styles),C._processItems(F.items,W),V()},j.reject)};this._reader=this._textContentStream.getReader(),ie()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');j.promise.then(function(){W=null,I?C._renderTimer=setTimeout(function(){D(C),C._renderTimer=null},I):D(C)},this._capability.reject)}},{key:"expandTextDivs",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!this._enhanceTextSelection||!this._renderingDone)){this._bounds!==null&&(z(this),this._bounds=null);for(var I=[],j=[],W=0,H=this._textDivs.length;W<H;W++){var Q=this._textDivs[W],K=this._textDivProperties.get(Q);!K.hasText||(C?(I.length=0,j.length=0,K.originalTransform&&I.push(K.originalTransform),K.paddingTop>0?(j.push("".concat(K.paddingTop,"px")),I.push("translateY(".concat(-K.paddingTop,"px)"))):j.push(0),K.paddingRight>0?j.push("".concat(K.paddingRight/K.scale,"px")):j.push(0),K.paddingBottom>0?j.push("".concat(K.paddingBottom,"px")):j.push(0),K.paddingLeft>0?(j.push("".concat(K.paddingLeft/K.scale,"px")),I.push("translateX(".concat(-K.paddingLeft/K.scale,"px)"))):j.push(0),Q.style.padding=j.join(" "),I.length&&(Q.style.transform=I.join(" "))):(Q.style.padding=null,Q.style.transform=K.originalTransform))}}}}]),y}();function b(y){var p=new d({textContent:y.textContent,textContentStream:y.textContentStream,container:y.container,viewport:y.viewport,textDivs:y.textDivs,textContentItemsStr:y.textContentItemsStr,enhanceTextSelection:y.enhanceTextSelection});return p._render(y.timeout),p}},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var t=e(4),a=e(1),o=e(6);function u(V){return S(V)||h(V)||P(V)||l()}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(V){if(typeof Symbol!="undefined"&&V[Symbol.iterator]!=null||V["@@iterator"]!=null)return Array.from(V)}function S(V){if(Array.isArray(V))return A(V)}function w(V,Y){return T(V)||N(V,Y)||P(V,Y)||x()}function x(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(V,Y){var F=V==null?null:typeof Symbol!="undefined"&&V[Symbol.iterator]||V["@@iterator"];if(F!=null){var m=[],E=!0,L=!1,X,re;try{for(F=F.call(V);!(E=(X=F.next()).done)&&(m.push(X.value),!(Y&&m.length===Y));E=!0);}catch(q){L=!0,re=q}finally{try{!E&&F.return!=null&&F.return()}finally{if(L)throw re}}return m}}function T(V){if(Array.isArray(V))return V}function R(V,Y){var F=typeof Symbol!="undefined"&&V[Symbol.iterator]||V["@@iterator"];if(!F){if(Array.isArray(V)||(F=P(V))||Y&&V&&typeof V.length=="number"){F&&(V=F);var m=0,E=function(){};return{s:E,n:function(){return m>=V.length?{done:!0}:{done:!1,value:V[m++]}},e:function(be){throw be},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L=!0,X=!1,re;return{s:function(){F=F.call(V)},n:function(){var be=F.next();return L=be.done,be},e:function(be){X=!0,re=be},f:function(){try{!L&&F.return!=null&&F.return()}finally{if(X)throw re}}}}function P(V,Y){if(!!V){if(typeof V=="string")return A(V,Y);var F=Object.prototype.toString.call(V).slice(8,-1);if(F==="Object"&&V.constructor&&(F=V.constructor.name),F==="Map"||F==="Set")return Array.from(V);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return A(V,Y)}}function A(V,Y){(Y==null||Y>V.length)&&(Y=V.length);for(var F=0,m=new Array(Y);F<Y;F++)m[F]=V[F];return m}function D(V,Y){for(var F=0;F<Y.length;F++){var m=Y[F];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(V,m.key,m)}}function k(V,Y,F){return Y&&D(V.prototype,Y),F&&D(V,F),V}function z(V,Y){if(!(V instanceof Y))throw new TypeError("Cannot call a class as a function")}var v=function V(){z(this,V),(0,t.unreachable)("Not implemented: SVGGraphics")};n.SVGGraphics=v;{var f=function(Y){var F=[],m=[],E=R(Y),L;try{for(E.s();!(L=E.n()).done;){var X=L.value;if(X.fn==="save"){F.push({fnId:92,fn:"group",items:[]}),m.push(F),F=F[F.length-1].items;continue}X.fn==="restore"?F=m.pop():F.push(X)}}catch(re){E.e(re)}finally{E.f()}return F},d=function(Y){if(Number.isInteger(Y))return Y.toString();var F=Y.toFixed(10),m=F.length-1;if(F[m]!=="0")return F;do m--;while(F[m]==="0");return F.substring(0,F[m]==="."?m:m+1)},b=function(Y){if(Y[4]===0&&Y[5]===0){if(Y[1]===0&&Y[2]===0)return Y[0]===1&&Y[3]===1?"":"scale(".concat(d(Y[0])," ").concat(d(Y[3]),")");if(Y[0]===Y[3]&&Y[1]===-Y[2]){var F=Math.acos(Y[0])*180/Math.PI;return"rotate(".concat(d(F),")")}}else if(Y[0]===1&&Y[1]===0&&Y[2]===0&&Y[3]===1)return"translate(".concat(d(Y[4])," ").concat(d(Y[5]),")");return"matrix(".concat(d(Y[0])," ").concat(d(Y[1])," ").concat(d(Y[2])," ").concat(d(Y[3])," ").concat(d(Y[4])," ")+"".concat(d(Y[5]),")")},y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/1999/xlink",I=["butt","round","square"],j=["miter","round","bevel"],W=function(){for(var V=new Uint8Array([137,80,78,71,13,10,26,10]),Y=12,F=new Int32Array(256),m=0;m<256;m++){for(var E=m,L=0;L<8;L++)E&1?E=3988292384^E>>1&2147483647:E=E>>1&2147483647;F[m]=E}function X(G,M,g){for(var c=-1,_=M;_<g;_++){var B=(c^G[_])&255,U=F[B];c=c>>>8^U}return c^-1}function re(G,M,g,c){var _=c,B=M.length;g[_]=B>>24&255,g[_+1]=B>>16&255,g[_+2]=B>>8&255,g[_+3]=B&255,_+=4,g[_]=G.charCodeAt(0)&255,g[_+1]=G.charCodeAt(1)&255,g[_+2]=G.charCodeAt(2)&255,g[_+3]=G.charCodeAt(3)&255,_+=4,g.set(M,_),_+=M.length;var U=X(g,c+4,_);g[_]=U>>24&255,g[_+1]=U>>16&255,g[_+2]=U>>8&255,g[_+3]=U&255}function q(G,M,g){for(var c=1,_=0,B=M;B<g;++B)c=(c+(G[B]&255))%65521,_=(_+c)%65521;return _<<16|c}function be(G){if(!o.isNodeJS)return Ce(G);try{var M;parseInt(process.versions.node)>=8?M=G:M=Buffer.from(G);var g=require("zlib").deflateSync(M,{level:9});return g instanceof Uint8Array?g:new Uint8Array(g)}catch(c){(0,t.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+c)}return Ce(G)}function Ce(G){var M=G.length,g=65535,c=Math.ceil(M/g),_=new Uint8Array(2+M+c*5+4),B=0;_[B++]=120,_[B++]=156;for(var U=0;M>g;)_[B++]=0,_[B++]=255,_[B++]=255,_[B++]=0,_[B++]=0,_.set(G.subarray(U,U+g),B),B+=g,U+=g,M-=g;_[B++]=1,_[B++]=M&255,_[B++]=M>>8&255,_[B++]=~M&65535&255,_[B++]=(~M&65535)>>8&255,_.set(G.subarray(U),B),B+=G.length-U;var ee=q(G,0,G.length);return _[B++]=ee>>24&255,_[B++]=ee>>16&255,_[B++]=ee>>8&255,_[B++]=ee&255,_}function Ee(G,M,g,c){var _=G.width,B=G.height,U,ee,ue,pe=G.data;switch(M){case t.ImageKind.GRAYSCALE_1BPP:ee=0,U=1,ue=_+7>>3;break;case t.ImageKind.RGB_24BPP:ee=2,U=8,ue=_*3;break;case t.ImageKind.RGBA_32BPP:ee=6,U=8,ue=_*4;break;default:throw new Error("invalid format")}for(var ge=new Uint8Array((1+ue)*B),ve=0,_e=0,Re=0;Re<B;++Re)ge[ve++]=0,ge.set(pe.subarray(_e,_e+ue),ve),_e+=ue,ve+=ue;if(M===t.ImageKind.GRAYSCALE_1BPP&&c){ve=0;for(var we=0;we<B;we++){ve++;for(var Ie=0;Ie<ue;Ie++)ge[ve++]^=255}}var Fe=new Uint8Array([_>>24&255,_>>16&255,_>>8&255,_&255,B>>24&255,B>>16&255,B>>8&255,B&255,U,ee,0,0,0]),We=be(ge),Ue=V.length+Y*3+Fe.length+We.length,fe=new Uint8Array(Ue),de=0;return fe.set(V,de),de+=V.length,re("IHDR",Fe,fe,de),de+=Y+Fe.length,re("IDATA",We,fe,de),de+=Y+We.length,re("IEND",new Uint8Array(0),fe,de),(0,t.createObjectURL)(fe,"image/png",g)}return function(M,g,c){var _=M.kind===void 0?t.ImageKind.GRAYSCALE_1BPP:M.kind;return Ee(M,_,g,c)}}(),H=function(){function V(){z(this,V),this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=t.IDENTITY_MATRIX,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=t.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return k(V,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(F,m){this.x=F,this.y=m}}]),V}(),Q=0,K=0,ie=0;n.SVGGraphics=v=function(){function V(Y,F){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z(this,V),this.svgFactory=new a.DOMSVGFactory,this.current=new H,this.transformMatrix=t.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Y,this.objs=F,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!m,this._operatorIdMapping=[];for(var E in t.OPS)this._operatorIdMapping[t.OPS[E]]=E}return k(V,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var F=this.current;this.extraStack.push(F),this.current=F.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(F){this.save(),this.executeOpTree(F),this.restore()}},{key:"loadDependencies",value:function(F){for(var m=this,E=F.fnArray,L=F.argsArray,X=0,re=E.length;X<re;X++)if(E[X]===t.OPS.dependency){var q=R(L[X]),be;try{var Ce=function(){var G=be.value,M=G.startsWith("g_")?m.commonObjs:m.objs,g=new Promise(function(c){M.get(G,c)});m.current.dependencies.push(g)};for(q.s();!(be=q.n()).done;)Ce()}catch(Ee){q.e(Ee)}finally{q.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(F,m,E,L,X,re){var q=[F,m,E,L,X,re];this.transformMatrix=t.Util.transform(this.transformMatrix,q),this.tgrp=null}},{key:"getSVG",value:function(F,m){var E=this;this.viewport=m;var L=this._initialize(m);return this.loadDependencies(F).then(function(){return E.transformMatrix=t.IDENTITY_MATRIX,E.executeOpTree(E.convertOpList(F)),L})}},{key:"convertOpList",value:function(F){for(var m=this._operatorIdMapping,E=F.argsArray,L=F.fnArray,X=[],re=0,q=L.length;re<q;re++){var be=L[re];X.push({fnId:be,fn:m[be],args:E[re]})}return f(X)}},{key:"executeOpTree",value:function(F){var m=R(F),E;try{for(m.s();!(E=m.n()).done;){var L=E.value,X=L.fn,re=L.fnId,q=L.args;switch(re|0){case t.OPS.beginText:this.beginText();break;case t.OPS.dependency:break;case t.OPS.setLeading:this.setLeading(q);break;case t.OPS.setLeadingMoveText:this.setLeadingMoveText(q[0],q[1]);break;case t.OPS.setFont:this.setFont(q);break;case t.OPS.showText:this.showText(q[0]);break;case t.OPS.showSpacedText:this.showText(q[0]);break;case t.OPS.endText:this.endText();break;case t.OPS.moveText:this.moveText(q[0],q[1]);break;case t.OPS.setCharSpacing:this.setCharSpacing(q[0]);break;case t.OPS.setWordSpacing:this.setWordSpacing(q[0]);break;case t.OPS.setHScale:this.setHScale(q[0]);break;case t.OPS.setTextMatrix:this.setTextMatrix(q[0],q[1],q[2],q[3],q[4],q[5]);break;case t.OPS.setTextRise:this.setTextRise(q[0]);break;case t.OPS.setTextRenderingMode:this.setTextRenderingMode(q[0]);break;case t.OPS.setLineWidth:this.setLineWidth(q[0]);break;case t.OPS.setLineJoin:this.setLineJoin(q[0]);break;case t.OPS.setLineCap:this.setLineCap(q[0]);break;case t.OPS.setMiterLimit:this.setMiterLimit(q[0]);break;case t.OPS.setFillRGBColor:this.setFillRGBColor(q[0],q[1],q[2]);break;case t.OPS.setStrokeRGBColor:this.setStrokeRGBColor(q[0],q[1],q[2]);break;case t.OPS.setStrokeColorN:this.setStrokeColorN(q);break;case t.OPS.setFillColorN:this.setFillColorN(q);break;case t.OPS.shadingFill:this.shadingFill(q[0]);break;case t.OPS.setDash:this.setDash(q[0],q[1]);break;case t.OPS.setRenderingIntent:this.setRenderingIntent(q[0]);break;case t.OPS.setFlatness:this.setFlatness(q[0]);break;case t.OPS.setGState:this.setGState(q[0]);break;case t.OPS.fill:this.fill();break;case t.OPS.eoFill:this.eoFill();break;case t.OPS.stroke:this.stroke();break;case t.OPS.fillStroke:this.fillStroke();break;case t.OPS.eoFillStroke:this.eoFillStroke();break;case t.OPS.clip:this.clip("nonzero");break;case t.OPS.eoClip:this.clip("evenodd");break;case t.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case t.OPS.paintImageXObject:this.paintImageXObject(q[0]);break;case t.OPS.paintInlineImageXObject:this.paintInlineImageXObject(q[0]);break;case t.OPS.paintImageMaskXObject:this.paintImageMaskXObject(q[0]);break;case t.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(q[0],q[1]);break;case t.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case t.OPS.closePath:this.closePath();break;case t.OPS.closeStroke:this.closeStroke();break;case t.OPS.closeFillStroke:this.closeFillStroke();break;case t.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case t.OPS.nextLine:this.nextLine();break;case t.OPS.transform:this.transform(q[0],q[1],q[2],q[3],q[4],q[5]);break;case t.OPS.constructPath:this.constructPath(q[0],q[1]);break;case t.OPS.endPath:this.endPath();break;case 92:this.group(L.items);break;default:(0,t.warn)("Unimplemented operator ".concat(X));break}}}catch(be){m.e(be)}finally{m.f()}}},{key:"setWordSpacing",value:function(F){this.current.wordSpacing=F}},{key:"setCharSpacing",value:function(F){this.current.charSpacing=F}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(F,m,E,L,X,re){var q=this.current;q.textMatrix=q.lineMatrix=[F,m,E,L,X,re],q.textMatrixScale=Math.hypot(F,m),q.x=q.lineX=0,q.y=q.lineY=0,q.xcoords=[],q.ycoords=[],q.tspan=this.svgFactory.createElement("svg:tspan"),q.tspan.setAttributeNS(null,"font-family",q.fontFamily),q.tspan.setAttributeNS(null,"font-size","".concat(d(q.fontSize),"px")),q.tspan.setAttributeNS(null,"y",d(-q.y)),q.txtElement=this.svgFactory.createElement("svg:text"),q.txtElement.appendChild(q.tspan)}},{key:"beginText",value:function(){var F=this.current;F.x=F.lineX=0,F.y=F.lineY=0,F.textMatrix=t.IDENTITY_MATRIX,F.lineMatrix=t.IDENTITY_MATRIX,F.textMatrixScale=1,F.tspan=this.svgFactory.createElement("svg:tspan"),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtgrp=this.svgFactory.createElement("svg:g"),F.xcoords=[],F.ycoords=[]}},{key:"moveText",value:function(F,m){var E=this.current;E.x=E.lineX+=F,E.y=E.lineY+=m,E.xcoords=[],E.ycoords=[],E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size","".concat(d(E.fontSize),"px")),E.tspan.setAttributeNS(null,"y",d(-E.y))}},{key:"showText",value:function(F){var m=this.current,E=m.font,L=m.fontSize;if(L!==0){var X=m.fontSizeScale,re=m.charSpacing,q=m.wordSpacing,be=m.fontDirection,Ce=m.textHScale*be,Ee=E.vertical,G=Ee?1:-1,M=E.defaultVMetrics,g=L*m.fontMatrix[0],c=0,_=R(F),B;try{for(_.s();!(B=_.n()).done;){var U=B.value;if(U===null){c+=be*q;continue}else if((0,t.isNum)(U)){c+=G*U*L/1e3;continue}var ee=(U.isSpace?q:0)+re,ue=U.fontChar,pe=void 0,ge=void 0,ve=U.width;if(Ee){var _e=void 0,Re=U.vmetric||M;_e=U.vmetric?Re[1]:ve*.5,_e=-_e*g;var we=Re[2]*g;ve=Re?-Re[0]:ve,pe=_e/X,ge=(c+we)/X}else pe=c/X,ge=0;(U.isInFont||E.missingFile)&&(m.xcoords.push(m.x+pe),Ee&&m.ycoords.push(-m.y+ge),m.tspan.textContent+=ue);var Ie=void 0;Ee?Ie=ve*g-ee*be:Ie=ve*g+ee*be,c+=Ie}}catch(fe){_.e(fe)}finally{_.f()}m.tspan.setAttributeNS(null,"x",m.xcoords.map(d).join(" ")),Ee?m.tspan.setAttributeNS(null,"y",m.ycoords.map(d).join(" ")):m.tspan.setAttributeNS(null,"y",d(-m.y)),Ee?m.y-=c:m.x+=c*Ce,m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size","".concat(d(m.fontSize),"px")),m.fontStyle!==y.fontStyle&&m.tspan.setAttributeNS(null,"font-style",m.fontStyle),m.fontWeight!==y.fontWeight&&m.tspan.setAttributeNS(null,"font-weight",m.fontWeight);var Fe=m.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;if(Fe===t.TextRenderingMode.FILL||Fe===t.TextRenderingMode.FILL_STROKE?(m.fillColor!==y.fillColor&&m.tspan.setAttributeNS(null,"fill",m.fillColor),m.fillAlpha<1&&m.tspan.setAttributeNS(null,"fill-opacity",m.fillAlpha)):m.textRenderingMode===t.TextRenderingMode.ADD_TO_PATH?m.tspan.setAttributeNS(null,"fill","transparent"):m.tspan.setAttributeNS(null,"fill","none"),Fe===t.TextRenderingMode.STROKE||Fe===t.TextRenderingMode.FILL_STROKE){var We=1/(m.textMatrixScale||1);this._setStrokeAttributes(m.tspan,We)}var Ue=m.textMatrix;m.textRise!==0&&(Ue=Ue.slice(),Ue[5]+=m.textRise),m.txtElement.setAttributeNS(null,"transform","".concat(b(Ue)," scale(").concat(d(Ce),", -1)")),m.txtElement.setAttributeNS(p,"xml:space","preserve"),m.txtElement.appendChild(m.tspan),m.txtgrp.appendChild(m.txtElement),this._ensureTransformGroup().appendChild(m.txtElement)}}},{key:"setLeadingMoveText",value:function(F,m){this.setLeading(-m),this.moveText(F,m)}},{key:"addFontStyle",value:function(F){if(!F.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var m=(0,t.createObjectURL)(F.data,F.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(F.loadedName,'";')+" src: url(".concat(m,`); }
`)}},{key:"setFont",value:function(F){var m=this.current,E=this.commonObjs.get(F[0]),L=F[1];m.font=E,this.embedFonts&&!E.missingFile&&!this.embeddedFonts[E.loadedName]&&(this.addFontStyle(E),this.embeddedFonts[E.loadedName]=E),m.fontMatrix=E.fontMatrix||t.FONT_IDENTITY_MATRIX;var X="normal";E.black?X="900":E.bold&&(X="bold");var re=E.italic?"italic":"normal";L<0?(L=-L,m.fontDirection=-1):m.fontDirection=1,m.fontSize=L,m.fontFamily=E.loadedName,m.fontWeight=X,m.fontStyle=re,m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"y",d(-m.y)),m.xcoords=[],m.ycoords=[]}},{key:"endText",value:function(){var F,m=this.current;m.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG&&(F=m.txtElement)!==null&&F!==void 0&&F.hasChildNodes()&&(m.element=m.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(F){F>0&&(this.current.lineWidth=F)}},{key:"setLineCap",value:function(F){this.current.lineCap=I[F]}},{key:"setLineJoin",value:function(F){this.current.lineJoin=j[F]}},{key:"setMiterLimit",value:function(F){this.current.miterLimit=F}},{key:"setStrokeAlpha",value:function(F){this.current.strokeAlpha=F}},{key:"setStrokeRGBColor",value:function(F,m,E){this.current.strokeColor=t.Util.makeHexColor(F,m,E)}},{key:"setFillAlpha",value:function(F){this.current.fillAlpha=F}},{key:"setFillRGBColor",value:function(F,m,E){this.current.fillColor=t.Util.makeHexColor(F,m,E),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(F){this.current.strokeColor=this._makeColorN_Pattern(F)}},{key:"setFillColorN",value:function(F){this.current.fillColor=this._makeColorN_Pattern(F)}},{key:"shadingFill",value:function(F){var m=this.viewport.width,E=this.viewport.height,L=t.Util.inverseTransform(this.transformMatrix),X=t.Util.applyTransform([0,0],L),re=t.Util.applyTransform([0,E],L),q=t.Util.applyTransform([m,0],L),be=t.Util.applyTransform([m,E],L),Ce=Math.min(X[0],re[0],q[0],be[0]),Ee=Math.min(X[1],re[1],q[1],be[1]),G=Math.max(X[0],re[0],q[0],be[0]),M=Math.max(X[1],re[1],q[1],be[1]),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",Ce),g.setAttributeNS(null,"y",Ee),g.setAttributeNS(null,"width",G-Ce),g.setAttributeNS(null,"height",M-Ee),g.setAttributeNS(null,"fill",this._makeShadingPattern(F)),this.current.fillAlpha<1&&g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(g)}},{key:"_makeColorN_Pattern",value:function(F){return F[0]==="TilingPattern"?this._makeTilingPattern(F):this._makeShadingPattern(F)}},{key:"_makeTilingPattern",value:function(F){var m=F[1],E=F[2],L=F[3]||t.IDENTITY_MATRIX,X=w(F[4],4),re=X[0],q=X[1],be=X[2],Ce=X[3],Ee=F[5],G=F[6],M=F[7],g="shading".concat(ie++),c=t.Util.normalizeRect([].concat(u(t.Util.applyTransform([re,q],L)),u(t.Util.applyTransform([be,Ce],L)))),_=w(c,4),B=_[0],U=_[1],ee=_[2],ue=_[3],pe=t.Util.singularValueDecompose2dScale(L),ge=w(pe,2),ve=ge[0],_e=ge[1],Re=Ee*ve,we=G*_e,Ie=this.svgFactory.createElement("svg:pattern");Ie.setAttributeNS(null,"id",g),Ie.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ie.setAttributeNS(null,"width",Re),Ie.setAttributeNS(null,"height",we),Ie.setAttributeNS(null,"x","".concat(B)),Ie.setAttributeNS(null,"y","".concat(U));var Fe=this.svg,We=this.transformMatrix,Ue=this.current.fillColor,fe=this.current.strokeColor,de=this.svgFactory.create(ee-B,ue-U);if(this.svg=de,this.transformMatrix=L,M===2){var $=t.Util.makeHexColor.apply(t.Util,u(m));this.current.fillColor=$,this.current.strokeColor=$}return this.executeOpTree(this.convertOpList(E)),this.svg=Fe,this.transformMatrix=We,this.current.fillColor=Ue,this.current.strokeColor=fe,Ie.appendChild(de.childNodes[0]),this.defs.appendChild(Ie),"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function(F){switch(typeof F=="string"&&(F=this.objs.get(F)),F[0]){case"RadialAxial":var m="shading".concat(ie++),E=F[3],L;switch(F[1]){case"axial":var X=F[4],re=F[5];L=this.svgFactory.createElement("svg:linearGradient"),L.setAttributeNS(null,"id",m),L.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),L.setAttributeNS(null,"x1",X[0]),L.setAttributeNS(null,"y1",X[1]),L.setAttributeNS(null,"x2",re[0]),L.setAttributeNS(null,"y2",re[1]);break;case"radial":var q=F[4],be=F[5],Ce=F[6],Ee=F[7];L=this.svgFactory.createElement("svg:radialGradient"),L.setAttributeNS(null,"id",m),L.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),L.setAttributeNS(null,"cx",be[0]),L.setAttributeNS(null,"cy",be[1]),L.setAttributeNS(null,"r",Ee),L.setAttributeNS(null,"fx",q[0]),L.setAttributeNS(null,"fy",q[1]),L.setAttributeNS(null,"fr",Ce);break;default:throw new Error("Unknown RadialAxial type: ".concat(F[1]))}var G=R(E),M;try{for(G.s();!(M=G.n()).done;){var g=M.value,c=this.svgFactory.createElement("svg:stop");c.setAttributeNS(null,"offset",g[0]),c.setAttributeNS(null,"stop-color",g[1]),L.appendChild(c)}}catch(_){G.e(_)}finally{G.f()}return this.defs.appendChild(L),"url(#".concat(m,")");case"Mesh":return(0,t.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(F[0]))}}},{key:"setDash",value:function(F,m){this.current.dashArray=F,this.current.dashPhase=m}},{key:"constructPath",value:function(F,m){var E=this.current,L=E.x,X=E.y,re=[],q=0,be=R(F),Ce;try{for(be.s();!(Ce=be.n()).done;){var Ee=Ce.value;switch(Ee|0){case t.OPS.rectangle:L=m[q++],X=m[q++];var G=m[q++],M=m[q++],g=L+G,c=X+M;re.push("M",d(L),d(X),"L",d(g),d(X),"L",d(g),d(c),"L",d(L),d(c),"Z");break;case t.OPS.moveTo:L=m[q++],X=m[q++],re.push("M",d(L),d(X));break;case t.OPS.lineTo:L=m[q++],X=m[q++],re.push("L",d(L),d(X));break;case t.OPS.curveTo:L=m[q+4],X=m[q+5],re.push("C",d(m[q]),d(m[q+1]),d(m[q+2]),d(m[q+3]),d(L),d(X)),q+=6;break;case t.OPS.curveTo2:re.push("C",d(L),d(X),d(m[q]),d(m[q+1]),d(m[q+2]),d(m[q+3])),L=m[q+2],X=m[q+3],q+=4;break;case t.OPS.curveTo3:L=m[q+2],X=m[q+3],re.push("C",d(m[q]),d(m[q+1]),d(L),d(X),d(L),d(X)),q+=4;break;case t.OPS.closePath:re.push("Z");break}}}catch(_){be.e(_)}finally{be.f()}re=re.join(" "),E.path&&F.length>0&&F[0]!==t.OPS.rectangle&&F[0]!==t.OPS.moveTo?re=E.path.getAttributeNS(null,"d")+re:(E.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(E.path)),E.path.setAttributeNS(null,"d",re),E.path.setAttributeNS(null,"fill","none"),E.element=E.path,E.setCurrentPoint(L,X)}},{key:"endPath",value:function(){var F=this.current;if(F.path=null,!!this.pendingClip){if(!F.element){this.pendingClip=null;return}var m="clippath".concat(Q++),E=this.svgFactory.createElement("svg:clipPath");E.setAttributeNS(null,"id",m),E.setAttributeNS(null,"transform",b(this.transformMatrix));var L=F.element.cloneNode(!0);if(this.pendingClip==="evenodd"?L.setAttributeNS(null,"clip-rule","evenodd"):L.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,E.appendChild(L),this.defs.appendChild(E),F.activeClipUrl){F.clipGroup=null;var X=R(this.extraStack),re;try{for(X.s();!(re=X.n()).done;){var q=re.value;q.clipGroup=null}}catch(be){X.e(be)}finally{X.f()}E.setAttributeNS(null,"clip-path",F.activeClipUrl)}F.activeClipUrl="url(#".concat(m,")"),this.tgrp=null}}},{key:"clip",value:function(F){this.pendingClip=F}},{key:"closePath",value:function(){var F=this.current;if(F.path){var m="".concat(F.path.getAttributeNS(null,"d"),"Z");F.path.setAttributeNS(null,"d",m)}}},{key:"setLeading",value:function(F){this.current.leading=-F}},{key:"setTextRise",value:function(F){this.current.textRise=F}},{key:"setTextRenderingMode",value:function(F){this.current.textRenderingMode=F}},{key:"setHScale",value:function(F){this.current.textHScale=F/100}},{key:"setRenderingIntent",value:function(F){}},{key:"setFlatness",value:function(F){}},{key:"setGState",value:function(F){var m=R(F),E;try{for(m.s();!(E=m.n()).done;){var L=w(E.value,2),X=L[0],re=L[1];switch(X){case"LW":this.setLineWidth(re);break;case"LC":this.setLineCap(re);break;case"LJ":this.setLineJoin(re);break;case"ML":this.setMiterLimit(re);break;case"D":this.setDash(re[0],re[1]);break;case"RI":this.setRenderingIntent(re);break;case"FL":this.setFlatness(re);break;case"Font":this.setFont(re);break;case"CA":this.setStrokeAlpha(re);break;case"ca":this.setFillAlpha(re);break;default:(0,t.warn)("Unimplemented graphic state operator ".concat(X));break}}}catch(q){m.e(q)}finally{m.f()}}},{key:"fill",value:function(){var F=this.current;F.element&&(F.element.setAttributeNS(null,"fill",F.fillColor),F.element.setAttributeNS(null,"fill-opacity",F.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var F=this.current;F.element&&(this._setStrokeAttributes(F.element),F.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(F){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,E=this.current,L=E.dashArray;m!==1&&L.length>0&&(L=L.map(function(X){return m*X})),F.setAttributeNS(null,"stroke",E.strokeColor),F.setAttributeNS(null,"stroke-opacity",E.strokeAlpha),F.setAttributeNS(null,"stroke-miterlimit",d(E.miterLimit)),F.setAttributeNS(null,"stroke-linecap",E.lineCap),F.setAttributeNS(null,"stroke-linejoin",E.lineJoin),F.setAttributeNS(null,"stroke-width",d(m*E.lineWidth)+"px"),F.setAttributeNS(null,"stroke-dasharray",L.map(d).join(" ")),F.setAttributeNS(null,"stroke-dashoffset",d(m*E.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width","1px"),F.setAttributeNS(null,"height","1px"),F.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(F)}},{key:"paintImageXObject",value:function(F){var m=F.startsWith("g_")?this.commonObjs.get(F):this.objs.get(F);if(!m){(0,t.warn)("Dependent image with object ID ".concat(F," is not ready yet"));return}this.paintInlineImageXObject(m)}},{key:"paintInlineImageXObject",value:function(F,m){var E=F.width,L=F.height,X=W(F,this.forceDataSchema,!!m),re=this.svgFactory.createElement("svg:rect");re.setAttributeNS(null,"x","0"),re.setAttributeNS(null,"y","0"),re.setAttributeNS(null,"width",d(E)),re.setAttributeNS(null,"height",d(L)),this.current.element=re,this.clip("nonzero");var q=this.svgFactory.createElement("svg:image");q.setAttributeNS(C,"xlink:href",X),q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y",d(-L)),q.setAttributeNS(null,"width",d(E)+"px"),q.setAttributeNS(null,"height",d(L)+"px"),q.setAttributeNS(null,"transform","scale(".concat(d(1/E)," ").concat(d(-1/L),")")),m?m.appendChild(q):this._ensureTransformGroup().appendChild(q)}},{key:"paintImageMaskXObject",value:function(F){var m=this.current,E=F.width,L=F.height,X=m.fillColor;m.maskId="mask".concat(K++);var re=this.svgFactory.createElement("svg:mask");re.setAttributeNS(null,"id",m.maskId);var q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",d(E)),q.setAttributeNS(null,"height",d(L)),q.setAttributeNS(null,"fill",X),q.setAttributeNS(null,"mask","url(#".concat(m.maskId,")")),this.defs.appendChild(re),this._ensureTransformGroup().appendChild(q),this.paintInlineImageXObject(F,re)}},{key:"paintFormXObjectBegin",value:function(F,m){if(Array.isArray(F)&&F.length===6&&this.transform(F[0],F[1],F[2],F[3],F[4],F[5]),m){var E=m[2]-m[0],L=m[3]-m[1],X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",m[0]),X.setAttributeNS(null,"y",m[1]),X.setAttributeNS(null,"width",d(E)),X.setAttributeNS(null,"height",d(L)),this.current.element=X,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(F){var m=this.svgFactory.create(F.width,F.height),E=this.svgFactory.createElement("svg:defs");m.appendChild(E),this.defs=E;var L=this.svgFactory.createElement("svg:g");return L.setAttributeNS(null,"transform",b(F.transform)),m.appendChild(L),this.svg=L,m}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var F=this.svgFactory.createElement("svg:g");F.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(F),this.current.clipGroup=F}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),V}()}},(i,n,e)=>{function t(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(L){return typeof L}:t=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},t(m)}Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var a=l(e(2)),o=e(4),u=e(154);function l(m){return m&&m.__esModule?m:{default:m}}function h(m,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(E&&E.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),E&&S(m,E)}function S(m,E){return S=Object.setPrototypeOf||function(X,re){return X.__proto__=re,X},S(m,E)}function w(m){var E=T();return function(){var X=R(m),re;if(E){var q=R(this).constructor;re=Reflect.construct(X,arguments,q)}else re=X.apply(this,arguments);return x(this,re)}}function x(m,E){if(E&&(t(E)==="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(m)}function N(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function T(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(m){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},R(m)}function P(m,E,L,X,re,q,be){try{var Ce=m[q](be),Ee=Ce.value}catch(G){L(G);return}Ce.done?E(Ee):Promise.resolve(Ee).then(X,re)}function A(m){return function(){var E=this,L=arguments;return new Promise(function(X,re){var q=m.apply(E,L);function be(Ee){P(q,X,re,be,Ce,"next",Ee)}function Ce(Ee){P(q,X,re,be,Ce,"throw",Ee)}be(void 0)})}}function D(m,E){var L=typeof Symbol!="undefined"&&m[Symbol.iterator]||m["@@iterator"];if(!L){if(Array.isArray(m)||(L=k(m))||E&&m&&typeof m.length=="number"){L&&(m=L);var X=0,re=function(){};return{s:re,n:function(){return X>=m.length?{done:!0}:{done:!1,value:m[X++]}},e:function(G){throw G},f:re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q=!0,be=!1,Ce;return{s:function(){L=L.call(m)},n:function(){var G=L.next();return q=G.done,G},e:function(G){be=!0,Ce=G},f:function(){try{!q&&L.return!=null&&L.return()}finally{if(be)throw Ce}}}}function k(m,E){if(!!m){if(typeof m=="string")return z(m,E);var L=Object.prototype.toString.call(m).slice(8,-1);if(L==="Object"&&m.constructor&&(L=m.constructor.name),L==="Map"||L==="Set")return Array.from(m);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return z(m,E)}}function z(m,E){(E==null||E>m.length)&&(E=m.length);for(var L=0,X=new Array(E);L<E;L++)X[L]=m[L];return X}function v(m,E){if(!(m instanceof E))throw new TypeError("Cannot call a class as a function")}function f(m,E){for(var L=0;L<E.length;L++){var X=E[L];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(m,X.key,X)}}function d(m,E,L){return E&&f(m.prototype,E),L&&f(m,L),m}var b=require$$4,y=require$$4,p=require$$4,C=require$$4,I=/^file:\/\/\/[a-zA-Z]:\//;function j(m){var E=C.parse(m);return E.protocol==="file:"||E.host?E:/^[a-z]:[/\\]/i.test(m)?C.parse("file:///".concat(m)):(E.host||(E.protocol="file:"),E)}var W=function(){function m(E){v(this,m),this.source=E,this.url=j(E.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return d(m,[{key:"_progressiveDataLength",get:function(){var L,X;return(L=(X=this._fullRequestReader)===null||X===void 0?void 0:X._loaded)!==null&&L!==void 0?L:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Y(this):new ie(this),this._fullRequestReader}},{key:"getRangeReader",value:function(L,X){if(X<=this._progressiveDataLength)return null;var re=this.isFsUrl?new F(this,L,X):new V(this,L,X);return this._rangeRequestReaders.push(re),re}},{key:"cancelAllRequests",value:function(L){this._fullRequestReader&&this._fullRequestReader.cancel(L);var X=D(this._rangeRequestReaders.slice(0)),re;try{for(X.s();!(re=X.n()).done;){var q=re.value;q.cancel(L)}}catch(be){X.e(be)}finally{X.f()}}}]),m}();n.PDFNodeStream=W;var H=function(){function m(E){v(this,m),this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;var L=E.source;this._contentLength=L.length,this._loaded=0,this._filename=null,this._disableRange=L.disableRange||!1,this._rangeChunkSize=L.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!L.disableStream,this._isRangeSupported=!L.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}return d(m,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var E=A(a.default.mark(function X(){var re,q;return a.default.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this._readCapability.promise;case 2:if(!this._done){Ce.next=4;break}return Ce.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){Ce.next=6;break}throw this._storedError;case 6:if(re=this._readableStream.read(),re!==null){Ce.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),Ce.abrupt("return",this.read());case 10:return this._loaded+=re.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),q=new Uint8Array(re).buffer,Ce.abrupt("return",{value:q,done:!1});case 14:case"end":return Ce.stop()}},X,this)}));function L(){return E.apply(this,arguments)}return L}()},{key:"cancel",value:function(L){if(!this._readableStream){this._error(L);return}this._readableStream.destroy(L)}},{key:"_error",value:function(L){this._storedError=L,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(L){var X=this;this._readableStream=L,L.on("readable",function(){X._readCapability.resolve()}),L.on("end",function(){L.destroy(),X._done=!0,X._readCapability.resolve()}),L.on("error",function(re){X._error(re)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),m}(),Q=function(){function m(E){v(this,m),this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();var L=E.source;this._isStreamingSupported=!L.disableStream}return d(m,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var E=A(a.default.mark(function X(){var re,q;return a.default.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this._readCapability.promise;case 2:if(!this._done){Ce.next=4;break}return Ce.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){Ce.next=6;break}throw this._storedError;case 6:if(re=this._readableStream.read(),re!==null){Ce.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),Ce.abrupt("return",this.read());case 10:return this._loaded+=re.length,this.onProgress&&this.onProgress({loaded:this._loaded}),q=new Uint8Array(re).buffer,Ce.abrupt("return",{value:q,done:!1});case 14:case"end":return Ce.stop()}},X,this)}));function L(){return E.apply(this,arguments)}return L}()},{key:"cancel",value:function(L){if(!this._readableStream){this._error(L);return}this._readableStream.destroy(L)}},{key:"_error",value:function(L){this._storedError=L,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(L){var X=this;this._readableStream=L,L.on("readable",function(){X._readCapability.resolve()}),L.on("end",function(){L.destroy(),X._done=!0,X._readCapability.resolve()}),L.on("error",function(re){X._error(re)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]),m}();function K(m,E){return{protocol:m.protocol,auth:m.auth,host:m.hostname,port:m.port,path:m.path,method:"GET",headers:E}}var ie=function(m){h(L,m);var E=w(L);function L(X){var re;v(this,L),re=E.call(this,X);var q=function(Ce){if(Ce.statusCode===404){var Ee=new o.MissingPDFException('Missing PDF "'.concat(re._url,'".'));re._storedError=Ee,re._headersCapability.reject(Ee);return}re._headersCapability.resolve(),re._setReadableStream(Ce);var G=function(B){return re._readableStream.headers[B.toLowerCase()]},M=(0,u.validateRangeRequestCapabilities)({getResponseHeader:G,isHttp:X.isHttp,rangeChunkSize:re._rangeChunkSize,disableRange:re._disableRange}),g=M.allowRangeRequests,c=M.suggestedLength;re._isRangeSupported=g,re._contentLength=c||re._contentLength,re._filename=(0,u.extractFilenameFromHeader)(G)};return re._request=null,re._url.protocol==="http:"?re._request=y.request(K(re._url,X.httpHeaders),q):re._request=p.request(K(re._url,X.httpHeaders),q),re._request.on("error",function(be){re._storedError=be,re._headersCapability.reject(be)}),re._request.end(),re}return L}(H),V=function(m){h(L,m);var E=w(L);function L(X,re,q){var be;v(this,L),be=E.call(this,X),be._httpHeaders={};for(var Ce in X.httpHeaders){var Ee=X.httpHeaders[Ce];typeof Ee!="undefined"&&(be._httpHeaders[Ce]=Ee)}be._httpHeaders.Range="bytes=".concat(re,"-").concat(q-1);var G=function(g){if(g.statusCode===404){var c=new o.MissingPDFException('Missing PDF "'.concat(be._url,'".'));be._storedError=c;return}be._setReadableStream(g)};return be._request=null,be._url.protocol==="http:"?be._request=y.request(K(be._url,be._httpHeaders),G):be._request=p.request(K(be._url,be._httpHeaders),G),be._request.on("error",function(M){be._storedError=M}),be._request.end(),be}return L}(Q),Y=function(m){h(L,m);var E=w(L);function L(X){var re;v(this,L),re=E.call(this,X);var q=decodeURIComponent(re._url.path);return I.test(re._url.href)&&(q=q.replace(/^\//,"")),b.lstat(q,function(be,Ce){if(be){be.code==="ENOENT"&&(be=new o.MissingPDFException('Missing PDF "'.concat(q,'".'))),re._storedError=be,re._headersCapability.reject(be);return}re._contentLength=Ce.size,re._setReadableStream(b.createReadStream(q)),re._headersCapability.resolve()}),re}return L}(H),F=function(m){h(L,m);var E=w(L);function L(X,re,q){var be;v(this,L),be=E.call(this,X);var Ce=decodeURIComponent(be._url.path);return I.test(be._url.href)&&(Ce=Ce.replace(/^\//,"")),be._setReadableStream(b.createReadStream(Ce,{start:re,end:q-1})),be}return L}(Q)},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=h,n.extractFilenameFromHeader=l,n.validateRangeRequestCapabilities=u,n.validateResponseStatus=S;var t=e(4),a=e(155),o=e(1);function u(w){var x=w.getResponseHeader,N=w.isHttp,T=w.rangeChunkSize,R=w.disableRange;(0,t.assert)(T>0,"Range chunk size must be larger than zero");var P={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(x("Content-Length"),10);if(!Number.isInteger(A)||(P.suggestedLength=A,A<=2*T)||R||!N||x("Accept-Ranges")!=="bytes")return P;var D=x("Content-Encoding")||"identity";return D!=="identity"||(P.allowRangeRequests=!0),P}function l(w){var x=w("Content-Disposition");if(x){var N=(0,a.getFilenameFromContentDispositionHeader)(x);if(N.includes("%"))try{N=decodeURIComponent(N)}catch{}if((0,o.isPdfFile)(N))return N}return null}function h(w,x){return w===404||w===0&&x.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+x+'".'):new t.UnexpectedResponseException("Unexpected server response (".concat(w,') while retrieving PDF "').concat(x,'".'),w)}function S(w){return w===200||w===206}},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=w;var t=e(4);function a(x,N){return S(x)||h(x,N)||u(x,N)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(x,N){if(!!x){if(typeof x=="string")return l(x,N);var T=Object.prototype.toString.call(x).slice(8,-1);if(T==="Object"&&x.constructor&&(T=x.constructor.name),T==="Map"||T==="Set")return Array.from(x);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return l(x,N)}}function l(x,N){(N==null||N>x.length)&&(N=x.length);for(var T=0,R=new Array(N);T<N;T++)R[T]=x[T];return R}function h(x,N){var T=x==null?null:typeof Symbol!="undefined"&&x[Symbol.iterator]||x["@@iterator"];if(T!=null){var R=[],P=!0,A=!1,D,k;try{for(T=T.call(x);!(P=(D=T.next()).done)&&(R.push(D.value),!(N&&R.length===N));P=!0);}catch(z){A=!0,k=z}finally{try{!P&&T.return!=null&&T.return()}finally{if(A)throw k}}return R}}function S(x){if(Array.isArray(x))return x}function w(x){var N=!0,T=D("filename\\*","i").exec(x);if(T){T=T[1];var R=f(T);return R=unescape(R),R=d(R),R=b(R),z(R)}if(T=v(x),T){var P=b(T);return z(P)}if(T=D("filename","i").exec(x),T){T=T[1];var A=f(T);return A=b(A),z(A)}function D(y,p){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function k(y,p){if(y){if(!/^[\x00-\xFF]+$/.test(p))return p;try{var C=new TextDecoder(y,{fatal:!0}),I=(0,t.stringToBytes)(p);p=C.decode(I),N=!1}catch{if(/^utf-?8$/i.test(y))try{p=decodeURIComponent(escape(p)),N=!1}catch{}}}return p}function z(y){return N&&/[\x80-\xff]/.test(y)&&(y=k("utf-8",y),N&&(y=k("iso-8859-1",y))),y}function v(y){for(var p=[],C,I=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");(C=I.exec(y))!==null;){var j=C,W=a(j,4),H=W[1],Q=W[2],K=W[3];if(H=parseInt(H,10),H in p){if(H===0)break;continue}p[H]=[Q,K]}for(var ie=[],V=0;V<p.length&&V in p;++V){var Y=a(p[V],2),F=Y[0],m=Y[1];m=f(m),F&&(m=unescape(m),V===0&&(m=d(m))),ie.push(m)}return ie.join("")}function f(y){if(y.startsWith('"')){for(var p=y.slice(1).split('\\"'),C=0;C<p.length;++C){var I=p[C].indexOf('"');I!==-1&&(p[C]=p[C].slice(0,I),p.length=C+1),p[C]=p[C].replace(/\\(.)/g,"$1")}y=p.join('"')}return y}function d(y){var p=y.indexOf("'");if(p===-1)return y;var C=y.slice(0,p),I=y.slice(p+1),j=I.replace(/^[^']*'/,"");return k(C,j)}function b(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,C,I,j){if(I==="q"||I==="Q")return j=j.replace(/_/g," "),j=j.replace(/=([0-9a-fA-F]{2})/g,function(W,H){return String.fromCharCode(parseInt(H,16))}),k(C,j);try{j=atob(j)}catch{}return k(C,j)})}return""}},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var t=u(e(2)),a=e(4),o=e(154);function u(d){return d&&d.__esModule?d:{default:d}}function l(d,b,y,p,C,I,j){try{var W=d[I](j),H=W.value}catch(Q){y(Q);return}W.done?b(H):Promise.resolve(H).then(p,C)}function h(d){return function(){var b=this,y=arguments;return new Promise(function(p,C){var I=d.apply(b,y);function j(H){l(I,p,C,j,W,"next",H)}function W(H){l(I,p,C,j,W,"throw",H)}j(void 0)})}}function S(d,b){var y=typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(!y){if(Array.isArray(d)||(y=w(d))||b&&d&&typeof d.length=="number"){y&&(d=y);var p=0,C=function(){};return{s:C,n:function(){return p>=d.length?{done:!0}:{done:!1,value:d[p++]}},e:function(Q){throw Q},f:C}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I=!0,j=!1,W;return{s:function(){y=y.call(d)},n:function(){var Q=y.next();return I=Q.done,Q},e:function(Q){j=!0,W=Q},f:function(){try{!I&&y.return!=null&&y.return()}finally{if(j)throw W}}}}function w(d,b){if(!!d){if(typeof d=="string")return x(d,b);var y=Object.prototype.toString.call(d).slice(8,-1);if(y==="Object"&&d.constructor&&(y=d.constructor.name),y==="Map"||y==="Set")return Array.from(d);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return x(d,b)}}function x(d,b){(b==null||b>d.length)&&(b=d.length);for(var y=0,p=new Array(b);y<b;y++)p[y]=d[y];return p}function N(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function")}function T(d,b){for(var y=0;y<b.length;y++){var p=b[y];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}function R(d,b,y){return b&&T(d.prototype,b),y&&T(d,y),d}var P=200,A=206;function D(d){var b=d.response;if(typeof b!="string")return b;var y=(0,a.stringToBytes)(b);return y.buffer}var k=function(){function d(b){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,d),this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&y.httpHeaders||Object.create(null),this.withCredentials=y.withCredentials||!1,this.getXhr=y.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return R(d,[{key:"requestRange",value:function(y,p,C){var I={begin:y,end:p};for(var j in C)I[j]=C[j];return this.request(I)}},{key:"requestFull",value:function(y){return this.request(y)}},{key:"request",value:function(y){var p=this.getXhr(),C=this.currXhrId++,I=this.pendingRequests[C]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(var j in this.httpHeaders){var W=this.httpHeaders[j];typeof W!="undefined"&&p.setRequestHeader(j,W)}return this.isHttp&&"begin"in y&&"end"in y?(p.setRequestHeader("Range","bytes=".concat(y.begin,"-").concat(y.end-1)),I.expectedStatus=A):I.expectedStatus=P,p.responseType="arraybuffer",y.onError&&(p.onerror=function(H){y.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,C),p.onprogress=this.onProgress.bind(this,C),I.onHeadersReceived=y.onHeadersReceived,I.onDone=y.onDone,I.onError=y.onError,I.onProgress=y.onProgress,p.send(null),C}},{key:"onProgress",value:function(y,p){var C,I=this.pendingRequests[y];!I||(C=I.onProgress)===null||C===void 0||C.call(I,p)}},{key:"onStateChange",value:function(y,p){var C=this.pendingRequests[y];if(!!C){var I=C.xhr;if(I.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),I.readyState===4&&y in this.pendingRequests){if(delete this.pendingRequests[y],I.status===0&&this.isHttp){var j;(j=C.onError)===null||j===void 0||j.call(C,I.status);return}var W=I.status||P,H=W===P&&C.expectedStatus===A;if(!H&&W!==C.expectedStatus){var Q;(Q=C.onError)===null||Q===void 0||Q.call(C,I.status);return}var K=D(I);if(W===A){var ie=I.getResponseHeader("Content-Range"),V=/bytes (\d+)-(\d+)\/(\d+)/.exec(ie);C.onDone({begin:parseInt(V[1],10),chunk:K})}else if(K)C.onDone({begin:0,chunk:K});else{var Y;(Y=C.onError)===null||Y===void 0||Y.call(C,I.status)}}}}},{key:"getRequestXhr",value:function(y){return this.pendingRequests[y].xhr}},{key:"isPendingRequest",value:function(y){return y in this.pendingRequests}},{key:"abortRequest",value:function(y){var p=this.pendingRequests[y].xhr;delete this.pendingRequests[y],p.abort()}}]),d}(),z=function(){function d(b){N(this,d),this._source=b,this._manager=new k(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return R(d,[{key:"_onRangeRequestReaderClosed",value:function(y){var p=this._rangeRequestReaders.indexOf(y);p>=0&&this._rangeRequestReaders.splice(p,1)}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(y,p){var C=new f(this._manager,y,p);return C.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(C),C}},{key:"cancelAllRequests",value:function(y){var p;(p=this._fullRequestReader)===null||p===void 0||p.cancel(y);var C=S(this._rangeRequestReaders.slice(0)),I;try{for(C.s();!(I=C.n()).done;){var j=I.value;j.cancel(y)}}catch(W){C.e(W)}finally{C.f()}}}]),d}();n.PDFNetworkStream=z;var v=function(){function d(b,y){N(this,d),this._manager=b;var p={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._fullRequestId=b.requestFull(p),this._headersReceivedCapability=(0,a.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._contentLength=y.length,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}return R(d,[{key:"_onHeadersReceived",value:function(){var y=this._fullRequestId,p=this._manager.getRequestXhr(y),C=function(Q){return p.getResponseHeader(Q)},I=(0,o.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),j=I.allowRangeRequests,W=I.suggestedLength;j&&(this._isRangeSupported=!0),this._contentLength=W||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(y){if(y)if(this._requests.length>0){var p=this._requests.shift();p.resolve({value:y.chunk,done:!1})}else this._cachedChunks.push(y.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){var C=S(this._requests),I;try{for(C.s();!(I=C.n()).done;){var j=I.value;j.resolve({value:void 0,done:!0})}}catch(W){C.e(W)}finally{C.f()}this._requests.length=0}}},{key:"_onError",value:function(y){this._storedError=(0,o.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);var p=S(this._requests),C;try{for(p.s();!(C=p.n()).done;){var I=C.value;I.reject(this._storedError)}}catch(j){p.e(j)}finally{p.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(y){var p;(p=this.onProgress)===null||p===void 0||p.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:function(){var b=h(t.default.mark(function p(){var C,I;return t.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!this._storedError){W.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){W.next=5;break}return C=this._cachedChunks.shift(),W.abrupt("return",{value:C,done:!1});case 5:if(!this._done){W.next=7;break}return W.abrupt("return",{value:void 0,done:!0});case 7:return I=(0,a.createPromiseCapability)(),this._requests.push(I),W.abrupt("return",I.promise);case 10:case"end":return W.stop()}},p,this)}));function y(){return b.apply(this,arguments)}return y}()},{key:"cancel",value:function(y){this._done=!0,this._headersReceivedCapability.reject(y);var p=S(this._requests),C;try{for(p.s();!(C=p.n()).done;){var I=C.value;I.resolve({value:void 0,done:!0})}}catch(j){p.e(j)}finally{p.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),d}(),f=function(){function d(b,y,p){N(this,d),this._manager=b;var C={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(y,p,C),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}return R(d,[{key:"_close",value:function(){var y;(y=this.onClosed)===null||y===void 0||y.call(this,this)}},{key:"_onDone",value:function(y){var p=y.chunk;if(this._requests.length>0){var C=this._requests.shift();C.resolve({value:p,done:!1})}else this._queuedChunk=p;this._done=!0;var I=S(this._requests),j;try{for(I.s();!(j=I.n()).done;){var W=j.value;W.resolve({value:void 0,done:!0})}}catch(H){I.e(H)}finally{I.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(y){this._storedError=(0,o.createResponseStatusError)(y,this._url);var p=S(this._requests),C;try{for(p.s();!(C=p.n()).done;){var I=C.value;I.reject(this._storedError)}}catch(j){p.e(j)}finally{p.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(y){if(!this.isStreamingSupported){var p;(p=this.onProgress)===null||p===void 0||p.call(this,{loaded:y.loaded})}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var b=h(t.default.mark(function p(){var C,I;return t.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!this._storedError){W.next=2;break}throw this._storedError;case 2:if(this._queuedChunk===null){W.next=6;break}return C=this._queuedChunk,this._queuedChunk=null,W.abrupt("return",{value:C,done:!1});case 6:if(!this._done){W.next=8;break}return W.abrupt("return",{value:void 0,done:!0});case 8:return I=(0,a.createPromiseCapability)(),this._requests.push(I),W.abrupt("return",I.promise);case 11:case"end":return W.stop()}},p,this)}));function y(){return b.apply(this,arguments)}return y}()},{key:"cancel",value:function(y){this._done=!0;var p=S(this._requests),C;try{for(p.s();!(C=p.n()).done;){var I=C.value;I.resolve({value:void 0,done:!0})}}catch(j){p.e(j)}finally{p.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),d}()},(i,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var t=u(e(2)),a=e(4),o=e(154);function u(v){return v&&v.__esModule?v:{default:v}}function l(v,f,d,b,y,p,C){try{var I=v[p](C),j=I.value}catch(W){d(W);return}I.done?f(j):Promise.resolve(j).then(b,y)}function h(v){return function(){var f=this,d=arguments;return new Promise(function(b,y){var p=v.apply(f,d);function C(j){l(p,b,y,C,I,"next",j)}function I(j){l(p,b,y,C,I,"throw",j)}C(void 0)})}}function S(v,f){var d=typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(!d){if(Array.isArray(v)||(d=w(v))||f&&v&&typeof v.length=="number"){d&&(v=d);var b=0,y=function(){};return{s:y,n:function(){return b>=v.length?{done:!0}:{done:!1,value:v[b++]}},e:function(W){throw W},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,C=!1,I;return{s:function(){d=d.call(v)},n:function(){var W=d.next();return p=W.done,W},e:function(W){C=!0,I=W},f:function(){try{!p&&d.return!=null&&d.return()}finally{if(C)throw I}}}}function w(v,f){if(!!v){if(typeof v=="string")return x(v,f);var d=Object.prototype.toString.call(v).slice(8,-1);if(d==="Object"&&v.constructor&&(d=v.constructor.name),d==="Map"||d==="Set")return Array.from(v);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return x(v,f)}}function x(v,f){(f==null||f>v.length)&&(f=v.length);for(var d=0,b=new Array(f);d<f;d++)b[d]=v[d];return b}function N(v,f){if(!(v instanceof f))throw new TypeError("Cannot call a class as a function")}function T(v,f){for(var d=0;d<f.length;d++){var b=f[d];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}function R(v,f,d){return f&&T(v.prototype,f),d&&T(v,d),v}function P(v,f,d){return{method:"GET",headers:v,signal:d==null?void 0:d.signal,mode:"cors",credentials:f?"include":"same-origin",redirect:"follow"}}function A(v){var f=new Headers;for(var d in v){var b=v[d];typeof b!="undefined"&&f.append(d,b)}return f}var D=function(){function v(f){N(this,v),this.source=f,this.isHttp=/^https?:/i.test(f.url),this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return R(v,[{key:"_progressiveDataLength",get:function(){var d,b;return(d=(b=this._fullRequestReader)===null||b===void 0?void 0:b._loaded)!==null&&d!==void 0?d:0}},{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new k(this),this._fullRequestReader}},{key:"getRangeReader",value:function(d,b){if(b<=this._progressiveDataLength)return null;var y=new z(this,d,b);return this._rangeRequestReaders.push(y),y}},{key:"cancelAllRequests",value:function(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);var b=S(this._rangeRequestReaders.slice(0)),y;try{for(b.s();!(y=b.n()).done;){var p=y.value;p.cancel(d)}}catch(C){b.e(C)}finally{b.f()}}}]),v}();n.PDFFetchStream=D;var k=function(){function v(f){var d=this;N(this,v),this._stream=f,this._reader=null,this._loaded=0,this._filename=null;var b=f.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=(0,a.createPromiseCapability)(),this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=A(this._stream.httpHeaders);var y=b.url;fetch(y,P(this._headers,this._withCredentials,this._abortController)).then(function(p){if(!(0,o.validateResponseStatus)(p.status))throw(0,o.createResponseStatusError)(p.status,y);d._reader=p.body.getReader(),d._headersCapability.resolve();var C=function(Q){return p.headers.get(Q)},I=(0,o.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:d._stream.isHttp,rangeChunkSize:d._rangeChunkSize,disableRange:d._disableRange}),j=I.allowRangeRequests,W=I.suggestedLength;d._isRangeSupported=j,d._contentLength=W||d._contentLength,d._filename=(0,o.extractFilenameFromHeader)(C),!d._isStreamingSupported&&d._isRangeSupported&&d.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}return R(v,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var f=h(t.default.mark(function b(){var y,p,C,I;return t.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,this._headersCapability.promise;case 2:return W.next=4,this._reader.read();case 4:if(y=W.sent,p=y.value,C=y.done,!C){W.next=9;break}return W.abrupt("return",{value:p,done:C});case 9:return this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),I=new Uint8Array(p).buffer,W.abrupt("return",{value:I,done:!1});case 13:case"end":return W.stop()}},b,this)}));function d(){return f.apply(this,arguments)}return d}()},{key:"cancel",value:function(d){this._reader&&this._reader.cancel(d),this._abortController&&this._abortController.abort()}}]),v}(),z=function(){function v(f,d,b){var y=this;N(this,v),this._stream=f,this._reader=null,this._loaded=0;var p=f.source;this._withCredentials=p.withCredentials||!1,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!p.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=A(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(d,"-").concat(b-1));var C=p.url;fetch(C,P(this._headers,this._withCredentials,this._abortController)).then(function(I){if(!(0,o.validateResponseStatus)(I.status))throw(0,o.createResponseStatusError)(I.status,C);y._readCapability.resolve(),y._reader=I.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}return R(v,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var f=h(t.default.mark(function b(){var y,p,C,I;return t.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,this._readCapability.promise;case 2:return W.next=4,this._reader.read();case 4:if(y=W.sent,p=y.value,C=y.done,!C){W.next=9;break}return W.abrupt("return",{value:p,done:C});case 9:return this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),I=new Uint8Array(p).buffer,W.abrupt("return",{value:I,done:!1});case 13:case"end":return W.stop()}},b,this)}));function d(){return f.apply(this,arguments)}return d}()},{key:"cancel",value:function(d){this._reader&&this._reader.cancel(d),this._abortController&&this._abortController.abort()}}]),v}()}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var n=__webpack_module_cache__[i];if(n!==void 0)return n.exports;var e=__webpack_module_cache__[i]={id:i,loaded:!1,exports:{}};return __webpack_modules__[i].call(e.exports,e,e.exports,__w_pdfjs_require__),e.loaded=!0,e.exports}__w_pdfjs_require__.nmd=i=>(i.paths=[],i.children||(i.children=[]),i);var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return a.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"LinkTarget",{enumerable:!0,get:function(){return n.LinkTarget}}),Object.defineProperty(i,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}}),Object.defineProperty(i,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return S.XfaLayer}}),Object.defineProperty(i,"addLinkAttributes",{enumerable:!0,get:function(){return n.addLinkAttributes}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(i,"createObjectURL",{enumerable:!0,get:function(){return e.createObjectURL}}),Object.defineProperty(i,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(i,"removeNullCharacters",{enumerable:!0,get:function(){return e.removeNullCharacters}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return l.renderTextLayer}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return t.version}});var n=__w_pdfjs_require__(1),e=__w_pdfjs_require__(4),t=__w_pdfjs_require__(136),a=__w_pdfjs_require__(148),o=__w_pdfjs_require__(142),u=__w_pdfjs_require__(6),l=__w_pdfjs_require__(151),h=__w_pdfjs_require__(152),S=__w_pdfjs_require__(150);if(u.isNodeJS){var w=__w_pdfjs_require__(153),x=w.PDFNodeStream;(0,t.setPDFNetworkStreamFactory)(function(A){return new x(A)})}else{var N=__w_pdfjs_require__(156),T=N.PDFNetworkStream,R=__w_pdfjs_require__(157),P=R.PDFFetchStream;(0,t.setPDFNetworkStreamFactory)(function(A){return(0,n.isValidFetchUrl)(A.url)?new P(A):new T(A)})}})(),__webpack_exports__})()})})(pdf);var clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],focusEvents=["onFocus","onBlur"],formEvents=["onChange","onInput","onInvalid","onReset","onSubmit"],genericEvents=["onError","onLoad"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],uiEvents=["onScroll"],wheelEvents=["onWheel"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],imageEvents=["onLoad","onError"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],allEvents=[].concat(clipboardEvents,compositionEvents,keyboardEvents,focusEvents,formEvents,genericEvents,mouseEvents,pointerEvents,selectionEvents,touchEvents,uiEvents,wheelEvents,mediaEvents,imageEvents,animationEvents,transitionEvents,otherEvents),makeEventProps=function i(n,e){var t={};return allEvents.forEach(function(a){if(a in n){if(!e){t[a]=n[a];return}t[a]=function(o){return n[a](o,e(a))}}}),t};function makeCancellablePromise(i){var n=!1,e=new Promise(function(t,a){i.then(function(){return!n&&t.apply(void 0,arguments)}).catch(function(o){return!n&&a(o)})});return{promise:e,cancel:function(){n=!0}}}function mergeClassNames(){return Array.prototype.slice.call(arguments).reduce(function(i,n){return i.concat(n)},[]).filter(function(i){return typeof i=="string"}).join(" ")}var DocumentContext=react.exports.createContext(null);function Message(i){var n=i.children,e=i.type;return React.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(e)},n)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function i(){_classCallCheck(this,i),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(i,[{key:"setDocument",value:function(e){this.pdfDocument=e}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setExternalLinkRel",value:function(e){this.externalLinkRel=e}},{key:"setExternalLinkTarget",value:function(e){this.externalLinkTarget=e}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return 0},set:function(e){}},{key:"goToDestination",value:function(e){var t=this;new Promise(function(a){typeof e=="string"?t.pdfDocument.getDestination(e).then(a):Array.isArray(e)?a(e):e.then(a)}).then(function(a){invariant(Array.isArray(a),'"'.concat(a,'" is not a valid destination array.'));var o=a[0];new Promise(function(u){o instanceof Object?t.pdfDocument.getPageIndex(o).then(function(l){u(l)}).catch(function(){invariant(!1,'"'.concat(o,'" is not a valid page reference.'))}):typeof o=="number"?u(o):invariant(!1,'"'.concat(o,'" is not a valid destination reference.'))}).then(function(u){var l=u+1;invariant(l>=1&&l<=t.pagesCount,'"'.concat(l,'" is not a valid page number.')),t.pdfViewer.scrollPageIntoView({dest:e,pageIndex:u,pageNumber:l})})})}},{key:"navigateTo",value:function(e){this.goToDestination(e)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(e,t,a){e.href=t,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=a?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),i}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof window!="undefined",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(i){return typeof i!="undefined"}function isProvided(i){return isDefined(i)&&i!==null}function isString(i){return typeof i=="string"}function isArrayBuffer(i){return i instanceof ArrayBuffer}function isBlob(i){return invariant(isBrowser,"isBlob can only be used in a browser environment"),i instanceof Blob}function isFile$1(i){return invariant(isBrowser,"isFile can only be used in a browser environment"),i instanceof File}function isDataURI(i){return isString(i)&&/^data:/.test(i)}function dataURItoByteString(i){invariant(isDataURI(i),"Invalid data URI.");var n=i.split(","),e=_slicedToArray(n,2),t=e[0],a=e[1],o=t.split(";");return o.indexOf("base64")!==-1?atob(a):unescape(a)}function getPixelRatio(){return isBrowser&&window.devicePixelRatio||1}var allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function displayWorkerWarning(){warning(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function cancelRunningTask(i){i&&i.cancel&&i.cancel()}function makePageCallback(i,n){return Object.defineProperty(i,"width",{get:function(){return this.view[2]*n},configurable:!0}),Object.defineProperty(i,"height",{get:function(){return this.view[3]*n},configurable:!0}),Object.defineProperty(i,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),i}function isCancelException(i){return i.name==="RenderingCancelledException"}function loadFromFile(i){return new Promise(function(n,e){var t=new FileReader;return t.onload=function(){return n(new Uint8Array(t.result))},t.onerror=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case a.target.error.NOT_READABLE_ERR:return e(new Error("Error while reading a file: File not readable."));case a.target.error.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case a.target.error.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},t.readAsArrayBuffer(i),null})}var eventProps=function(){var i={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(n){i[n]=PropTypes.func}),i}(),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),httpHeaders:PropTypes.object,range:PropTypes.object,url:PropTypes.string,withCredentials:PropTypes.bool})];typeof File!="undefined"&&fileTypes.push(PropTypes.instanceOf(File));typeof Blob!="undefined"&&fileTypes.push(PropTypes.instanceOf(Blob));var isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes),isLinkService=PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);var isPage=PropTypes.shape({_transport:PropTypes.shape({fontLoader:PropTypes.object.isRequired}).isRequired,commonObjs:PropTypes.shape({_objs:PropTypes.object.isRequired}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired}),isPageIndex=function i(n,e,t){var a=n[e],o=n.pageNumber,u=n.pdf;if(!isDefined(u))return null;if(isDefined(a)){if(typeof a!="number")return new Error("`".concat(e,"` of type `").concat(_typeof(a),"` supplied to `").concat(t,"`, expected `number`."));if(a<0)return new Error("Expected `".concat(e,"` to be greater or equal to 0."));var l=u.numPages;if(a+1>l)return new Error("Expected `".concat(e,"` to be less or equal to ").concat(l-1,"."))}else if(!isDefined(o))return new Error("`".concat(e,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(t,"`."));return null},isPageNumber=function i(n,e,t){var a=n[e],o=n.pageIndex,u=n.pdf;if(!isDefined(u))return null;if(isDefined(a)){if(typeof a!="number")return new Error("`".concat(e,"` of type `").concat(_typeof(a),"` supplied to `").concat(t,"`, expected `number`."));if(a<1)return new Error("Expected `".concat(e,"` to be greater or equal to 1."));var l=u.numPages;if(a>l)return new Error("Expected `".concat(e,"` to be less or equal to ").concat(l,"."))}else if(!isDefined(o))return new Error("`".concat(e,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(t,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.shape({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$2(i,n){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);n&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,t)}return e}function _objectSpread$2(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$2(Object(e),!0).forEach(function(t){_defineProperty(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ownKeys$2(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}function _createSuper$6(i){var n=_isNativeReflectConstruct$6();return function(){var t=_getPrototypeOf(i),a;if(n){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$6(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PDFDataRangeTransport=pdf.exports.PDFDataRangeTransport,Document=function(i){_inherits(e,i);var n=_createSuper$6(e);function e(){var t;_classCallCheck(this,e);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=n.call.apply(n,[this].concat(o)),_defineProperty(_assertThisInitialized(t),"state",{pdf:null}),_defineProperty(_assertThisInitialized(t),"viewer",{scrollPageIntoView:function(h){var S=h.dest,w=h.pageIndex,x=h.pageNumber,N=t.props.onItemClick;if(N){N({dest:S,pageIndex:w,pageNumber:x});return}var T=t.pages[w];if(T){T.scrollIntoView();return}warning(!1,"An internal link leading to page ".concat(x," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}),_defineProperty(_assertThisInitialized(t),"linkService",new LinkService),_defineProperty(_assertThisInitialized(t),"loadDocument",function(){cancelRunningTask(t.runningTask),t.loadingTask&&t.loadingTask.destroy();var l=makeCancellablePromise(t.findDocumentSource());t.runningTask=l,l.promise.then(function(h){if(t.onSourceSuccess(),!!h){t.setState(function(R){return R.pdf?{pdf:null}:null});var S=t.props,w=S.options,x=S.onLoadProgress,N=S.onPassword;t.loadingTask=pdf.exports.getDocument(_objectSpread$2(_objectSpread$2({},h),w)),t.loadingTask.onPassword=N,x&&(t.loadingTask.onProgress=x);var T=makeCancellablePromise(t.loadingTask.promise);t.runningTask=T,T.promise.then(function(R){t.setState(function(P){return P.pdf&&P.pdf.fingerprint===R.fingerprint?null:{pdf:R}},t.onLoadSuccess)}).catch(function(R){t.onLoadError(R)})}}).catch(function(h){t.onSourceError(h)})}),_defineProperty(_assertThisInitialized(t),"setupLinkService",function(){var l=t.props,h=l.externalLinkRel,S=l.externalLinkTarget;t.linkService.setViewer(t.viewer),t.linkService.setExternalLinkRel(h),t.linkService.setExternalLinkTarget(S)}),_defineProperty(_assertThisInitialized(t),"onSourceSuccess",function(){var l=t.props.onSourceSuccess;l&&l()}),_defineProperty(_assertThisInitialized(t),"onSourceError",function(l){warning(l);var h=t.props.onSourceError;h&&h(l)}),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var l=t.props.onLoadSuccess,h=t.state.pdf;l&&l(h),t.pages=new Array(h.numPages),t.linkService.setDocument(h)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(l){t.setState({pdf:!1}),warning(l);var h=t.props.onLoadError;h&&h(l)}),_defineProperty(_assertThisInitialized(t),"findDocumentSource",function(){return new Promise(function(l){var h=t.props.file;if(h||l(null),typeof h=="string"){if(isDataURI(h)){var S=dataURItoByteString(h);l({data:S})}displayCORSWarning(),l({url:h})}if(h instanceof PDFDataRangeTransport&&l({range:h}),isArrayBuffer(h)&&l({data:h}),isBrowser&&(isBlob(h)||isFile$1(h))){loadFromFile(h).then(function(T){l({data:T})});return}if(invariant(_typeof(h)==="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(h.url||h.data||h.range,"Invalid parameter object: need either .data, .range or .url"),typeof h.url=="string"){if(isDataURI(h.url)){var w=h.url,x=_objectWithoutProperties(h,_excluded),N=dataURItoByteString(w);l(_objectSpread$2({data:N},x))}displayCORSWarning()}l(h)})}),_defineProperty(_assertThisInitialized(t),"registerPage",function(l,h){t.pages[l]=h}),_defineProperty(_assertThisInitialized(t),"unregisterPage",function(l){delete t.pages[l]}),t}return _createClass(e,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(a){var o=this.props.file;o!==a.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var a=this.linkService,o=this.registerPage,u=this.unregisterPage,l=this.props,h=l.imageResourcesPath,S=l.renderMode,w=l.rotate,x=this.state.pdf;return{imageResourcesPath:h,linkService:a,pdf:x,registerPage:o,renderMode:S,rotate:w,unregisterPage:u}}},{key:"eventProps",get:function(){var a=this;return makeEventProps(this.props,function(){return a.state.pdf})}},{key:"renderChildren",value:function(){var a=this.props.children;return React.createElement(DocumentContext.Provider,{value:this.childContext},a)}},{key:"renderContent",value:function(){var a=this.props.file,o=this.state.pdf;if(!a){var u=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof u=="function"?u():u)}if(o===null){var l=this.props.loading;return React.createElement(Message,{type:"loading"},typeof l=="function"?l():l)}if(o===!1){var h=this.props.error;return React.createElement(Message,{type:"error"},typeof h=="function"?h():h)}return this.renderChildren()}},{key:"render",value:function(){var a=this.props,o=a.className,u=a.inputRef;return React.createElement("div",_extends$1({className:mergeClassNames("react-pdf__Document",o),ref:u},this.eventProps),this.renderContent())}}]),e}(react.exports.PureComponent);Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF\u2026",noData:"No PDF file specified.",onPassword:function i(n,e){switch(e){case PasswordResponses.NEED_PASSWORD:{var t=prompt("Enter the password to open this PDF file.");n(t);break}case PasswordResponses.INCORRECT_PASSWORD:{var a=prompt("Invalid password. Please try again.");n(a);break}}}};var isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=_objectSpread$2(_objectSpread$2({},eventProps),{},{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.string,file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,rotate:PropTypes.number});var isDestination=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.any)]);PropTypes.shape({dest:isDestination,items:PropTypes.arrayOf(PropTypes.shape({dest:isDestination,title:PropTypes.string})),title:PropTypes.string}).isRequired,PropTypes.func,isPdf.isRequired;function ownKeys$1(i,n){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);n&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,t)}return e}function _objectSpread$1(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(e),!0).forEach(function(t){_defineProperty(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ownKeys$1(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}_objectSpread$1({className:isClassName,inputRef:isRef,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,pdf:isPdf},eventProps);function mergeRefs(){for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];var t=n.filter(Boolean);return t.length<=1?t[0]:function(o){t.forEach(function(u){typeof u=="function"?u(o):u.current=o})}}var PageContext=react.exports.createContext(null);function _createSuper$5(i){var n=_isNativeReflectConstruct$5();return function(){var t=_getPrototypeOf(i),a;if(n){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ANNOTATION_MODE=pdf.exports.AnnotationMode,PageCanvasInternal=function(i){_inherits(e,i);var n=_createSuper$5(e);function e(){var t;_classCallCheck(this,e);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=n.call.apply(n,[this].concat(o)),_defineProperty(_assertThisInitialized(t),"canvasElement",react.exports.createRef()),_defineProperty(_assertThisInitialized(t),"onRenderSuccess",function(){t.renderer=null;var l=t.props,h=l.onRenderSuccess,S=l.page,w=l.scale;h&&h(makePageCallback(S,w))}),_defineProperty(_assertThisInitialized(t),"onRenderError",function(l){if(!isCancelException(l)){warning(l);var h=t.props.onRenderError;h&&h(l)}}),_defineProperty(_assertThisInitialized(t),"drawPageOnCanvas",function(){var l=t.canvasElement.current;if(!l)return null;var h=_assertThisInitialized(t),S=h.renderViewport,w=h.viewport,x=t.props,N=x.canvasBackground,T=x.page,R=x.renderForms;l.width=S.width,l.height=S.height,l.style.width="".concat(Math.floor(w.width),"px"),l.style.height="".concat(Math.floor(w.height),"px");var P={annotationMode:R?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,get canvasContext(){return l.getContext("2d")},viewport:S};return N&&(P.background=N),t.cancelRenderingTask(),t.renderer=T.render(P),t.renderer.promise.then(t.onRenderSuccess).catch(t.onRenderError)}),t}return _createClass(e,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(a){var o=this.props,u=o.canvasBackground,l=o.page,h=o.renderForms;(u!==a.canvasBackground||h!==a.renderForms)&&(l.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var a=this.canvasElement.current;a&&(a.width=0,a.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"renderViewport",get:function(){var a=this.props,o=a.page,u=a.rotate,l=a.scale,h=getPixelRatio();return o.getViewport({scale:l*h,rotation:u})}},{key:"viewport",get:function(){var a=this.props,o=a.page,u=a.rotate,l=a.scale;return o.getViewport({scale:l,rotation:u})}},{key:"render",value:function(){var a=this.props.canvasRef;return React.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(a,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),e}(react.exports.PureComponent);PageCanvasInternal.propTypes={canvasBackground:PropTypes.string,canvasRef:isRef,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number.isRequired};function PageCanvas(i){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(PageCanvasInternal,_extends$1({},n,i))})}function _createSuper$4(i){var n=_isNativeReflectConstruct$4();return function(){var t=_getPrototypeOf(i),a;if(n){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PageSVGInternal=function(i){_inherits(e,i);var n=_createSuper$4(e);function e(){var t;_classCallCheck(this,e);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=n.call.apply(n,[this].concat(o)),_defineProperty(_assertThisInitialized(t),"state",{svg:null}),_defineProperty(_assertThisInitialized(t),"onRenderSuccess",function(){t.renderer=null;var l=t.props,h=l.onRenderSuccess,S=l.page,w=l.scale;h&&h(makePageCallback(S,w))}),_defineProperty(_assertThisInitialized(t),"onRenderError",function(l){if(!isCancelException(l)){warning(l);var h=t.props.onRenderError;h&&h(l)}}),_defineProperty(_assertThisInitialized(t),"renderSVG",function(){var l=t.props.page;return t.renderer=l.getOperatorList(),t.renderer.then(function(h){var S=new pdf.exports.SVGGraphics(l.commonObjs,l.objs);t.renderer=S.getSVG(h,t.viewport).then(function(w){t.setState({svg:w},t.onRenderSuccess)}).catch(t.onRenderError)}).catch(t.onRenderError)}),_defineProperty(_assertThisInitialized(t),"drawPageOnContainer",function(l){var h=t.state.svg;if(!(!l||!h)){l.firstElementChild||l.appendChild(h);var S=t.viewport,w=S.width,x=S.height;h.setAttribute("width",w),h.setAttribute("height",x)}}),t}return _createClass(e,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var a=this.props,o=a.page,u=a.rotate,l=a.scale;return o.getViewport({scale:l,rotation:u})}},{key:"render",value:function(){var a=this,o=this.viewport,u=o.width,l=o.height;return React.createElement("div",{className:"react-pdf__Page__svg",ref:function(S){return a.drawPageOnContainer(S)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:u,height:l,userSelect:"none"}})}}]),e}(react.exports.PureComponent);PageSVGInternal.propTypes={onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number.isRequired};function PageSVG(i){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(PageSVGInternal,_extends$1({},n,i))})}function _createSuper$3(i){var n=_isNativeReflectConstruct$3();return function(){var t=_getPrototypeOf(i),a;if(n){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerItemInternal=function(i){_inherits(e,i);var n=_createSuper$3(e);function e(){var t;_classCallCheck(this,e);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=n.call.apply(n,[this].concat(o)),_defineProperty(_assertThisInitialized(t),"itemElement",react.exports.createRef()),_defineProperty(_assertThisInitialized(t),"getElementWidth",function(l){var h=_assertThisInitialized(t),S=h.sideways;return l.getBoundingClientRect()[S?"height":"width"]}),t}return _createClass(e,[{key:"componentDidMount",value:function(){this.alignTextItem()}},{key:"componentDidUpdate",value:function(){this.alignTextItem()}},{key:"unrotatedViewport",get:function(){var a=this.props,o=a.page,u=a.scale;return o.getViewport({scale:u})}},{key:"rotate",get:function(){var a=this.props,o=a.page,u=a.rotate;return u-o.rotate}},{key:"sideways",get:function(){var a=this.rotate;return a%180!==0}},{key:"defaultSideways",get:function(){var a=this.unrotatedViewport.rotation;return a%180!==0}},{key:"fontSize",get:function(){var a=this.props.transform,o=this.defaultSideways,u=_slicedToArray(a,2),l=u[0],h=u[1];return o?h:l}},{key:"top",get:function(){var a=this.props.transform,o=this.unrotatedViewport,u=this.defaultSideways,l=_slicedToArray(a,6),h=l[2],S=l[3],w=l[4],x=l[5],N=_slicedToArray(o.viewBox,4),T=N[1],R=N[3];return u?w+h+T:R-(x+S)}},{key:"left",get:function(){var a=this.props.transform,o=this.unrotatedViewport,u=this.defaultSideways,l=_slicedToArray(a,6),h=l[4],S=l[5],w=_slicedToArray(o.viewBox,1),x=w[0];return u?S-x:h-x}},{key:"getFontData",value:function(a){var o=this.props.page;return new Promise(function(u){o.commonObjs.get(a,u)})}},{key:"alignTextItem",value:function(){var a=this,o=this.itemElement.current;if(!!o){o.style.transform="";var u=this.props,l=u.fontName,h=u.scale,S=u.width;o.style.fontFamily="".concat(l,", sans-serif"),this.getFontData(l).then(function(w){var x=w?w.fallbackName:"sans-serif";o.style.fontFamily="".concat(l,", ").concat(x);var N=S*h,T=a.getElementWidth(o),R="scaleX(".concat(N/T,")"),P=w?w.ascent:0;P&&(R+=" translateY(".concat((1-P)*100,"%)")),o.style.transform=R,o.style.WebkitTransform=R})}}},{key:"render",value:function(){var a=this.fontSize,o=this.top,u=this.left,l=this.props,h=l.customTextRenderer,S=l.scale,w=l.str;return React.createElement("span",{ref:this.itemElement,style:{height:"1em",fontFamily:"sans-serif",fontSize:"".concat(a*S,"px"),position:"absolute",top:"".concat(o*S,"px"),left:"".concat(u*S,"px"),transformOrigin:"left bottom",whiteSpace:"pre",pointerEvents:"all"}},h?h(this.props):w)}}]),e}(react.exports.PureComponent);TextLayerItemInternal.propTypes={customTextRenderer:PropTypes.func,fontName:PropTypes.string.isRequired,itemIndex:PropTypes.number.isRequired,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number,str:PropTypes.string.isRequired,transform:PropTypes.arrayOf(PropTypes.number).isRequired,width:PropTypes.number.isRequired};function TextLayerItem(i){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(TextLayerItemInternal,_extends$1({},n,i))})}function _createSuper$2(i){var n=_isNativeReflectConstruct$2();return function(){var t=_getPrototypeOf(i),a;if(n){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerInternal=function(i){_inherits(e,i);var n=_createSuper$2(e);function e(){var t;_classCallCheck(this,e);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=n.call.apply(n,[this].concat(o)),_defineProperty(_assertThisInitialized(t),"state",{textItems:null}),_defineProperty(_assertThisInitialized(t),"loadTextItems",function(){var l=t.props.page,h=makeCancellablePromise(l.getTextContent());t.runningTask=h,h.promise.then(function(S){var w=S.items;t.setState({textItems:w},t.onLoadSuccess)}).catch(function(S){t.onLoadError(S)})}),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var l=t.props.onGetTextSuccess,h=t.state.textItems;l&&l(h)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(l){t.setState({textItems:!1}),warning(l);var h=t.props.onGetTextError;h&&h(l)}),t}return _createClass(e,[{key:"componentDidMount",value:function(){var a=this.props.page;invariant(a,"Attempted to load page text content, but no page was specified."),this.loadTextItems()}},{key:"componentDidUpdate",value:function(a){var o=this.props.page;a.page&&o!==a.page&&this.loadTextItems()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"unrotatedViewport",get:function(){var a=this.props,o=a.page,u=a.scale;return o.getViewport({scale:u})}},{key:"rotate",get:function(){var a=this.props,o=a.page,u=a.rotate;return u-o.rotate}},{key:"renderTextItems",value:function(){var a=this.state.textItems;return a?a.map(function(o,u){return React.createElement(TextLayerItem,_extends$1({key:u,itemIndex:u},o))}):null}},{key:"render",value:function(){var a=this.unrotatedViewport,o=this.rotate;return React.createElement("div",{className:"react-pdf__Page__textContent",style:{position:"absolute",top:"50%",left:"50%",width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),color:"transparent",transform:"translate(-50%, -50%) rotate(".concat(o,"deg)"),WebkitTransform:"translate(-50%, -50%) rotate(".concat(o,"deg)"),pointerEvents:"none"}},this.renderTextItems())}}]),e}(react.exports.PureComponent);TextLayerInternal.propTypes={onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number};function TextLayer(i){return React.createElement(PageContext.Consumer,null,function(n){return React.createElement(TextLayerInternal,_extends$1({},n,i))})}function _createSuper$1(i){var n=_isNativeReflectConstruct$1();return function(){var t=_getPrototypeOf(i),a;if(n){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct$1(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AnnotationLayerInternal=function(i){_inherits(e,i);var n=_createSuper$1(e);function e(){var t;_classCallCheck(this,e);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=n.call.apply(n,[this].concat(o)),_defineProperty(_assertThisInitialized(t),"state",{annotations:null}),_defineProperty(_assertThisInitialized(t),"layerElement",react.exports.createRef()),_defineProperty(_assertThisInitialized(t),"loadAnnotations",function(){var l=t.props.page,h=makeCancellablePromise(l.getAnnotations());t.runningTask=h,h.promise.then(function(S){t.setState({annotations:S},t.onLoadSuccess)}).catch(function(S){t.onLoadError(S)})}),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var l=t.props.onGetAnnotationsSuccess,h=t.state.annotations;l&&l(h)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(l){t.setState({annotations:!1}),warning(l);var h=t.props.onGetAnnotationsError;h&&h(l)}),_defineProperty(_assertThisInitialized(t),"onRenderSuccess",function(){var l=t.props.onRenderAnnotationLayerSuccess;l&&l()}),_defineProperty(_assertThisInitialized(t),"onRenderError",function(l){warning(l);var h=t.props.onRenderAnnotationLayerError;h&&h(l)}),t}return _createClass(e,[{key:"componentDidMount",value:function(){var a=this.props.page;invariant(a,"Attempted to load page annotations, but no page was specified."),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(a){var o=this.props,u=o.page,l=o.renderForms;(a.page&&u!==a.page||l!==a.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var a=this.props,o=a.page,u=a.rotate,l=a.scale;return o.getViewport({scale:l,rotation:u})}},{key:"renderAnnotationLayer",value:function(){var a=this.state.annotations;if(!!a){var o=this.props,u=o.imageResourcesPath,l=o.linkService,h=o.page,S=o.renderForms,w=this.viewport.clone({dontFlip:!0}),x={annotations:a,div:this.layerElement.current,imageResourcesPath:u,linkService:l,page:h,renderForms:S,viewport:w};this.layerElement.current.innerHTML="";try{pdf.exports.AnnotationLayer.render(x),this.onRenderSuccess()}catch(N){this.onRenderError(N)}}}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),e}(react.exports.PureComponent);AnnotationLayerInternal.propTypes={imageResourcesPath:PropTypes.string,linkService:isLinkService.isRequired,onGetAnnotationsError:PropTypes.func,onGetAnnotationsSuccess:PropTypes.func,onRenderAnnotationLayerError:PropTypes.func,onRenderAnnotationLayerSuccess:PropTypes.func,page:isPage,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number};var AnnotationLayer=function i(n){return React.createElement(DocumentContext.Consumer,null,function(e){return React.createElement(PageContext.Consumer,null,function(t){return React.createElement(AnnotationLayerInternal,_extends$1({},e,t,n))})})};function ownKeys(i,n){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);n&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,t)}return e}function _objectSpread(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(e),!0).forEach(function(t){_defineProperty(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}function _createSuper(i){var n=_isNativeReflectConstruct();return function(){var t=_getPrototypeOf(i),a;if(n){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var defaultScale=1,PageInternal=function(i){_inherits(e,i);var n=_createSuper(e);function e(){var t;_classCallCheck(this,e);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=n.call.apply(n,[this].concat(o)),_defineProperty(_assertThisInitialized(t),"state",{page:null}),_defineProperty(_assertThisInitialized(t),"pageElement",react.exports.createRef()),_defineProperty(_assertThisInitialized(t),"onLoadSuccess",function(){var l=t.props,h=l.onLoadSuccess,S=l.registerPage,w=t.state.page;h&&h(makePageCallback(w,t.scale)),S&&S(t.pageIndex,t.pageElement.current)}),_defineProperty(_assertThisInitialized(t),"onLoadError",function(l){t.setState({page:!1}),warning(l);var h=t.props.onLoadError;h&&h(l)}),_defineProperty(_assertThisInitialized(t),"loadPage",function(){var l=t.props.pdf,h=t.getPageNumber();if(!!h){t.setState(function(w){return w.page?{page:null}:null});var S=makeCancellablePromise(l.getPage(h));t.runningTask=S,S.promise.then(function(w){t.setState({page:w},t.onLoadSuccess)}).catch(function(w){t.onLoadError(w)})}}),t}return _createClass(e,[{key:"componentDidMount",value:function(){var a=this.props.pdf;invariant(a,"Attempted to load a page, but no document was specified."),this.loadPage()}},{key:"componentDidUpdate",value:function(a){var o=this.props.pdf;if(a.pdf&&o!==a.pdf||this.getPageNumber()!==this.getPageNumber(a)){var u=this.props.unregisterPage;u&&u(this.getPageIndex(a)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var a=this.props.unregisterPage;a&&a(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var a=this.state.page;if(!a)return{};var o=this.props,u=o.canvasBackground,l=o.customTextRenderer,h=o.onGetAnnotationsError,S=o.onGetAnnotationsSuccess,w=o.onGetTextError,x=o.onGetTextSuccess,N=o.onRenderAnnotationLayerError,T=o.onRenderAnnotationLayerSuccess,R=o.onRenderError,P=o.onRenderSuccess,A=o.renderForms,D=o.renderInteractiveForms;return{canvasBackground:u,customTextRenderer:l,onGetAnnotationsError:h,onGetAnnotationsSuccess:S,onGetTextError:w,onGetTextSuccess:x,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:T,onRenderError:R,onRenderSuccess:P,page:a,renderForms:A!=null?A:D,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(a.pageNumber)?a.pageNumber-1:isProvided(a.pageIndex)?a.pageIndex:null}},{key:"getPageNumber",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(a.pageNumber)?a.pageNumber:isProvided(a.pageIndex)?a.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var a=this.props.rotate;if(isProvided(a))return a;var o=this.state.page;return o?o.rotate:null}},{key:"scale",get:function(){var a=this.state.page;if(!a)return null;var o=this.props,u=o.scale,l=o.width,h=o.height,S=this.rotate,w=1,x=u===null?defaultScale:u;if(l||h){var N=a.getViewport({scale:1,rotation:S});w=l?l/N.width:h/N.height}return x*w}},{key:"eventProps",get:function(){var a=this;return makeEventProps(this.props,function(){var o=a.state.page;return o&&makePageCallback(o,a.scale)})}},{key:"pageKey",get:function(){var a=this.state.page;return"".concat(a.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){var a=this.state.page;return"".concat(a.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var a=this.props,o=a.canvasRef,u=a.renderMode;switch(u){case"none":return null;case"svg":return React.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return React.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:o})}}},{key:"renderTextLayer",value:function(){var a=this.props.renderTextLayer;return a?React.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var a=this.props.renderAnnotationLayer;return a?React.createElement(AnnotationLayer,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var a=this.props.children;return React.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),a)}},{key:"renderContent",value:function(){var a=this.pageNumber,o=this.props.pdf,u=this.state.page;if(!a){var l=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof l=="function"?l():l)}if(o===null||u===null){var h=this.props.loading;return React.createElement(Message,{type:"loading"},typeof h=="function"?h():h)}if(o===!1||u===!1){var S=this.props.error;return React.createElement(Message,{type:"error"},typeof S=="function"?S():S)}return this.renderChildren()}},{key:"render",value:function(){var a=this.pageNumber,o=this.props,u=o.className,l=o.inputRef;return React.createElement("div",_extends$1({className:mergeClassNames("react-pdf__Page",u),"data-page-number":a,ref:mergeRefs(l,this.pageElement),style:{position:"relative"}},this.eventProps),this.renderContent())}}]),e}(react.exports.PureComponent);PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page\u2026",noData:"No page specified.",renderAnnotationLayer:!0,renderForms:!1,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:PropTypes.string,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:PropTypes.func,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderInteractiveForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,unregisterPage:PropTypes.func,width:PropTypes.number});function Page(i,n){return React.createElement(DocumentContext.Consumer,null,function(e){return React.createElement(PageInternal,_extends$1({ref:n},e,i))})}var Page$1=React.forwardRef(Page);displayWorkerWarning();pdf.exports.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdf.exports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdf.exports.version}/pdf.worker.js`;const documentOptions={cMapUrl:"//cdn.jsdelivr.net/npm/pdfjs-dist@2.1.266/cmaps/",cMapPacked:!0},StyledPage=styled(Page$1)({paddingBottom:"60px"}),PdfDocument=react.exports.forwardRef((i,n)=>{const{pdfUrl:e,currentPage:t,scale:a=1,pdfWidth:o,onLoad:u}=i,l=useResourceTranslate(Entities.QUIZZES);return React.createElement(Document,{ref:n,file:e,options:documentOptions,onLoadSuccess:u,loading:React.createElement(Box,{sx:{padding:"10px"}},l("loadingPdf")),error:React.createElement(Box,{sx:{padding:"10px"}},l("failedToLoadPdf"))},React.createElement(StyledPage,{scale:a,width:o,key:`page_${t}`,pageNumber:t}))});var PdfDocument$1=react.exports.memo(PdfDocument);const sx$5={fieldTypeSelection:{display:"flex",flexDirection:"column"},selection:{marginLeft:4,marginRight:4}},FieldTypeSelection=a=>{var o=a,{quizType:i,answers:n,onSelect:e}=o,t=yt(o,["quizType","answers","onSelect"]);const u=useResourceTranslate(Entities.QUIZZES),l=react.exports.useMemo(()=>![quiz_pb.QuizType.QUIZ_TYPE_FIB,quiz_pb.QuizType.QUIZ_TYPE_MIQ].includes(i),[i]);return React.createElement(Paper,rt({sx:sx$5.fieldTypeSelection,square:!0,elevation:2},t),React.createElement(ButtonBase,{sx:sx$5.selection,variant:"text",color:"primary",onClick:()=>{e(FieldTypes.QUESTION)}},u("question")),React.createElement(ButtonBase,{sx:sx$5.selection,variant:"text",color:"primary",onClick:()=>{e(FieldTypes.EXPLANATION)}},u("explanation")),l&&n.map(([h],S)=>React.createElement(ButtonBase,{key:h,variant:"text",sx:sx$5.selection,color:"primary",onClick:()=>{e(FieldTypes.ANSWER,h)}},`${u("answer")} ${S+1}`)))};var FieldTypeSelection$1=react.exports.memo(FieldTypeSelection),Functions={},_interopRequireDefault$1=interopRequireDefault.exports;Object.defineProperty(Functions,"__esModule",{value:!0});var default_1$1=Functions.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(createSvgIcon$1),_jsxRuntime$1=jsxRuntime.exports,_default$1=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"}),"Functions");default_1$1=Functions.default=_default$1;var TextFields={},_interopRequireDefault=interopRequireDefault.exports;Object.defineProperty(TextFields,"__esModule",{value:!0});var default_1=TextFields.default=void 0,_createSvgIcon=_interopRequireDefault(createSvgIcon$1),_jsxRuntime=jsxRuntime.exports,_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"}),"TextFields");default_1=TextFields.default=_default;const sx$4={root:{display:"flex",flexDirection:"column"},btn:{marginLeft:"4px",marginRight:"4px"}},RectTypeSelection=e=>{var t=e,{onSelect:i}=t,n=yt(t,["onSelect"]);const a=useResourceTranslate(Entities.QUIZZES);return React.createElement(Paper,rt({sx:sx$4.root,square:!0,elevation:3},n),React.createElement(ButtonBase,{sx:sx$4.btn,color:"primary",variant:"text",startIcon:React.createElement(default_1,null),onClick:()=>{i(RectTypes.TEXT)}},a("text")),React.createElement(ButtonBase,{sx:sx$4.btn,variant:"text",color:"primary",startIcon:React.createElement(default_1$6,null),onClick:()=>{i(RectTypes.IMAGE)}},a("image")),React.createElement(ButtonBase,{sx:sx$4.btn,variant:"text",color:"primary",startIcon:React.createElement(default_1$1,null),onClick:()=>{i(RectTypes.TEX)}},a("tex")))};var RectTypeSelection$1=react.exports.memo(RectTypeSelection),SelectFieldState=(i=>(i.RECT_TYPE="RECT_TYPE",i.FIELD_TYPE="FIELD_TYPE",i))(SelectFieldState||{});const OCROptionSelection=i=>{const w=i,{open:n,anchorEl:e,popperRef:t,selectFieldState:a,onSelectFieldType:o,onSelectRectType:u}=w,l=yt(w,["open","anchorEl","popperRef","selectFieldState","onSelectFieldType","onSelectRectType"]),h=useSelector(answersSelector),S=useSelector(quizTypeSelector);return React.createElement(Popper,rt({popperRef:t,open:n,anchorEl:e,placement:"bottom-end",keepMounted:!1},l),a===SelectFieldState.FIELD_TYPE?React.createElement(FieldTypeSelection$1,{quizType:S,answers:h,"data-testid":"OCROptionSelection__fieldType",onSelect:o}):React.createElement(RectTypeSelection$1,{"data-testid":"OCROptionSelection__rectType",onSelect:u}))},StyledIconButton=styled(IconButton)(({theme:i})=>({marginLeft:i.spacing(1),marginRight:i.spacing(1)}));StyledIconButton.displayName="StyledIconButton";const sx$3={root:{display:"flex",alignItems:"center"},inputWrapper:{width:48,display:"flex",justifyContent:"center"},input:i=>({textAlign:"center",paddingTop:"5px",paddingBottom:"5px",paddingLeft:i.spacing(1),paddingRight:i.spacing(1)}),page:i=>({color:i.palette.text.light}),prevNext:i=>({color:i.palette.text.primary,"&:disabled":{color:i.palette.text.disabled}}),prevIcon:{"& path":{transform:"translate(4px)"}}};function execDisable(i){return i?typeof i=="function"?(n,e)=>i(n,e):()=>i:()=>!1}const defaultTranslator=i=>i,PdfPagination=i=>{const{currentPage:n,totalPage:e,disables:t,translator:a=defaultTranslator,onChange:o}=i,u=w=>{o(w.target.value)},l=w=>{isNumericValue(n)&&o(Number(n)+w)},h=!isNumericValue(n)||n<=1,S=!isNumericValue(n)||n>=e;return React.createElement(Box,{sx:sx$3.root},React.createElement("span",null,`${a("paginationPageText")}:`),React.createElement(StyledIconButton,{size:"small","data-testid":"PdfPagination__prev",disabled:h||execDisable(t==null?void 0:t.prev)(n,e),onClick:()=>l(-1)},React.createElement(ArrowBackIos,{sx:sx$3.prevIcon,fontSize:"inherit"})),React.createElement(BaseInput,{sx:sx$3.inputWrapper,value:n,size:"small",disabled:execDisable(t==null?void 0:t.input)(n,e),variant:"outlined",inputProps:{sx:sx$3.input,"data-testid":"PdfPagination__input"},onChange:u}),React.createElement(StyledIconButton,{size:"small","data-testid":"PdfPagination__next",disabled:S||execDisable(t==null?void 0:t.next)(n,e),onClick:()=>l(1)},React.createElement(ArrowForwardIos,{fontSize:"inherit"})),React.createElement("span",null,`${a("paginationOfText")} ${e}`))};PdfPagination.defaultProps={disables:{prev:i=>i<=1,next:(i,n)=>i>=n,input:()=>!1}};const sx$2={root:{display:"flex",flexDirection:"column",alignItems:"center"},error:i=>({textAlign:"center",marginTop:i.spacing(1),minHeight:20})},PdfPaginationWithErr=i=>{const[n,e]=react.exports.useState(null),[t,a]=react.exports.useState(i.currentPage),o=useResourceTranslate(Entities.QUIZZES),N=i,{onChange:u,currentPage:l,customCheckError:h,totalPage:S}=N,w=yt(N,["onChange","currentPage","customCheckError","totalPage"]);react.exports.useEffect(()=>{a(l)},[l]);const x=react.exports.useCallback(T=>{if(T===t)return;if(a(T),typeof h=="function"&&h(T))return e("paginationInvalidPage");const R=Number(T);if(Number.isNaN(R)||T==="")return e("paginationInvalidPage");if(Number.isSafeInteger(R)&&(R<1||R>S))return e("paginationOutOfRange");e(null),u(R)},[t,S,h,u]);return React.createElement(Box,{sx:sx$2.root},React.createElement(PdfPagination,ct(rt({},w),{totalPage:S,currentPage:t,translator:o,onChange:x})),React.createElement(TypographyBase,{sx:sx$2.error,color:"error"},n?React.createElement("span",{"data-testid":"PdfPaginationWithErr__err"},o(n)):null))};function getBoundingClientFromElement(i){const n=i==null?void 0:i.getBoundingClientRect();return{top:(n==null?void 0:n.top)||0,left:(n==null?void 0:n.left)||0,offsetLeft:(i==null?void 0:i.offsetLeft)||0,offsetTop:(i==null?void 0:i.offsetTop)||0}}function drawCanvasInCanvas(i,n,e){const t=document.createElement("canvas");t.width=i.width,t.height=i.height;const a=t.getContext("2d");return a?(a.drawImage(n,i.left*e,i.top*e,t.width*e,t.height*e,0,0,t.width,t.height),t.toDataURL()):null}var ScreenshotState=(i=>(i.IDLE="IDLE",i.START="START",i.SELECTING="SELECTING",i))(ScreenshotState||{});function useScreenShot({disabled:i=!1,canvasSelector:n,onScreenshotComplete:e,onError:t}){const[a,o]=react.exports.useState(null),[u,l]=react.exports.useState("IDLE"),h=react.exports.useCallback(R=>{const P=R.currentTarget.parentElement,A=(P==null?void 0:P.scrollLeft)||0,D=(P==null?void 0:P.scrollTop)||0,{left:k,top:z}=getBoundingClientFromElement(P);return[R.clientX-k+A,R.clientY-z+D]},[]),S=react.exports.useCallback(R=>{if(R.stopPropagation(),R.preventDefault(),u==="IDLE"&&!i){l("START");const[P,A]=h(R);o({left:P,top:A,width:0,height:0})}},[u,i,h]),w=react.exports.useCallback(R=>{if(R.stopPropagation(),R.preventDefault(),u!=="START"&&u!=="SELECTING"||a==null)return;const[P,A]=h(R),D=a.left,k=a.top;P>D&&A>k&&(l("SELECTING"),o(z=>z&&ct(rt({},z),{width:P-z.left,height:A-z.top})))},[a,u,h]),x=react.exports.useCallback(()=>{const R=document.getElementsByClassName(n);if(R.length>0&&a&&a.width&&a.height){const P=R[0];return drawCanvasInCanvas(a,P,window.devicePixelRatio||1)}return null},[a,n]);useKey$1("Escape",()=>{reactDom.exports.unstable_batchedUpdates(()=>{l("IDLE"),o(null)})},{event:"keyup"});const N=react.exports.useCallback(R=>{switch(R.stopPropagation(),R.preventDefault(),u){case"SELECTING":const P=x();return!P||!a?t("ra.manabie-error.screenshotFailed"):(e(rt({image:P},a)),o(null),l("IDLE"));case"START":l("IDLE")}},[u,x,a,e,t]),T=react.exports.useCallback(()=>{o(null),l("IDLE")},[]);return{screenshotState:u,screenshotRect:a,takeScreenshot:x,onMouseUp:N,onMouseMove:w,onMouseDown:S,onScreenshotCancel:T}}const PREFIX$1="ScreenshotPosition",classes$1={box:`${PREFIX$1}-box`,hidden:`${PREFIX$1}-hidden`,crosshairs:`${PREFIX$1}-crosshairs`},borderStyle="2px solid #3f51b5",Root$1=styled("div")(()=>({width:"100%",height:"calc(100% - 20px)",position:"absolute",left:0,top:0,overflow:"hidden",[`& .${classes$1.box}`]:{border:borderStyle,position:"absolute"},[`& .${classes$1.hidden}`]:{display:"none"},[`& .${classes$1.crosshairs}`]:{position:"absolute",height:"100%",width:"100%",zIndex:2147483647-2,"&:before, &:after":{content:'""',height:"100%",width:"100%",position:"absolute",border:"none !important",borderImage:"none","&&":{borderRight:borderStyle,borderBottom:borderStyle}},"&:before":{left:"-100%",top:"-100%"},"&:after":{left:0,top:0}}})),ScreenshotPosition=react.exports.forwardRef((i,n)=>{const{processedScreenshot:e,screenshotState:t,screenshotRect:a,selectFieldState:o,onMouseDown:u,onMouseUp:l,onMouseMove:h}=i,S=react.exports.useMemo(()=>({left:(e==null?void 0:e.left)||(a==null?void 0:a.left),top:(e==null?void 0:e.top)||(a==null?void 0:a.top),width:(e==null?void 0:e.width)||(a==null?void 0:a.width),height:(e==null?void 0:e.height)||(a==null?void 0:a.height)}),[a,e]),w=t===ScreenshotState.IDLE&&o===null;return React.createElement(Root$1,{id:"screenshot","aria-label":"screenshot",onMouseDown:u,onMouseUp:l,onMouseMove:h},React.createElement("div",null,React.createElement("div",{className:clsx(classes$1.crosshairs,t!==ScreenshotState.START&&classes$1.hidden),"aria-label":"crosshairs",style:{left:a==null?void 0:a.left,top:a==null?void 0:a.top}}),React.createElement("div",{ref:n,"aria-label":"Screenshot area",className:clsx(classes$1.box,w&&classes$1.hidden),style:S})))}),sx$1={pdfContainer:{position:"relative",marginBottom:"48px",overflow:"hidden"},pdf:{userSelect:"none"},paginationContainer:i=>({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:i.palette.common.white,left:0,top:"calc(100% - 64px)",height:"64px",width:"100%",paddingTop:"16px",paddingBottom:"16px",zIndex:3})},pdfScale=1,PdfView=({className:i,readOnly:n,pdfURL:e,onRequestOCR:t,onPDFLoaded:a})=>{const[o,u]=react.exports.useState(0),[l,h]=react.exports.useState(1),[S,w]=react.exports.useState(null),x=react.exports.useRef(null),[N,T]=react.exports.useState(null),[R,P]=react.exports.useState(800),A=react.exports.useRef(null),D=react.exports.useRef(null),k=react.exports.useCallback(Q=>{var K;!A.current||!Q||!Q.image||(w(ct(rt({id:genId(),fileName:e,filePage:l,fileScale:pdfScale,rectType:RectTypes.IMAGE,fileWidth:((K=A.current)==null?void 0:K.offsetWidth)||0},Q),{image:Q.image})),T(SelectFieldState.RECT_TYPE))},[e,l]),z=react.exports.useCallback(()=>{},[]),{screenshotRect:v,onMouseDown:f,onMouseMove:d,onMouseUp:b,screenshotState:y,onScreenshotCancel:p}=useScreenShot({disabled:N!==null||n,onError:z,onScreenshotComplete:k,canvasSelector:"react-pdf__Page__canvas"});react.exports.useEffect(()=>{h(1)},[e]);const C=react.exports.useCallback(({numPages:Q})=>{u(Q),a()},[a]),I=react.exports.useCallback(Q=>{A.current=Q,Q&&P(Q.getBoundingClientRect().width)},[]),j=react.exports.useCallback(Q=>{h(Q)},[]),W=react.exports.useCallback(Q=>{T(SelectFieldState.FIELD_TYPE),w(K=>K?ct(rt({},K),{rectType:Q}):null)},[]),H=react.exports.useCallback((Q,K)=>{S&&(t({fieldType:Q,answerId:K,rect:S}),w(null),T(null))},[t,S]);return react.exports.useEffect(()=>{const Q=K=>{!x.current||x.current.state.elements.popper.contains(K.target)||reactDom.exports.unstable_batchedUpdates(()=>{w(null),T(null),p()})};return document.addEventListener("mousedown",Q),document.addEventListener("touchstart",Q),()=>{document.removeEventListener("mousedown",Q),document.removeEventListener("touchstart",Q)}},[p]),React.createElement("div",{className:i},React.createElement(Box,{sx:sx$1.pdfContainer},React.createElement(Box,{ref:I,sx:sx$1.pdf},React.createElement(PdfDocument$1,{ref:A,pdfUrl:e,scale:pdfScale,pdfWidth:R,currentPage:l,onLoad:C})),React.createElement(ScreenshotPosition,{ref:D,screenshotRect:v,processedScreenshot:S,screenshotState:y,selectFieldState:N,onMouseDown:f,onMouseUp:b,onMouseMove:d}),React.createElement(OCROptionSelection,{sx:Q=>({zIndex:Q.zIndex.tooltip}),open:N===SelectFieldState.FIELD_TYPE||N===SelectFieldState.RECT_TYPE,anchorEl:D.current,popperRef:x,selectFieldState:N,onSelectFieldType:H,onSelectRectType:W})),React.createElement(Box,{sx:sx$1.paginationContainer},React.createElement(PdfPaginationWithErr,{currentPage:l,totalPage:o,onChange:j})))};var PdfView$1=react.exports.memo(PdfView);function useLocale(){const{locale:i}=useTranslationContext();return i}const QuizPdf=i=>{const n=useTranslate(),e=useLocale(),[t,a]=react.exports.useState(e),[o,u]=react.exports.useState(!1),{textEntity:l,actionWrapper:h,actionPanel:S}=useTextEntity,z=i,{className:w,dispatch:x,disabled:N,pdfUrl:T,classes:R={}}=z,P=yt(z,["className","dispatch","disabled","pdfUrl","classes"]),A=react.exports.useCallback(()=>{u(!0)},[]),D=react.exports.useCallback(()=>{x(QuizActions.setPdfUrl({url:null}))},[x]),k=react.exports.useCallback(v=>{x(QuizActions.sendOrcRequest(ct(rt({},v),{language:t})))},[x,t]);return React.createElement(BaseBox,null,React.createElement(Paper,rt({className:w,elevation:1},P),React.createElement(Box,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},React.createElement(Box,{className:clsx(R.title,h),flex:1},React.createElement(TypographyBase,{variant:"h4",color:"textPrimary",className:clsx(l),sx:useTextCapitalize},n("resources.common.material"))),React.createElement(Box,{sx:S},React.createElement(LanguageSelect,{size:"small",value:t,onChange:v=>a(v.target.value)}),React.createElement(Box,{flexShrink:0},React.createElement(ButtonBase,{disabled:N||!o,startIcon:React.createElement(CloseIcon,null),onClick:D},n("resources.common.removeMaterial"))))),React.createElement(PdfView$1,{key:T,className:R.content,pdfURL:T,"data-testid":"PDF__view",onPDFLoaded:A,onRequestOCR:k})))},PREFIX="QuizContent",classes={root:`${PREFIX}-root`,material:`${PREFIX}-material`,materialContent:`${PREFIX}-materialContent`,paper:`${PREFIX}-paper`,sticky:`${PREFIX}-sticky`,leftPart:`${PREFIX}-leftPart`,rightPart:`${PREFIX}-rightPart`,rightPartWithPdf:`${PREFIX}-rightPartWithPdf`,quizMain:`${PREFIX}-quizMain`},Root=styled("div")(({theme:i})=>({[`& .${classes.root}`]:{maxWidth:"100%",margin:"-8px"},[`& .${classes.material}`]:{marginBottom:i.spacing(3)},[`& .${classes.materialContent}`]:{maxHeight:`calc(100vh - 220px - ${footerHeight}px)`,marginBottom:footerHeight,overflowY:"auto",overflowX:"hidden"},[`& .${classes.paper}`]:{padding:i.spacing(3,4),position:"relative"},[`& .${classes.sticky}`]:{position:"sticky",top:0},[`& .${classes.leftPart}`]:{width:"50%",display:"inline-block",float:"left",paddingRight:i.spacing(1.5)},[`& .${classes.rightPart}`]:{width:"100%",display:"inline-block"},[`& .${classes.rightPartWithPdf}`]:{width:"50% !important",paddingLeft:i.spacing(1.5)},[`& .${classes.quizMain}`]:{paddingLeft:"0 !important",paddingRight:"0 !important",paddingTop:`${i.spacing(1)} !important`,padding:i.spacing(1),display:"block"}})),footerHeight=40,QuizContent=i=>{const{disabled:n,pdfUrl:e,externalIdProps:t}=i,a=useDispatch();return React.createElement(Root,null,e?React.createElement("div",{className:clsx(classes.leftPart,classes.sticky)},React.createElement(QuizPdf,{className:clsx(classes.paper),classes:{content:classes.materialContent},pdfUrl:e,disabled:n,"data-testid":"QuizContent__PDF",dispatch:a})):null,React.createElement("div",{className:clsx(classes.rightPart,e&&classes.rightPartWithPdf)},React.createElement(Grid,{className:classes.root,container:!0,spacing:2,justifyContent:"center"},React.createElement(Grid,{className:classes.quizMain,container:!0,item:!0,xs:e?12:6,direction:"column"},e?null:React.createElement(Grid,{className:classes.material,item:!0},React.createElement(MaterialUpload$1,{className:classes.paper,dispatch:a})),React.createElement(Grid,{item:!0,xs:12},React.createElement(QuizMain,{className:clsx(classes.paper),dispatch:a,externalIdProps:t}))))))};var QuizContent$1=react.exports.memo(QuizContent);const FormLayout=i=>{const u=i,{formTitle:n,children:e,fullWidth:t,sxOverride:a=[]}=u,o=yt(u,["formTitle","children","fullWidth","sxOverride"]);return React.createElement(Box,{sx:a},React.createElement(Container$1,rt({sx:{maxWidth:t?"100% !important":"770px !important",boxShadow:"none",background:"transparent",padding:"0 !important"}},o),n&&React.createElement(TypographyBase,{variant:"h4",sx:useTextCapitalize,"data-testid":"FormLayout__title"},React.createElement(Box,{mt:1,mb:3},n)),e))},sx={root:{marginLeft:"auto",marginRight:"auto"},wrapper:{padding:0},actionWrapper:i=>({width:"100%",display:"flex",justifyContent:"flex-end",marginTop:i.spacing(3)}),save:{backgroundColor:"#2196F3"}},QuizLayout=i=>{const{title:n,quizOnReview:e,expandActionSpace:t,disabled:a,loading:o,children:u,onSubmit:l,onCancel:h,onCloseReview:S,fullWidth:w=!0}=i,x=useTranslate(),{open:N}=useDialog(!0);return React.createElement(FormDialog,{fullScreen:!0,handleClose:h,open:N,title:n,disableEnforceFocus:!0},React.createElement(FormLayout,{fullWidth:w,sxOverride:sx.wrapper},u,React.createElement(Grid,{container:!0,spacing:3,justifyContent:"center"},React.createElement(Grid,{item:!0,xs:t?12:6},React.createElement(SpacingGroup,{direction:"horizontal",spacing:8,sx:sx.actionWrapper},React.createElement(ButtonBase,{variant:"text",disabled:o,onClick:h},x("ra.common.action.cancel")),React.createElement(ButtonBase,{"data-testid":"QuizLayout__submit",type:"submit",variant:"contained",color:"primary",disabled:a||o,onClick:l,"aria-label":"Save",sx:sx.save},x("ra.common.save"))))),e?React.createElement(QuizReview,{open:Boolean(e),quiz:e,anchor:"right",title:x(`resources.${Entities.QUIZZES}.questionPreview`),onClose:S}):null))},useStrictQuiz=i=>{const n=useTranslate(),e=useDispatch(),t=useShowSnackbar(),a=useNavigation(),{parentId:o}=parseQuery(window.location.search),{chapterId:u,tab:l,topicId:h,bookId:S}=parseQuery(),w=n(`resources.${Entities.QUIZZES}.question`),{isFetching:x}=inferQuery({entity:"learningObjective",action:"LO_GET_ONE"})({lo_id:o},{enabled:!0,onError:T=>{t(T.message),T.message==="ra.notification.item_doesnt_exist"&&a.push(`/${MicroFrontendTypes.SYLLABUS}/${Entities.BOOKS}`)},onSuccess:T=>{e(QuizActions.setCurrentLO(T))}}),N=react.exports.useMemo(()=>stringifyQuery({[SearchEngine.TAB]:Number(l),[SearchEngine.PARENT_ID]:String(h),[SearchEngine.CHAPTER_ID]:String(u),[SearchEngine.BOOK_ID]:String(S)}),[S,u,l,h]);return{onNotify:useNotifyForm({action:i.action,entityName:w}),searchURL:N,id:o,isFetching:x}},removeAllLoadingImageFromHTML=()=>{const i=document.querySelectorAll('[data-testid="Editor__loading-image"]');i&&i.length>0&&i.forEach(n=>{n.remove()})},removeLoadingImageFromQuizPayload=i=>{const n=new Map;return i.answer.list.forEach(e=>{n.set(e.id,ct(rt({},e),{content:removeAllLoadingImage(e.content)}))}),removeAllLoadingImageFromHTML(),ct(rt({},i),{answer:ct(rt({},i.answer),{list:n}),question:ct(rt({},i.question),{content:removeAllLoadingImage(i.question.content)}),explanation:ct(rt({},i.explanation),{content:removeAllLoadingImage(i.explanation.content)})})},useUpsertQuiz=()=>{const{mutate:i,isLoading:n}=inferMutation({entity:"quiz",action:"QUIZ_UPSERT"})();return{upsertQuiz:react.exports.useCallback((...t)=>{const[a,...o]=t,u=removeLoadingImageFromQuizPayload(a.quiz);i({quiz:u},...o)},[i]),isLoading:n}};export{QuizLayout as Q,useStrictQuiz as a,useUpsertQuiz as b,QuizContent$1 as c,QuizContent as d,useQuizUpdate as u};
