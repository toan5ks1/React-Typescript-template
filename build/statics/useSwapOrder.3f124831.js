var V=Object.defineProperty,k=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var _=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&_(e,r,t[r]);if(h)for(var r of h(t))C.call(t,r)&&_(e,r,t[r]);return e},b=(e,t)=>k(e,M(t));import{by as D,bp as w,dq as $,dr as j,aS as A,r as L,eX as v,hP as x,aH as P,hV as T,R as c,b8 as q,aI as N,aG as z,aj as H}from"./index.7daee9ef.js";import{r as I,v as B,w as U,x as F,A as K,u as Q}from"./useShowSnackbar.da46e481.js";import{u as W}from"./useNotifyForm.ee77e08e.js";var ie=D(w.exports.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),de=D(w.exports.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),S={},G=j.exports;Object.defineProperty(S,"__esModule",{value:!0});var X=S.default=void 0,J=G($),Y=w.exports,Z=(0,J.default)((0,Y.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");X=S.default=Z;var g={},ee=j.exports;Object.defineProperty(g,"__esModule",{value:!0});var te=g.default=void 0,re=ee($),ae=w.exports,se=(0,re.default)((0,ae.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward");te=g.default=se;function pe(e,t){return e.map(r=>{const s=t(r.value);return b(O({},r),{value:s})})}const me=()=>{const e=I(),t=B(),r=e(`resources.${A.LOS}.lo`),{mutate:s,isLoading:n}=U({entity:"learningObjective",action:"LO_DELETE"})({onSuccess:()=>{t(e("ra.common.deleteSuccess",{smart_count:r},{lowercase:!0}))},onError:a=>{if(F.warn("[useDeleteLOs] LO delete",a),K.isAppError(a))return t(`${e("ra.common.deleteFail")}: ${e(a.message)}`,"error");t(`${e("ra.common.deleteFail")}: ${e("ra.manabie-error.unknown")}`,"error")},syllabusMigrationQuery:"default"});return{deleteLOs:L.exports.useCallback((a,l)=>{s(a,l)},[s]),isLoading:n}},oe=()=>{const e=Q(A.LOS),t=W({action:v.EDIT,entityName:e("lo")}),{mutate:r,isLoading:s}=U({entity:"learningObjective",action:"syllabusLOUpsert"})({onSuccess:()=>{t(x.SUCCESS,{},"")},onError:a=>{F.warn("[useUpdateLOs]",a),t(x.FAILURE,{},a.message)},syllabusMigrationQuery:"default"}),n=L.exports.useCallback(({formData:a,LOData:l,topicId:u})=>{const{type:d,display_order:i,lo_id:p,school_id:m}=l,f=i!=null?i:1,y=d;return b(O({},a),{loId:p,type:y,topicId:u,schoolId:m,displayOrder:f})},[]);return{updateLOs:L.exports.useCallback((a,l)=>{if(s)return;const u=n(a);r(u,l)},[n,r,s]),isLoading:s}},fe=e=>{const{open:t,onClose:r,data:s,topicId:n,onSuccess:o}=e,a=I(),{updateLOs:l,isLoading:u}=oe(),d=P({defaultValues:{name:s.name}}),i=T[s.type],{handleSubmit:p}=d,m=L.exports.useCallback(E=>{l({formData:E,topicId:n,LOData:s},{onSuccess:()=>{o(),r()}})},[l,n,s,o,r]),f=a(`resources.learning_objectives.choices.LearningObjectiveType.${i}`),y=`${a("ra.common.action.rename")} ${f}`;return c.createElement(q,{title:y,open:t,onClose:r,onSave:p(m),footerConfirmButtonProps:{disabled:u}},c.createElement(N,{methods:d,formProps:{onSubmit:p(m)}},c.createElement(c.Fragment,null,c.createElement(z,{name:"name",size:"small",label:f,required:!0,rules:{required:a("resources.input.error.required")}}),c.createElement(H,{display:"none"},c.createElement("input",{type:"submit"})))))},ve=({data:e,key:t})=>{const r=(n,o)=>{if(!e)return null;const a=e.findIndex(l=>l[t]===o);return s(n,a)},s=(n,o)=>{if(o===-1||o===0&&n===v.MOVE_UP||o===e.length-1&&n===v.MOVE_DOWN)return null;let a=0;switch(n){case v.MOVE_UP:{a=o-1;break}default:a=o+1}const l=e[o],u=e[a];return[l,u,o]};return{swap:r,getSwap:s}};export{ie as A,fe as D,de as a,ve as b,te as c,X as d,pe as t,me as u};
