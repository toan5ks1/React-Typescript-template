var L=Object.defineProperty;var l=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var O=(e,o,a)=>o in e?L(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,f=(e,o)=>{for(var a in o||(o={}))C.call(o,a)&&O(e,a,o[a]);if(l)for(var a of l(o))R.call(o,a)&&O(e,a,o[a]);return e};var y=(e,o)=>{var a={};for(var s in e)C.call(e,s)&&o.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&l)for(var s of l(e))o.indexOf(s)<0&&R.call(e,s)&&(a[s]=e[s]);return a};import{aH as U,aS as m,R as E,cw as h,aG as w,eC as b,r as B}from"./index.7daee9ef.js";import{r as F,v as x,w as S,x as g}from"./useShowSnackbar.da46e481.js";const H=e=>{const t=e,{children:o,defaultValues:a,loading:s,onClose:u,onSave:d}=t,c=y(t,["children","defaultValues","loading","onClose","onSave"]),r=F(),i=U({defaultValues:a}),{handleSubmit:p}=i,k={name:{required:{value:!0,message:r("resources.input.error.fieldCannotBeBlank",{field:r(`resources.${m.BOOKS}.bookName`)})}}};return E.createElement(h,f({footerConfirmButtonProps:{disabled:s},onClose:u,onSave:p(d),methods:i},c),E.createElement(w,{autoFocus:!0,required:!0,id:"name",label:r(`resources.${m.BOOKS}.bookName`),name:"name",rules:k.name}))},M=()=>{const e=F(),o=x(),{mutate:a,isLoading:s}=S({entity:"book",action:"syllabusBookUpsert"})({syllabusMigrationQuery:"default",onSuccess:()=>{o(e("ra.common.createdSuccess",{smart_count:e(`resources.${m.BOOKS}.name`)},{lowercase:!0}))},onError:t=>{g.error("onBookCreate",t),o("ra.common.createdFail",b.ERROR)}}),{mutate:u,isLoading:d}=S({entity:"book",action:"syllabusBookUpsert"})({syllabusMigrationQuery:"default",onSuccess:()=>{o(e("ra.common.updatedSuccess",{smart_count:e(`resources.${m.BOOKS}.name`)},{lowercase:!0}))},onError:t=>{g.error("onBookUpdate",t),o("ra.common.updatedFail",b.ERROR)}}),{mutate:c,isLoading:r}=S({entity:"book",action:"BOOK_DUPLICATE"})({onSuccess:()=>{o("ra.message.duplicateBookSuccess")},onError:t=>{g.error("onBookDuplicate",t),o("ra.message.duplicateBookFail",b.ERROR)}}),i=B.exports.useCallback((t,n)=>a(t,n),[a]),p=B.exports.useCallback((t,n)=>u(t,n),[u]),k=B.exports.useCallback(({bookId:t,bookName:n},D)=>{c({bookId:t,bookName:`Duplicate - ${n}`},D)},[c]);return{isLoadingCreate:s,isLoadingUpdate:d,isLoadingDuplicate:r,onCreate:i,onUpdate:p,onDuplicate:k}};export{H as B,M as u};
